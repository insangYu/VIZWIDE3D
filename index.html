<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>VIZWide3D :: SOFTHILLS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <link rel="stylesheet" href="VIZCore/Resource/css/VIZCore.css">
    <!--<link rel="stylesheet" href="VIZCore/Resource/css/VIZCore_dual.css">-->
    <script type="module">
        import VIZWide3D from "./VIZCore/VIZCore.js";
        import { VIZCore } from "./VIZCore/VIZCore.js";

        let view = document.getElementById("view");
        view.className = "VIZCore";
        let vizwide3d = new VIZWide3D(view);
        //console.log("import - call");
        let initresult = vizwide3d.Init();

        let onSelectEvent = function (event) {
            // 선택된 모델이 없음
            if (event.data.id == -1) {
                //alert('선택된 모델이 없거나, 기존 선택상태가 해제됨.');
            }
            // 선택된 모델이 있음
            else {
                console.log(event.data.id);
                //alert("MODEL NAME : " + event.data.name);
                let keys =[];
                keys = vizwide3d.Object3D.UDA.GetKeys();
                console.log(keys);
            }
        }
        

        let onLoadingCompleted = function (event) {
            //console.log("Load_Completed!");
        }

        let onEmptyMeshBlock = function (event) {
            console.log("Alert_EmptyMeshBlock!");
        }

        if (initresult === true) {
            
            // Add Event Handler : Loading Completed Event (로딩 완료 이벤트)
            vizwide3d.Model.OnModelOpenedEvent(onLoadingCompleted);

            vizwide3d.Model.OnStreamProgressChangedEvent(function(e){
                console.log("Total : ",  e.data.total, "Current : ", e.data.current, "Percentage : ", e.data.percentage);
            });

            // Add Event Handler : Object Selected Event (모델 선택 이벤트)
            vizwide3d.Object3D.OnObject3DSelected(onSelectEvent);
            vizwide3d.View.OnEmptyMeshBlockEvent(onEmptyMeshBlock);
        }

        // Init.
        vizwide3d.Model.OpenHeader("./VIZCore/Model/toycar/vizw/toycar_wh.vizw");
		
		//vizwide3d.Frame.OpenUri('./VIZCore/Model/ShipGrid/8222.json');
        let str = "[{\"axis\":\"X\",\"axisId\":0,\"label\":\"FR\",\"items\":[{\"id\":0,\"offset\":1},{\"id\":1,\"offset\":2}]},{\"axis\":\"Y\",\"axisId\":1,\"label\":\"LP\",\"items\":[{\"id\":0,\"offset\":0},{\"id\":0,\"offset\":1}]},{\"axis\":\"Z\",\"axisId\":2,\"label\":\"LP\",\"items\":[{\"id\":0,\"offset\":1},{\"id\":1,\"offset\":2}]}]"
        vizwide3d.Frame.OpenString(str);
        vizwide3d.Frame.ShowNumberAllStep(true);

    </script>
</head>
<body>
    <div id="view"></div>
    <div id="viewDual"></div>
    <div id="view_info" class="view_info"></div>
</body>
</html>