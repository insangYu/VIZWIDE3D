let UIMarkup_Measure_Angle=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b),this['Start']=function(){if($('.ui_message')['length']>0x0){let e='Calculate\x20the\x20angle\x20between\x20three\x20points.',f=e;$('.ui_message_text')['html'](f),$('.ui_message')['fadeIn'](0x1f4);}d['base']['prototype']['Start']['call'](d);},this['Release']=function(){d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x2:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(e){switch(a['GetStep']()){case 0x0:{if(e===undefined)return;if(!e['pick'])return;a['currentReviewItem']['drawitem']['position'][0x0]=new c['Vector3']()['copy'](e['position']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x1:{if(e===undefined)return;if(!e['pick'])return;a['currentReviewItem']['drawitem']['position'][0x1]=new c['Vector3']()['copy'](e['position']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x2:{if(e===undefined)return;if(!e['pick'])return;a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_ANGLE'],a['currentReviewItem']['drawitem']['position'][0x2]=new c['Vector3']()['copy'](e['position']),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](e['position']);let f=a['currentReviewItem']['drawitem']['position'];b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],f),b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x3:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();},this['mouseDown']=function(e,f,g){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,e,f,g),a['actionEnabled']=!![],!![];},this['mouseMove']=function(e,f){a['base']['prototype']['mouseMove']['call'](a,e,f);switch(a['GetStep']()){case 0x3:{let g=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),h=b['Camera']['world2ScreenWithMatrix'](g,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),i=b['Camera']['screen2WorldWithMatrix'](g,new c['Vector3'](e,f,h['z']));a['currentReviewItem']['text']['position']['copy'](i),b['Renderer']['Render']();}break;}},this['mouseUp']=function(e,f,g){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,e,f,g),a['actionEnabled']=!![];if(g===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:case 0x1:case 0x2:{if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let i=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);if(i!==undefined){b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];break;}}let h=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(h!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==h['bodyId']){let j=function(k){b['Pick']['MakeMeasurePreselectInfoByID'](k);if(b['useFramebuffer'])b['MeshBlock']['Reset']();b['Renderer']['Render']();};b['Pick']['GetBodyCacheDownload'](h['bodyId'],j),d['mouseAction']=![];break;}}d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];}}break;case 0x3:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(e,f,g){if(flag===c['Enum']['MARKUP_FLAG']['ZOOM'])a['base']['prototype']['mouseWheel']['call'](a,e,f,g);},this['Render2D']=function(e){const f=new c['Matrix4']();f['copy'](b['Camera']['cameraMatrix']);const g=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],f);switch(a['GetStep']()){case 0x0:break;case 0x1:{let h=0x3;e['fillStyle']='rgba(0,\x20255,\x200,\x201)',e['strokeStyle']='rgba(255,\x20255,\x20255,\x201)',e['lineWidth']=0x1;let i=new c['Matrix4']()['transformVector'](g['elements'],[a['currentReviewItem']['drawitem']['position'][0x0]['x'],a['currentReviewItem']['drawitem']['position'][0x0]['y'],a['currentReviewItem']['drawitem']['position'][0x0]['z'],0x1]);i[0x0]/=i[0x3],i[0x1]/=i[0x3];let j=(i[0x0]*0.5+0.5)*e['canvas']['width'],k=(i[0x1]*-0.5+0.5)*e['canvas']['height'];e['beginPath'](),e['arc'](j,k,h,0x0,Math['PI']*0x2),e['fill']();}break;case 0x2:{let l=0x3;e['fillStyle']='rgba(0,\x20255,\x200,\x201)',e['strokeStyle']='rgba(255,\x20255,\x20255,\x201)',e['lineWidth']=0x1;let m,n;{let o=new c['Matrix4']()['transformVector'](g['elements'],[a['currentReviewItem']['drawitem']['position'][0x0]['x'],a['currentReviewItem']['drawitem']['position'][0x0]['y'],a['currentReviewItem']['drawitem']['position'][0x0]['z'],0x1]);o[0x0]/=o[0x3],o[0x1]/=o[0x3];let p=(o[0x0]*0.5+0.5)*e['canvas']['width'],q=(o[0x1]*-0.5+0.5)*e['canvas']['height'];m=new c['Vector2'](p,q);}{let r=new c['Matrix4']()['transformVector'](g['elements'],[a['currentReviewItem']['drawitem']['position'][0x1]['x'],a['currentReviewItem']['drawitem']['position'][0x1]['y'],a['currentReviewItem']['drawitem']['position'][0x1]['z'],0x1]);r[0x0]/=r[0x3],r[0x1]/=r[0x3];let s=(r[0x0]*0.5+0.5)*e['canvas']['width'],t=(r[0x1]*-0.5+0.5)*e['canvas']['height'];n=new c['Vector2'](s,t);}e['beginPath'](),e['moveTo'](m['x'],m['y']),e['lineTo'](n['x'],n['y']),e['stroke'](),e['beginPath'](),e['arc'](m['x'],m['y'],l,0x0,Math['PI']*0x2),e['fill'](),e['beginPath'](),e['arc'](n['x'],n['y'],l,0x0,Math['PI']*0x2),e['fill']();}break;}},this['GetProcessFlag']=function(e){switch(a['GetStep']()){case 0x0:case 0x1:case 0x2:{if(e===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(e===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(e===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(e===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return!![];if(e===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}return![];};};export default UIMarkup_Measure_Angle;