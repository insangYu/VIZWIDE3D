class DualCamera{constructor(a,b){let c=this;this['projectionMatrixSrc']=undefined,this['projectionMatrix']=undefined,this['viewMatrix']=undefined,this['cameraMatrix']=undefined,this['cameraPosition']=undefined,this['cameraTarget']=undefined,this['cameraUp']=undefined,this['perspectiveView']=undefined,this['cameraZoomRatio']=undefined,this['cameraZoom']=undefined,this['fieldOfView']=undefined,this['viewDistance']=undefined,this['near']=undefined,this['far']=undefined,this['useYUp']=![],this['useUpVectorFixRotateVAngleRange']=!![];let d=0x0,e=0x5a;this['matModel']=undefined,this['matMV']=undefined,this['matMVP']=undefined,this['viewDistanceFactor']=0.8,this['pivot']=undefined;let f=new Map(),g=b['Enum']['VIEW_MODES']['PlusISO'];this['screenProjectionMatrix']=undefined;let h=0.1,i=0x1;this['cameraAnimation']=![],j();function j(){c['perspectiveView']=![],c['cameraZoom']=0x1,c['near']=0.1,c['far']=0x64,c['cameraZoomRatio']=0.3,c['fieldOfView']=0x3c,c['cameraMatrix']=new b['Matrix4'](),c['viewMatrix']=new b['Matrix4'](),c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']=new b['Matrix4'](),c['matModel']=new b['Matrix4'](),c['matMV']=new b['Matrix4'](),c['matMVP']=new b['Matrix4']();}function k(){let t=a['Data']['GetBBox'](),u=t['center'],v=t['radius'];c['cameraMatrix']=new b['Matrix4']();let w=new b['Vector3']()['copy'](u)['multiplyScalar'](-0x1);c['cameraMatrix']['setPosition'](w),c['cameraPosition']=new b['Vector3'](),c['cameraTarget']=new b['Vector3'](),c['cameraUp']=new b['Vector3'](),c['viewDistance']=v*c['viewDistanceFactor'],c['cameraTarget']['set'](0x0,0x0,-0x1),c['cameraUp']['set'](0x0,0x1,0x0),c['cameraPosition']=new b['Vector3']()['copy'](w);let x=new b['Vector3']()['copy'](c['cameraTarget']);c['cameraPosition']['add'](x['multiplyScalar'](v)),c['cameraZoom']=0x1,c['pivot']=u;if(a['Renderer']!==null)a['Renderer']['MainFBClear']();}this['ResetGLWindow']=function(){k();},this['ClearGLWindow']=function(){j();};function l(){if(a['CAMERADEBUG'])return m();let t=!![],u=new b['Matrix4']()['copy'](c['projectionMatrixSrc']),v=a['Data']['GetBBox'](),w=v['center'],x=v['radius'];if(x<=0x0)return![];let y=a['gl'];const z=y['canvas']['clientWidth']/y['canvas']['clientHeight'];if(c['perspectiveView']){const A=a['Util']['DegToRad'](0x3c);c['near']=0x1,c['far']=0x30d40,c['cameraPosition']['set'](0x0,0x0,c['viewDistance']),c['cameraTarget']['set'](0x0,0x0,0x0),c['cameraUp']['set'](0x0,0x1,0x0);let B=new b['Vector3']();B['copy'](c['cameraPosition']);let C=[new b['Vector3'](v['min']['x'],v['min']['y'],v['min']['z']),new b['Vector3'](v['min']['x'],v['min']['y'],v['max']['z']),new b['Vector3'](v['min']['x'],v['max']['y'],v['min']['z']),new b['Vector3'](v['min']['x'],v['max']['y'],v['max']['z']),new b['Vector3'](v['max']['x'],v['min']['y'],v['min']['z']),new b['Vector3'](v['max']['x'],v['min']['y'],v['max']['z']),new b['Vector3'](v['max']['x'],v['max']['y'],v['min']['z']),new b['Vector3'](v['max']['x'],v['max']['y'],v['max']['z'])];{let G=Math['min'](Math['max'](c['viewDistance']/a['Data']['GetUnitValue'](0x3e8),x/a['Data']['GetUnitValue'](0x3e8)),a['Data']['GetUnitValue'](0x64)),H=new b['Vector3']()['copy'](w);H['applyMatrix4'](c['cameraMatrix']);let I=new b['Vector3']()['subVectors'](c['cameraTarget'],B);I['normalize']();let J=new b['Vector3']()['subVectors'](H,B);J['normalize']();let K=new b['Vector3']()['subVectors'](H,B)['length'](),L=I['dot'](J);K=K*L,G=Math['max'](G,K-x),c['near']=G;}{let M=x,N=new b['Vector3']()['copy'](B);for(let O=0x0;O<0x8;++O){C[O]['applyMatrix4'](c['cameraMatrix']);let P=new b['Vector3']()['subVectors'](C[O],N)['length'](),Q=new b['Vector3']()['subVectors'](c['cameraTarget'],N);Q['normalize']();let R=new b['Vector3']()['subVectors'](C[O],N);R['normalize']();let S=Q['dot'](R);P=P*Math['abs'](S),M=Math['max'](M,P);}c['far']=x/0x64+M;}let D=new b['Matrix4']()['perspective'](A,z,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=D,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']);let E=new b['Vector3']()['copy'](w)['multiplyScalar'](-0x1),F=new b['Matrix4']()['lookAt'](B,c['cameraTarget'],c['cameraUp']);c['viewMatrix']=new b['Matrix4']()['getInverse'](F),c['projectionMatrix']['multiply'](c['viewMatrix']);}else{let T=c['cameraZoom'],U=x*c['viewDistanceFactor']*T,V=x*c['viewDistanceFactor']*T;if(z>0x1)U*=z;else V/=z;let W=-U/0x2,X=U/0x2,Y=-V/0x2,Z=V/0x2;c['near']=-x*0x5,c['far']=x*0x5;let a0=new b['Matrix4']()['orthographic'](W,X,Y,Z,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=a0,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']),c['viewMatrix']=new b['Matrix4'](),c['viewMatrix']['copy'](c['cameraMatrix']);}if(v['radius']===0x0)c['cameraMatrix']['identity']();c['UpdateGLWindow'](undefined),n();if(c['projectionMatrixSrc']['equals'](u))t=![];return t;};function m(){let t=!![],u=new b['Matrix4']()['copy'](c['matMVP']),v=a['Data']['GetBBox'](),w=v['center'],x=v['radius'];if(x<=0x0)return![];let y=a['gl'];const z=y['canvas']['clientWidth']/y['canvas']['clientHeight'];if(c['perspectiveView']){const A=a['Util']['DegToRad'](c['fieldOfView']);c['near']=0x1,c['far']=0x30d40;let B=new b['Vector3']()['copy'](c['cameraPosition']);B['applyMatrix4'](c['matMV']);let C=[new b['Vector3'](v['min']['x'],v['min']['y'],v['min']['z']),new b['Vector3'](v['min']['x'],v['min']['y'],v['max']['z']),new b['Vector3'](v['min']['x'],v['max']['y'],v['min']['z']),new b['Vector3'](v['min']['x'],v['max']['y'],v['max']['z']),new b['Vector3'](v['max']['x'],v['min']['y'],v['min']['z']),new b['Vector3'](v['max']['x'],v['min']['y'],v['max']['z']),new b['Vector3'](v['max']['x'],v['max']['y'],v['min']['z']),new b['Vector3'](v['max']['x'],v['max']['y'],v['max']['z'])];{let F=Math['min'](Math['max'](c['viewDistance']/0x3e8,x/0x3e8),0x64),G=new b['Vector3']()['copy'](w);G['applyMatrix4'](c['matMV']);let H=new b['Vector3'](0x0,0x0,-0x1),I=new b['Vector3']()['subVectors'](G,B);I['normalize']();let J=new b['Vector3']()['subVectors'](G,B)['length'](),K=H['dot'](I);J=J*K,F=Math['max'](F,J-x),c['near']=F;}{let L=x;for(let M=0x0;M<0x8;++M){C[M]['applyMatrix4'](c['matMV']);let N=new b['Vector3']()['subVectors'](C[M],B)['length'](),O=new b['Vector3'](0x0,0x0,-0x1),P=new b['Vector3']()['subVectors'](C[M],B);P['normalize']();let Q=O['dot'](P);N=N*Math['abs'](Q),L=Math['max'](L,N);}c['far']=x/0x64+L;}let D=new b['Matrix4']()['perspective'](A,z,c['near'],c['far']);c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['elements']=D;let E=new b['Matrix4']()['lookAt'](c['cameraPosition'],new b['Vector3']()['addVectors'](c['cameraPosition'],c['cameraTarget']),c['cameraUp']);c['viewMatrix']['copy'](E);}else{let R=c['cameraZoom'],S=x*1.5*R,T=x*1.5*R;if(z>0x1)S*=z;else T/=z;let U=-S/0x2,V=S/0x2,W=-T/0x2,X=T/0x2;c['near']=-x*0x5,c['far']=x*0x5;let Y=new b['Matrix4']()['orthographic'](U,V,W,X,c['near'],c['far']);c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['elements']=Y;let Z=new b['Matrix4']()['lookAt'](c['cameraPosition'],new b['Vector3']()['addVectors'](c['cameraPosition'],c['cameraTarget']),c['cameraUp']);c['viewMatrix']['copy'](Z);}if(v['radius']===0x0)c['cameraMatrix']['identity']();c['UpdateGLWindow'](undefined),n();if(c['matMVP']['equals'](u))t=![];return t;}this['ResizeGLWindow']=function(){return l();},this['UpdateGLWindow']=function(t){a['CAMERADEBUG']?(t===undefined&&(t=new b['Matrix4']()),c['matModel']=new b['Matrix4']()['copy'](t),c['matMV']=new b['Matrix4']()['multiplyMatrices'](c['viewMatrix'],c['matModel']),c['matMVP']=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['matMV'])):(t===undefined&&(t=new b['Matrix4']()['copy'](c['cameraMatrix'])),c['matModel']=new b['Matrix4']()['copy'](t),c['matMV']=new b['Matrix4']()['copy'](t),c['matMVP']=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['matMV']));};function n(){let t=a['gl'],u=t['canvas']['clientWidth'],v=t['canvas']['clientHeight'],w=new b['Matrix4']()['orthographic'](0x0,u,v,0x0,-0x3e8,0x3e8);c['screenProjectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']['elements']=w;}function o(t){let u=new b['Vector3']()['copy'](c['pivot']),v=new b['Vector3']()['copy'](u),w=new b['Matrix4']()['copy'](c['matMVP']),x=p(w,v);const y=a['Renderer']['GetSizeWidth'](),z=a['Renderer']['GetSizeHeight']();if(x['x']<0x0||x['x']>y||x['y']<0x0||x['y']>z){let I=new b['Vector3'](y/0x2,z/0x2,x['z']);x['copy'](I);let J=q(w,I);u['copy'](J),c['pivot']['copy'](J);}c['cameraZoom']*=t;if(c['perspectiveView']){if(a['CAMERADEBUG']){let K=new b['Vector3'](0x0,0x0,-0x1);K['multiplyScalar'](c['viewDistance']*-(0x1-t)/0x2),c['cameraPosition']['add'](K);}else c['cameraMatrix']['translate'](0x0,0x0,c['viewDistance']*(0x1-t)/0x2);}let A=new b['Vector3']()['copy'](u);if(A['z']>=c['viewDistance']&&c['perspectiveView'])return;l();let B=new b['Vector3']()['copy'](u),C=p(c['matMVP'],B),D=new b['Vector3'](x['x'],x['y'],C['z']),E=new b['Vector3'](C['x'],C['y'],C['z']),F=q(c['projectionMatrix'],D),G=q(c['projectionMatrix'],E),H=new b['Vector3']()['subVectors'](F,G);if(a['CAMERADEBUG'])c['cameraPosition']['add'](H);else c['cameraMatrix']['translate'](H['x'],H['y'],H['z']);l();}this['MulViewDistance']=function(t){o(t);};let p=function(t,u){let v=a['gl'];u['applyMatrix4'](t);let w=new b['Vector3']();return w['x']=v['canvas']['clientWidth']*(u['x']+0x1)*0.5,w['y']=v['canvas']['clientHeight']*(0x1-(u['y']+0x1)*0.5),w['z']=u['z'],w;};this['world2ScreenWithMatrix']=function(t,u){return p(t,u);};let q=function(t,u){let v=a['gl'],w=new b['Vector3']();w['x']=u['x']/v['canvas']['clientWidth']*0x2-0x1,w['y']=-(u['y']/v['canvas']['clientHeight']*0x2-0x1),w['z']=u['z'];let x=new b['Matrix4']()['getInverse'](t);return w['applyMatrix4'](x),w;};this['screen2WorldWithMatrix']=function(t,u){return q(t,u);},this['SetPerspectiveView']=function(t){if(c['perspectiveView']===t)return;c['perspectiveView']=t,c['ResizeGLWindow'](),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewTopPlan']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k();let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewBottomPlan']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k();let v=new b['Matrix4']()['makeRotationX'](3.141592654);v['multiply'](c['cameraMatrix']),c['cameraMatrix']['copy'](v);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-w['x'],t['y']-w['y'],t['z']-w['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewFrontSection']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewBackSection']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewRightElevation']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewLeftElevation']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewISOPlus']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):(c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0));let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewISOMinus']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4*0x5,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewCustom']=function(){let t=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),u=c['cameraZoom'];k();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x2d,0x0,0x0);let v=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=u,c['cameraMatrix']['translate'](t['x']-v['x'],t['y']-v['y'],t['z']-v['z']);let w=new b['Vector3'](0x0,0x118c30,0x0),x=new b['Matrix4']();x['makeTranslation'](w['x'],w['y'],w['z']);let y=new b['Matrix4']()['copy'](c['cameraMatrix']);c['cameraMatrix']['multiplyMatrices'](x,y),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['ViewISOLeftFrontBottom']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISOLeftFrontTop']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISOLeftBackBottom']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISOLeftBackTop']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISORightFrontBottom']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISORightFrontTop']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISORightBackBottom']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewISORightBackTop']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewLeftFrontSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewLeftBackSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewLeftBottomSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewLeftTopSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewRightFrontSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewRightBackSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewRightBottomSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewRightTopSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewFrontBottomSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewFrontTopSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewBackBottomSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['ViewBackTopSide']=function(){let t;c['cameraAnimation']&&(t=c['GetCameraData']());let u=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),v=c['cameraZoom'];k(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=v,c['cameraMatrix']['translate'](u['x']-w['x'],u['y']-w['y'],u['z']-w['z']),l(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let x=c['GetCameraData']();r(t,x,i);}},this['CameraRotate']=function(t){let u=new b['Matrix4']()['makeRotationX'](t['x']),v=new b['Matrix4']()['makeRotationY'](t['y']),w=new b['Matrix4']()['makeRotationZ'](t['z']);if(a['FixZAxis']){let x=new b['Matrix4']()['copy'](c['matMV']);{let A=new b['Matrix4']()['copy'](x);A['setPosition'](new b['Vector3'](0x0,0x0,0x0));let B=new b['Vector3'](0x0,0x0,0x1),C=new b['Vector3'](0x0,0x0,0x0);B['applyMatrix4'](A),C['applyMatrix4'](A);if(B['y']<C['y'])w=new b['Matrix4']()['makeRotationZ'](-t['z']);if(![]){let D=Math['acos'](B['y']),E=d*Math['PI']/0xb4,F=e*Math['PI']/0xb4;if(B['z']<0x0)D*=-0x1;D-t['x']<E&&(t['x']=E+t['x']-D),D-t['x']>F&&(t['x']=F-D+t['x']),u=new b['Matrix4']()['makeRotationX'](t['x']);}}let y=new b['Matrix4'](),z=new b['Matrix4']();{let G=new b['Vector3']()['copy'](c['pivot']);G['applyMatrix4'](x);let H=new b['Matrix4'](),I=new b['Vector3']()['copy'](G)['multiplyScalar'](-0x1);H['setPosition'](I);let J=new b['Matrix4']()['copy'](u),K=new b['Matrix4']()['setPosition'](G),L=new b['Matrix4']()['multiplyMatrices'](J,H);y=new b['Matrix4']()['multiplyMatrices'](K,L);}{let M=new b['Vector3']()['copy'](c['pivot']),N=new b['Matrix4'](),O=new b['Vector3']()['copy'](M)['multiplyScalar'](-0x1);N['setPosition'](O);let P=new b['Matrix4']()['copy'](w),Q=new b['Matrix4']()['setPosition'](M),R=new b['Matrix4']()['multiplyMatrices'](P,N);z=new b['Matrix4']()['multiplyMatrices'](Q,R);}if(c['useUpVectorFixRotateVAngleRange']){let S=new b['Matrix4']()['multiplyMatrices'](x,z),T=new b['Matrix4']()['multiplyMatrices'](y,S),U=new b['Vector3'](0x0,0x0,0x1),V=new b['Matrix4']()['copy'](T);V['setPosition'](new b['Vector3'](0x0,0x0,0x0)),U['applyMatrix4'](V);let W=Math['acos'](U['y']),X=d*Math['PI']/0xb4,Y=e*Math['PI']/0xb4;if(U['z']<0x0)W*=-0x1;if(W<X){t['x']=X-W+t['x'],c['CameraRotate'](t);return;}if(W>Y){t['x']=Y-W+t['x'],c['CameraRotate'](t);return;}}if(!a['CAMERADEBUG']){let Z=new b['Matrix4']()['multiplyMatrices'](c['cameraMatrix'],z);c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](y,Z);}else{let a0=new b['Matrix4']()['multiplyMatrices'](x,z),a1=new b['Matrix4']()['multiplyMatrices'](y,a0);c['cameraPosition']['applyMatrix4'](a1),c['cameraTarget']['applyMatrix4'](a1),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](a1),c['cameraUp']['normalize']();}}else{let a2=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['multiplyMatrices'](u,v),w);c['CameraRotateByMatrix'](a2);}},this['CameraRotateByMatrix']=function(t){let u=new b['Vector3']()['copy'](c['pivot']);u['applyMatrix4'](c['matMV']);let v=new b['Matrix4']()['setPosition'](u),w=new b['Vector3']()['copy'](u)['multiplyScalar'](-0x1),x=new b['Matrix4']()['setPosition'](w),y=new b['Matrix4']()['multiplyMatrices'](t,x),z=new b['Matrix4']()['multiplyMatrices'](v,y);c['cameraPosition']['applyMatrix4'](z),c['cameraTarget']['applyMatrix4'](t),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](t),c['cameraUp']['normalize'](),!a['CAMERADEBUG']&&(c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](z,c['cameraMatrix']));},this['CameraRotateWithMV']=function(t,u){c['cameraPosition']['applyMatrix4'](t),c['cameraTarget']['applyMatrix4'](t),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](t),c['cameraUp']['normalize']();},this['CameraTranslate']=function(t){if(a['CAMERADEBUG'])c['cameraPosition']['add'](t);else{let u=new b['Matrix4']();u['makeTranslation'](t['x'],t['y'],t['z']),c['CameraTranslateByMatrix'](u);}},this['CameraTranslateByMatrix']=function(t){if(a['CAMERADEBUG']){}else{let u=new b['Matrix4']()['copy'](c['cameraMatrix']);c['cameraMatrix']['multiplyMatrices'](t,u);}},this['SetPivot']=function(t){c['pivot']['copy'](t);},this['ViewBoxZoom']=function(t,u,v,w){if(t===v||u===w)return;let x;c['cameraAnimation']&&(x=c['GetCameraData']());const y=a['Renderer']['GetSizeWidth'](),z=a['Renderer']['GetSizeHeight'](),A=(v-t)/y,B=(w-u)/z,C=Math['max'](A,B);if(c['perspectiveView']){let D=a['Renderer']['PickPositionObject']((v-t)/0x2,(w-u)/0x2);D!==undefined&&c['SetPivot'](D);let E=new b['Vector3']()['copy'](c['pivot']),F=p(c['matMVP'],new b['Vector3']()['copy'](E)),G=new b['Vector3']()['copy'](F);G['x']=y/0x2,G['y']=z/0x2,F['x']=(t+v)/0x2,F['y']=(u+w)/0x2;let H=q(c['matMVP'],F),I=new b['Vector3']()['copy'](H)['applyMatrix4'](c['cameraMatrix']),J=c['viewDistance']-vPivotDualCameraz;const K=J,L=J*C,M=K-L;c['cameraMatrix']['translate'](0x0,0x0,M),l();{let N=p(c['matMVP'],new b['Vector3']()['copy'](E)),O,P,Q,R;O=new b['Vector3'](G['x'],G['y'],N['z']),P=new b['Vector3'](N['x'],N['y'],N['z']),Q=q(c['projectionMatrix'],O),R=q(c['projectionMatrix'],P);let S=new b['Vector3']()['subVectors'](R,Q);if(N['z']>0x1)S=S['multiplyScalar'](-0x1);c['cameraMatrix']['translate'](-S['x'],-S['y'],-S['z']),l();}}else{let T,U,V,W,X;T=p(c['matMVP'],new b['Vector3']()),U=new b['Vector3'](y/0x2,z/0x2,T['z']),V=new b['Vector3']((t+v)/0x2,(u+w)/0x2,T['z']),W=q(c['projectionMatrix'],U),X=q(c['projectionMatrix'],V);const Y=new b['Vector3']()['subVectors'](X,W);c['cameraMatrix']['translate'](Y['x'],Y['y'],Y['z']),c['MulViewDistance'](C),l();}if(c['cameraAnimation']){let Z=c['GetCameraData']();r(x,Z,i);}},this['FocusObject']=function(t,u){if(t['length']<=0x0)return;let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w,x;for(let B=0x0;B<t['length'];B++){const C=a['Data']['GetNodeData'](t[B]),D=a['Data']['GetBBox'](C);B===0x0?(w=new b['Vector3']()['copy'](D['min']),x=new b['Vector3']()['copy'](D['max'])):(w['min'](D['min']),x['max'](D['max']));}let y=a['Data']['BBox']([w['x'],w['y'],w['z'],x['x'],x['y'],x['z']]);y=a['Clipping']['RebuildClippingBoundBox'](y);if(y===undefined)return;u!==undefined&&(y['center']['x']+=u['x'],y['center']['y']+=u['y'],y['center']['z']+=u['z']);let z=y['radius']<0.000001?![]:!![],A=c['cameraAnimation'];c['cameraAnimation']=![];if(z){const E=a['Renderer']['GetSizeWidth'](),F=a['Renderer']['GetSizeHeight']();let G=a['Util']['GetBBox2Vertex'](y),H,I;for(let N=0x0;N<0x8;N++){G[N]=p(c['matMVP'],new b['Vector3']()['copy'](G[N])),N===0x0?(H=new b['Vector3']()['copy'](G[N]),I=new b['Vector3']()['copy'](G[N])):(H['min'](G[N]),I['max'](G[N]));}const J=h,K=0x0;let L=(I['x']-H['x'])*J+K,M=(I['y']-H['y'])*J+K;c['ViewBoxZoom'](H['x']-L,H['y']-M,I['x']+L,I['y']+M);}c['FocusPivot'](y['center']),c['cameraAnimation']=A;if(c['cameraAnimation']){let O=c['GetCameraData']();r(v,O,i);}else a['Renderer']['MainFBClear'](),a['Renderer']['Render'](),a['MeshBlock']['Reset']();},this['FocusBBox']=function(t){if(t===undefined)return;let u;c['cameraAnimation']&&(u=c['GetCameraData']());let v=t['radius']<0.000001?![]:!![],w=c['cameraAnimation'];c['cameraAnimation']=![];if(v){const x=a['Renderer']['GetSizeWidth'](),y=a['Renderer']['GetSizeHeight']();let z=a['Util']['GetBBox2Vertex'](t),A,B;for(let G=0x0;G<0x8;G++){z[G]=p(c['matMVP'],new b['Vector3']()['copy'](z[G])),G===0x0?(A=new b['Vector3']()['copy'](z[G]),B=new b['Vector3']()['copy'](z[G])):(A['min'](z[G]),B['max'](z[G]));}const C=h,D=0x0;let E=(B['x']-A['x'])*C+D,F=(B['y']-A['y'])*C+D;c['ViewBoxZoom'](A['x']-E,A['y']-F,B['x']+E,B['y']+F);}c['FocusPivot'](t['center']),c['cameraAnimation']=w;if(c['cameraAnimation']){let H=c['GetCameraData']();r(u,H,i);}else a['Renderer']['MainFBClear'](),a['Renderer']['Render'](),a['MeshBlock']['Reset']();},this['FocusPivot']=function(t){if(t!==undefined)c['pivot']=t;let u;c['cameraAnimation']&&(u=c['GetCameraData']());const v=a['Renderer']['GetSizeWidth'](),w=a['Renderer']['GetSizeHeight']();let x,y,z,A,B;x=p(c['matMVP'],new b['Vector3']()['copy'](c['pivot'])),y=new b['Vector3']()['copy'](x),z=new b['Vector3'](v/0x2,w/0x2,x['z']),A=q(c['projectionMatrix'],y),B=q(c['projectionMatrix'],z);const C=new b['Vector3']()['subVectors'](B,A);c['cameraMatrix']['translate'](C['x'],C['y'],C['z']),l();if(c['cameraAnimation']){let D=c['GetCameraData']();r(u,D,i);}},this['FitAll']=function(){c['ResetGLWindow'](),c['ResizeGLWindow']();},this['ResetView']=function(){c['ResetGLWindow'](),c['InitDirection'](),c['ResizeGLWindow']();};function r(t,u,v){let w=![],x;s(t);let y=new Date()['getTime'](),z=function(){let A=new Date()['getTime']()-y,B=A/0x3e8/v;if(B>=0x1){B=0x1,w=!![],s(u),c['ResizeGLWindow'](),clearInterval(x);return;}{let C=new b['Matrix4']()['copy'](t['matrix_camera'])['multiplyScalar'](0x1-B),D=new b['Matrix4']()['copy'](u['matrix_camera'])['multiplyScalar'](B),E=new b['Matrix4']();for(let F=0x0;F<0x10;F++)currentDualCameraelements[F]=C['elements'][F]+D['elements'][F];c['cameraMatrix']['copy'](E);}{let G=t['distance']*(0x1-B),H=u['distance']*B;c['viewDistance']=G+H;}{let I=t['zoom']*(0x1-B),J=u['zoom']*B;c['cameraZoom']=I+J;}c['ResizeGLWindow']();};x=setInterval(function(){z(),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0x32);};this['SetZAxis2Up']=function(){const t=a['Renderer']['GetSizeWidth'](),u=a['Renderer']['GetSizeHeight']();let v=new b['Vector3'](0x0,0x1,0x0),w=new b['Vector3'](0x0,0x0,0x1),x=new b['Matrix4']()['copy'](c['cameraMatrix']);x['setPosition'](new b['Vector3']()),w['applyMatrix4'](x),w['normalize']();let y=v['dot'](w),z=Math['acos'](y),A=new b['Vector3']()['crossVectors'](w,v);A['multiplyScalar'](z);let B=A['x'],C=A['y'],D=A['z'],E=new b['Matrix4']()['makeRotationX'](B),F=new b['Matrix4']()['makeRotationY'](C),G=new b['Matrix4']()['makeRotationZ'](D),H=new b['Matrix4']();{let I=new b['Matrix4']()['copy'](c['cameraMatrix']),J=new b['Vector3']()['copy'](c['pivot']);J['applyMatrix4'](I);let K=new b['Matrix4'](),L=new b['Vector3']()['copy'](J)['multiplyScalar'](-0x1);K['setPosition'](L);let M=new b['Matrix4']()['multiplyMatrices'](E,F);M=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['copy'](M),G);let N=new b['Matrix4']()['setPosition'](J),O=new b['Matrix4']()['multiplyMatrices'](M,K);H=new b['Matrix4']()['multiplyMatrices'](N,O);}c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](H,c['cameraMatrix']),c['ResizeGLWindow']();},this['SetPivot']=function(t){c['pivot']['copy'](t);},this['GetCameraData']=function(){let t=a['Data']['CameraDataItem']();return t['matrix_view']['copy'](c['viewMatrix']),t['matrix_camera']['copy'](c['cameraMatrix']),t['position']['copy'](c['cameraPosition']),t['up']['copy'](c['cameraUp']),t['target']['copy'](c['cameraTarget']),t['zoom']=c['cameraZoom'],t['distance']=c['viewDistance'],t;};function s(t){c['viewMatrix']=new b['Matrix4']()['copy'](t['matrix_view']),c['cameraMatrix']=new b['Matrix4']()['copy'](t['matrix_camera']),c['cameraPosition']=new b['Vector3']()['copy'](t['position']),c['cameraUp']=new b['Vector3']()['copy'](t['up']),c['cameraTarget']=new b['Vector3']()['copy'](t['target']),c['cameraZoom']=t['zoom'],c['viewDistance']=t['distance'];};this['Backup']=function(){let t=c['GetCameraData']();return f['set'](t['id'],t),t['id'];},this['GetBackupData']=function(t){if(f['has'](t))return f['get'](t);return undefined;},this['DeleteBackupData']=function(t){f['has'](t)&&f['delete'](t);},this['Rollback']=function(t){if(f['has'](t)){let u=f['get'](t);s(u),c['ResizeGLWindow'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();}},this['GetSnapshotParam']=function(t){if(f['has'](t)){let u=f['get'](t),v='';v+=u['id'],v+='↕';for(let w=0x0;w<u['viewMatrix']['elements']['length'];w++){v+=w===0x0?'':'§'+u['viewMatrix']['elements'][w];}v+='↕';for(let x=0x0;x<u['cameraMatrix']['elements']['length'];x++){v+=x===0x0?'':'§'+u['cameraMatrix']['elements'][x];}return v+='↕',v+=u['cameraPosition']['x'],v+='§'+u['cameraPosition']['y'],v+='§'+u['cameraPosition']['z'],v+='↕',v+=u['cameraUp']['x'],v+='§'+u['cameraUp']['y'],v+='§'+u['cameraUp']['z'],v+='↕',v+=u['cameraTarget']['x'],v+='§'+u['cameraTarget']['y'],v+='§'+u['cameraTarget']['z'],v+='↕',v+=u['cameraZoom'],v+='↕',v+=u['viewDistance'],v;}else return'';},this['SetSnapshotParam']=function(t){let u={'id':a['Data']['UUIDv4'](),'matrix_view':new b['Matrix4']()['copy'](c['viewMatrix']),'matrix_camera':new b['Matrix4']()['copy'](c['cameraMatrix']),'position':new b['Vector3']()['copy'](c['cameraPosition']),'up':new b['Vector3']()['copy'](c['cameraUp']),'target':new b['Vector3']()['copy'](c['cameraTarget']),'zoom':c['cameraZoom'],'distance':c['viewDistance']};if(f['has'](u['id'])){let v=f['get'](u['id']),w='';for(let x=0x0;x<v['viewMatrix']['elements']['length'];x++){w+=x===0x0?'':'§'+v['viewMatrix']['elements'][x];}w+='↕';for(let y=0x0;y<v['cameraMatrix']['elements']['length'];y++){w+=y===0x0?'':'§'+v['cameraMatrix']['elements'][y];}return w+='↕',w+=v['cameraPosition']['x'],w+='§'+v['cameraPosition']['y'],w+='§'+v['cameraPosition']['z'],w+='↕',w+=v['cameraUp']['x'],w+='§'+v['cameraUp']['y'],w+='§'+v['cameraUp']['z'],w+='↕',w+=v['cameraTarget']['x'],w+='§'+v['cameraTarget']['y'],w+='§'+v['cameraTarget']['z'],w+='↕',w+=v['cameraZoom'],w+='↕',w+=v['viewDistance'],w;}else return'';},this['SetBaseDirection']=function(t){g=t;},this['InitDirection']=function(){switch(g){case b['Enum']['VIEW_MODES']['PlusX']:c['ViewRightElevation']();break;case b['Enum']['VIEW_MODES']['MinusX']:c['ViewLeftElevation']();break;case b['Enum']['VIEW_MODES']['PlusY']:c['ViewBackSection']();break;case b['Enum']['VIEW_MODES']['MinusY']:c['ViewFrontSection']();break;case b['Enum']['VIEW_MODES']['PlusZ']:c['ViewTopPlan']();break;case b['Enum']['VIEW_MODES']['MinusZ']:c['ViewBottomPlan']();break;case b['Enum']['VIEW_MODES']['PlusISO']:c['ViewISOPlus']();break;case b['Enum']['VIEW_MODES']['MinusISO']:c['ViewISOMinus']();break;case b['Enum']['VIEW_MODES']['CustomView']:c['ViewCustom']();break;default:c['ViewISOPlus']();break;}},this['GetCameraPos']=function(){let t=new b['Matrix4']();c['perspectiveView']?t=new b['Matrix4']()['multiplyMatrices'](c['viewMatrix'],c['cameraMatrix']):t['copy'](c['cameraMatrix']);const u=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),v=new b['Matrix4']()['getInverse'](u);return v['multiplyVector'](new b['Vector3'](0x0,0x0,0x0));},this['GetViewDirection']=function(){const t=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),u=new b['Matrix4']()['getInverse'](t);let v=u['multiplyVector'](new b['Vector3'](0x0,0x0,0x0)),w=u['multiplyVector'](new b['Vector3'](0x0,0x0,0x1)),x=new b['Vector3']()['subVectors'](w,v);return x['normalize']();};}}export default DualCamera;