class ViewCube{constructor(a,b){let c=this;this['Visible']=!![];let d=0x1,e=0x32,f=-0x1,g=-0x2,h=1.2,i=!![],j=new b['BBox'](),k=[],l=undefined,m=new b['Color'](),n=new b['Color'](),o=new b['Color'](),p=new b['Color'](),q=![],r=1.2,s=undefined,t=undefined,u=[],v=undefined;this['ViewCubeItem']=function(){let B={'id':0x0,'row':-0x1,'column':-0x1,'usePick':![],'vertices':[],'uv':[],'direction':new b['Vector3']()};return B;},w();function w(){m=new b['Color']()['set'](0x0,0x0,0x0,0x0),n=new b['Color'](0xa0,0xa0,0xa0,0xff),o=new b['Color'](0xcc,0xcc,0x0,0x32),p=new b['Color'](0x64,0x64,0x64,0xff);}function x(){let B={'buffer':undefined,'uvBuffer':undefined,'start':0x0,'length':0x0,'color':new b['Color']()};return B;}function y(){if(!i)return;const B=a['gl']['canvas']['clientHeight']*0.05;let C=h*B,D=C*0.75,E=C*0.25,F=E*r,G=E,H=C,I=C*0.25;const J=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']);J['setPosition'](new b['Vector3']()),g=-0x2;let K=new b['Vector3']();if(!![]){let P=C,Q=a['gl']['canvas']['clientWidth'],R=a['gl']['canvas']['clientHeight'];switch(d){case 0x0:{K['x']=P+e,K['y']=P+e;}break;case 0x1:{K['x']=Q-P-e,K['y']=P+e;}break;case 0x2:{K['x']=P+e,K['y']=R-P-e;}break;case 0x3:{K['x']=Q-P-e,K['y']=R-P-e;}break;}}k=[];let L=!![],M=new b['Vector3'](),N=new b['Vector3'](),O=[[0x2,0x0,0x3],[0x1,0x3,0x0],[0x4,0x6,0x5],[0x7,0x5,0x6],[0x0,0x4,0x1],[0x5,0x1,0x4],[0x6,0x2,0x7],[0x3,0x7,0x2],[0x4,0x0,0x6],[0x2,0x6,0x0],[0x1,0x5,0x3],[0x7,0x3,0x5]];for(let S=0x0;S<0x6;S++){let T=new b['Vector2'](),U=new b['Vector2'](0.25,0.25),V=new b['Vector3']();if(S===0x0)V['set'](-0x1,0x0,0x0),T['set'](0.75,0x0);else{if(S===0x1)V['set'](0x1,0x0,0x0),T['set'](0.5,0x0);else{if(S===0x2)V['set'](0x0,-0x1,0x0),T['set'](0x0,0x0);else{if(S===0x3)V['set'](0x0,0x1,0x0),T['set'](0.25,0x0);else{if(S===0x4)V['set'](0x0,0x0,-0x1),T['set'](0.25,0.25);else S===0x5&&(V['set'](0x0,0x0,0x1),T['set'](0x0,0.25));}}}}let W=new b['Vector3']()['copy'](V);W['normalize']();let X=new b['Vector3'](0x1,0x0,0x0);(X['dot'](W)>0.99||X['dot'](W)<-0.99)&&(X=new b['Vector3'](0x0,0x1,0x0));let Y=new b['Vector3']()['crossVectors'](W,X);X=new b['Vector3']()['crossVectors'](Y,W),X['normalize'](),Y['normalize'](),W['normalize'](),X=X['applyMatrix4'](J),X['y']*=-0x1,Y=Y['applyMatrix4'](J),Y['y']*=-0x1,W=W['applyMatrix4'](J),W['y']*=-0x1;for(let Z=0x0;Z<0x9;Z++){let a0=c['ViewCubeItem'](),a1=Z%0x3,a2=Math['floor'](Z/0x3)%0x3,a3=new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](W),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](a1-0x1),new b['Vector3']()['copy'](Y)['multiplyScalar'](a2-0x1)));a0['id']=(S+0x1)*0x64+a1*0xa+a2,a0['row']=a1,a0['column']=a2,a0['direction']['copy'](a3)['normalize'](),a0['usePick']=!![];if(k['length']>=0x1a)break;let a4=![];for(let ac=0x0;ac<k['length'];ac++){if(k[ac]['id']<=0x0)continue;let ad=new b['Vector3']()['subVectors'](k[ac]['direction'],a0['direction']);if(ad['length']()>0.0001)continue;a4=!![];break;}if(a4)continue;let a5=new b['Vector3']()['addVectors'](K,new b['Vector3']()['copy'](a3)['multiplyScalar'](C*0.5)),a6=[new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](E),new b['Vector3']()['copy'](W)['multiplyScalar'](E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](E),new b['Vector3']()['copy'](W)['multiplyScalar'](-E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-E),new b['Vector3']()['copy'](W)['multiplyScalar'](E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-E),new b['Vector3']()['copy'](W)['multiplyScalar'](-E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](E),new b['Vector3']()['copy'](W)['multiplyScalar'](E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](E),new b['Vector3']()['copy'](W)['multiplyScalar'](-E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-E),new b['Vector3']()['copy'](W)['multiplyScalar'](E)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-E),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-E),new b['Vector3']()['copy'](W)['multiplyScalar'](-E))))],a7=[],a8=0x0;for(let ae=0x0;ae<0xc;ae++){for(let af=0x0;af<0x3;af++){a7[a8]=a6[O[ae][af]],a8++;}}let a9=[new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](F),new b['Vector3']()['copy'](W)['multiplyScalar'](F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](F),new b['Vector3']()['copy'](W)['multiplyScalar'](-F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-F),new b['Vector3']()['copy'](W)['multiplyScalar'](F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-F),new b['Vector3']()['copy'](W)['multiplyScalar'](-F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](F),new b['Vector3']()['copy'](W)['multiplyScalar'](F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](F),new b['Vector3']()['copy'](W)['multiplyScalar'](-F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-F),new b['Vector3']()['copy'](W)['multiplyScalar'](F)))),new b['Vector3']()['copy'](a5)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](X)['multiplyScalar'](-F),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](Y)['multiplyScalar'](-F),new b['Vector3']()['copy'](W)['multiplyScalar'](-F))))],aa=[],ab=0x0;for(let ag=0x0;ag<0xc;ag++){for(let ah=0x0;ah<0x3;ah++){aa[ab]=a9[O[ag][ah]],ab++;}}a0['vertices']=a7,a0['overVertices']=aa;for(let ai=0x0;ai<0x8;ai++){L?(L=![],M['copy'](a0['vertices'][ai]),N['copy'](a0['vertices'][ai])):(M['min'](a0['vertices'][ai]),N['max'](a0['vertices'][ai]));}k['push'](a0);}}for(let aj=0x0;aj<0x6;aj++){let ak=new b['Vector2'](),al=new b['Vector2'](0.25,0.25),am=new b['Vector3']();if(aj===0x0)am['set'](-0x1,0x0,0x0),ak['set'](0.5,0x0);else{if(aj===0x1)am['set'](0x1,0x0,0x0),ak['set'](0.75,0x0);else{if(aj===0x2)am['set'](0x0,-0x1,0x0),ak['set'](0x0,0x0);else{if(aj===0x3)am['set'](0x0,0x1,0x0),ak['set'](0.25,0x0);else{if(aj===0x4)am['set'](0x0,0x0,-0x1),ak['set'](0.25,0.25);else aj===0x5&&(am['set'](0x0,0x0,0x1),ak['set'](0x0,0.25));}}}}let an=new b['Vector3']()['copy'](am);an['normalize']();let ao=new b['Vector3'](0x1,0x0,0x0);(ao['dot'](an)>0.99||ao['dot'](an)<-0.99)&&(ao=new b['Vector3'](0x0,0x1,0x0));let ap=new b['Vector3']()['crossVectors'](an,ao);ao=new b['Vector3']()['crossVectors'](ap,an),ao['normalize'](),ap['normalize'](),an['normalize'](),ao=ao['applyMatrix4'](J),ao['y']*=-0x1,ap=ap['applyMatrix4'](J),ap['y']*=-0x1,an=an['applyMatrix4'](J),an['y']*=-0x1;if(!![]){let aq=c['ViewCubeItem']();aq['id']=aj+0x1,aq['row']=-0x1,aq['column']=-0x1,aq['usePick']=![],aq['direction']['copy'](an);let ar=new b['Vector3']()['addVectors'](K,new b['Vector3']()['copy'](an)['multiplyScalar'](C*0.5+G)),as=[];aj===0x0||aj===0x3?as=[new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D)))]:as=[new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D))),new b['Vector3']()['copy'](ar)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](ao)['multiplyScalar'](-D),new b['Vector3']()['copy'](ap)['multiplyScalar'](-D)))];let at=[new b['Vector2'](ak['x'],ak['y']),new b['Vector2'](ak['x']+al['x'],ak['y']),new b['Vector2'](ak['x']+al['x'],ak['y']+al['y']),new b['Vector2'](ak['x'],ak['y']),new b['Vector2'](ak['x']+al['x'],ak['y']+al['y']),new b['Vector2'](ak['x'],ak['y']+al['y'])];aq['vertices']=as,aq['uv']=at,k['push'](aq);}}if(0x0){let au=new b['Matrix4']()['copy'](J),av=new b['Matrix4']()['makeRotationX'](0x5/0xb4*3.141592);au['multiplyMatrices'](av,au);let aw=new b['Vector3'](0x0,0x0,0x1);aw['normalize']();let ax=new b['Vector3'](0x1,0x0,0x0);(ax['dot'](aw)>0.99||ax['dot'](aw)<-0.99)&&(ax=new b['Vector3'](0x0,0x1,0x0));let ay=new b['Vector3']()['crossVectors'](aw,ax);ax=new b['Vector3']()['crossVectors'](ay,aw),ax['normalize'](),ay['normalize'](),aw['normalize'](),ax=ax['applyMatrix4'](au),ax['y']*=-0x1,ay=ay['applyMatrix4'](au),ay['y']*=-0x1,aw=aw['applyMatrix4'](au),aw['y']*=-0x1;let az=new b['Vector3']()['addVectors'](K,new b['Vector3']()['copy'](aw)['multiplyScalar'](-C));}j['min']=M,j['max']=N,j['update'](),l=undefined;{let aA=new b['Vector3'](0x0,0x0,0x1);aA['normalize']();let aB=new b['Vector3'](0x1,0x0,0x0);(aB['dot'](aA)>0.99||aB['dot'](aA)<-0.99)&&(aB=new b['Vector3'](0x0,0x1,0x0));let aC=new b['Vector3']()['crossVectors'](aA,aB);aB=new b['Vector3']()['crossVectors'](aC,aA),aB['normalize'](),aC['normalize'](),aA['normalize'](),aB=aB['applyMatrix4'](J),aB['y']*=-0x1,aC=aC['applyMatrix4'](J),aC['y']*=-0x1,aA=aA['applyMatrix4'](J),aA['y']*=-0x1;let aD=c['ViewCubeItem'](),aE=new b['Vector3']()['copy'](K),aF=[new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](D),new b['Vector3']()['copy'](aA)['multiplyScalar'](D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](D),new b['Vector3']()['copy'](aA)['multiplyScalar'](-D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](-D),new b['Vector3']()['copy'](aA)['multiplyScalar'](D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](-D),new b['Vector3']()['copy'](aA)['multiplyScalar'](-D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](-D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](D),new b['Vector3']()['copy'](aA)['multiplyScalar'](D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](-D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](D),new b['Vector3']()['copy'](aA)['multiplyScalar'](-D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](-D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](-D),new b['Vector3']()['copy'](aA)['multiplyScalar'](D)))),new b['Vector3']()['copy'](aE)['add'](new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aB)['multiplyScalar'](-D),new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](aC)['multiplyScalar'](-D),new b['Vector3']()['copy'](aA)['multiplyScalar'](-D))))],aG=[[0x0,0x4,0x4,0x5,0x5,0x1,0x1,0x0],[0x2,0x6,0x6,0x7,0x7,0x3,0x3,0x2],[0x0,0x2],[0x4,0x6],[0x1,0x3],[0x5,0x7]],aH=[],aI=0x0;for(let aJ=0x0;aJ<aG['length'];aJ++){for(let aK=0x0;aK<aG[aJ]['length'];aK++){aH[aI]=aF[aG[aJ][aK]],aI++;}}aD['vertices']=aH,l=aD;}}function z(){if(g===f)return;if(k['length']<=0x0)return;if(u['length']>0x0)for(let F=u['length']-0x1;F>=0x0;F--){a['gl']['deleteBuffer'](u[F]['buffer']);if(u[F]['uv']!==undefined)a['gl']['deleteBuffer'](u[F]['uv']);}u=[];let B=0x0,C=0x0,D=[],E=[];for(let G=0x0;G<k['length'];G++){if(f===k[G]['id'])continue;if(k[G]['uv']['length']>0x0)continue;for(let H=0x0;H<k[G]['vertices']['length'];H++){D[B]=k[G]['vertices'][H]['x'],B++,D[B]=k[G]['vertices'][H]['y'],B++,D[B]=k[G]['vertices'][H]['z'],B++;}}if(B>0x0){let I=x(),J=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],J),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(D),a['gl']['STATIC_DRAW']),I['buffer']=J,I['start']=0x0,I['length']=B/0x3,I['color']=new b['Color']()['copy'](m),u['push'](I),B=0x0,D=[];}for(let K=0x0;K<k['length'];K++){if(f===k[K]['id']){for(let L=0x0;L<k[K]['vertices']['length'];L++){r>0x1?(D[B]=k[K]['overVertices'][L]['x'],B++,D[B]=k[K]['overVertices'][L]['y'],B++,D[B]=k[K]['overVertices'][L]['z'],B++):(D[B]=k[K]['vertices'][L]['x'],B++,D[B]=k[K]['vertices'][L]['y'],B++,D[B]=k[K]['vertices'][L]['z'],B++);}for(let M=0x0;M<k[K]['uv']['length'];M++){E[C]=k[K]['uv'][M]['x'],C++,E[C]=k[K]['uv'][M]['y'],C++;}break;}}if(B>0x0){let N=x(),O=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],O),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(D),a['gl']['STATIC_DRAW']),N['buffer']=O,N['start']=0x0,N['length']=B/0x3,N['color']=new b['Color']()['copy'](o);if(C>0x0){let P=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],P),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(E),a['gl']['STATIC_DRAW']),N['uvBuffer']=P;}u['push'](N),B=0x0,D=[],C=0x0,E=[];}for(let Q=k['length']-0x1;Q>=0x0;Q--){if(f===k[Q]['id'])continue;if(k[Q]['uv']['length']<=0x0)continue;for(let R=0x0;R<k[Q]['vertices']['length'];R++){D[B]=k[Q]['vertices'][R]['x'],B++,D[B]=k[Q]['vertices'][R]['y'],B++,D[B]=k[Q]['vertices'][R]['z'],B++;}for(let S=0x0;S<k[Q]['uv']['length'];S++){E[C]=k[Q]['uv'][S]['x'],C++,E[C]=k[Q]['uv'][S]['y'],C++;}}if(B>0x0){let T=x(),U=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],U),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(D),a['gl']['STATIC_DRAW']),T['buffer']=U,T['start']=0x0,T['length']=B/0x3,T['color']=new b['Color']()['copy'](n);if(C>0x0){let V=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],V),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(E),a['gl']['STATIC_DRAW']),T['uvBuffer']=V;}u['push'](T),B=0x0,D=[],C=0x0,E=[];}if(l!==undefined){if(v!==undefined)a['gl']['deleteBuffer'](v['buffer']);v=undefined;let W=x(),X=a['gl']['createBuffer'](),Y=[],Z=0x0;for(let a0=0x0;a0<l['vertices']['length'];a0++){Y[Z]=l['vertices'][a0]['x'],Z++,Y[Z]=l['vertices'][a0]['y'],Z++,Y[Z]=l['vertices'][a0]['z'],Z++;}a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],X),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(Y),a['gl']['STATIC_DRAW']),W['buffer']=X,W['start']=0x0,W['length']=Z/0x3,W['color']=new b['Color']()['copy'](p),v=W;}g=f;}this['Render']=function(){if(!c['Visible'])return;if(!q){q=!![];let D=a['Shader']['DefaultTexture']['ViewCubeBase64'],E=new Image();E['src']=D,E['onload']=function(){t=E,a['Renderer']['Render']();};}s===undefined&&t!==undefined&&(s=a['gl']['createTexture'](),a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],s),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR_MIPMAP_LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],t),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null));y(),z();let B=new b['Matrix4'](),C=new b['Matrix4']()['copy'](a['Camera']['screenProjectionMatrix']);a['gl']['enable'](a['gl']['DEPTH_TEST']),a['gl']['enable'](a['gl']['BLEND']),a['gl']['blendFunc'](a['gl']['SRC_ALPHA'],a['gl']['ONE_MINUS_SRC_ALPHA']);if(s!==undefined){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['TEXTURE2D']),a['Shader']['SetMatrix'](C,B),a['Shader']['SetCurrentTexture']('u_Texture',a['gl']['TEXTURE_2D'],s);for(let F=0x0;F<u['length'];F++){if(u[F]['uvBuffer']===undefined)continue;let G=u[F]['color'],H=G['glColor']();a['Shader']['SetGLColor'](H['r'],H['g'],H['b'],H['a']),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],u[F]['buffer']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],u[F]['uvBuffer']),a['gl']['vertexAttribPointer'](a['Shader']['uvAttributeLocation'],0x2,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['TRIANGLES'],u[F]['start'],u[F]['length']);}a['Shader']['EndShader']();}a['gl']['enable'](a['gl']['CULL_FACE']),a['gl']['cullFace'](a['gl']['FRONT']);{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](C,B);for(let I=0x0;I<u['length'];I++){if(u[I]['uvBuffer']!==undefined)continue;if(f===k[I]['id'])continue;let J=u[I]['color'];if(J['a']!==0xff)continue;let K=J['glColor']();a['Shader']['SetGLColor'](K['r'],K['g'],K['b'],K['a']),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],u[I]['buffer']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['TRIANGLES'],u[I]['start'],u[I]['length']);}a['Shader']['EndShader']();}{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](C,B);for(let L=0x0;L<u['length'];L++){if(u[L]['uvBuffer']!==undefined)continue;if(f===k[L]['id'])continue;let M=u[L]['color'];if(M['a']===0xff)continue;let N=M['glColor']();a['Shader']['SetGLColor'](N['r'],N['g'],N['b'],N['a']),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],u[L]['buffer']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['TRIANGLES'],u[L]['start'],u[L]['length']);}a['Shader']['EndShader']();}{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](C,B);for(let O=0x0;O<u['length'];O++){if(u[O]['uvBuffer']!==undefined)continue;if(f!==k[O]['id'])continue;let P=u[O]['color'],Q=P['glColor']();a['Shader']['SetGLColor'](Q['r'],Q['g'],Q['b'],Q['a']),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],u[O]['buffer']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['TRIANGLES'],u[O]['start'],u[O]['length']);}a['Shader']['EndShader']();}a['gl']['disable'](a['gl']['CULL_FACE']),a['gl']['cullFace'](a['gl']['FRONT_AND_BACK']),a['gl']['enable'](a['gl']['BLEND']),a['gl']['blendFunc'](a['gl']['SRC_ALPHA'],a['gl']['ONE_MINUS_SRC_ALPHA']);if(v!==undefined){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](C,B);let R=v['color'],S=R['glColor']();a['Shader']['SetGLColor'](S['r'],S['g'],S['b'],S['a']),a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],v['buffer']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['LINES'],v['start'],v['length']),a['Shader']['EndShader']();}a['gl']['disable'](a['gl']['DEPTH_TEST']),a['gl']['enable'](a['gl']['BLEND']);};function A(B,C,D,E,F){let G,H,I,J,K,L,M;G=C['x']-B['x'],H=C['y']-B['y'],I=E['x']-B['x'],J=E['y']-B['y'],K=G*J-I*H,G=D['x']-C['x'],H=D['y']-C['y'],I=E['x']-C['x'],J=E['y']-C['y'],L=G*J-I*H,G=B['x']-D['x'],H=B['y']-D['y'],I=E['x']-D['x'],J=E['y']-D['y'],M=G*J-I*H;if(K>=0x0&&L>=0x0&&M>=0x0||K<=0x0&&L<=0x0&&M<=0x0){let N=new b['Plane']()['setFromCoplanarPoints'](B,C,D);if(Math['abs'](N['normal']['z'])<0.00001)return![];return F['x']=E['x'],F['y']=E['y'],F['z']=(N['normal']['x']*E['x']+N['normal']['y']*E['y']+N['constant'])/N['normal']['z']*-0x1,!![];}return![];}this['Pick']=function(B,C,D){if(!c['Visible'])return![];let E=new b['Vector3'](B,C,0x0),F=j['isInBoundBox2D'](E,0x0);if(!F)return f=-0x1,![];let G=-0x1,H=0x0;for(let I=0x0;I<k['length'];I++){if(!k[I]['usePick'])continue;let J=new b['Vector3']();for(let K=0x0;K<k[I]['vertices']['length'];K+=0x3){if(A(k[I]['vertices'][K+0x0],k[I]['vertices'][K+0x1],k[I]['vertices'][K+0x2],E,J)){E['z']=J['z'];if(G<0x0)G=I,H=E['z'];else E['z']>H&&(G=I,H=E['z']);}}}if(G>=0x0)return f=k[G]['id'],D&&(f=-0x1),!![];return f=-0x1,![];},this['GetPickID']=function(){return f;},this['ClearPickID']=function(){f=-0x1,g=-0x2;},this['SetPosition']=function(B,C){if(C!==undefined)e=C;d=B;},this['SetOffset']=function(B){e=B;};}}export default ViewCube;