let UIObjectTransform=function(a,b){let c=this;this['base']=b['UIBase'],this['base'](a,b);let d=undefined,e=!![],f=!![],g=[],h=new b['Vector3']();i();function i(){}this['UIBegin']=function(){c['base']['prototype']['UIBegin']['call'](c);if($('.ui_message')['length']>0x0){let j='Select\x20Object\x20Transform.',k=j;$('.ui_message_text')['html'](k),$('.ui_message')['fadeIn'](0x1f4);}{let l=a['Data']['GetBBox'](),m=l['center'];d=a['Handle']['Add'](b['Enum']['HANDLER_TYPE']['MODEL']),d['center']=m,d['object']=undefined,d['axis']['x']['enable']=!![],d['axis']['y']['enable']=!![],d['axis']['z']['enable']=!![],d['panel']['xy']['enable']=!![],d['panel']['yz']['enable']=!![],d['panel']['zx']['enable']=!![],d['sphere']['enable']=![];}a['Data']['DeselectAll']();},this['UIEnd']=function(){$('.ui_message')['length']>0x0&&($('.ui_message_text')['html'](''),$('.ui_message')['hide']()),d!==undefined&&(a['Handle']['ClearStateById'](d['id']),a['Handle']['Delete'](d['id']),d=undefined),c['base']['prototype']['UIEnd']['call'](c),g=[];},this['mouseDown']=function(j,k,l){d!==undefined&&(d['enable']&&d['state']===b['Enum']['HANDLE_MOUSE_STATE']['OVER']&&(d['state']=b['Enum']['HANDLE_MOUSE_STATE']['DOWN'],c['actionEnabled']=![],h['set'](0x0,0x0,0x0)));if(a['useRenderLimit'])a['Renderer']['enableRenderLimit']=!![];let m=c['base']['prototype']['mouseDown']['call'](c,j,k,l);return m;},this['mouseMove']=function(j,k){let l=a['Handle']['Handler']();if(l['length']>0x0){const m=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),n=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],m);if(d!==undefined&&d['state']===b['Enum']['HANDLE_MOUSE_STATE']['DOWN']){c['actionEnabled']=![];if(j!==c['mouseLastPosition']['x']||k!==c['mouseLastPosition']['y']){let o=d;switch(o['itemType']){case b['Enum']['HANDLER_TYPE']['MODEL']:{let p=a['Handle']['UpdateTransformByMouseMove'](d,j,k,c['mouseLastPosition']['x'],c['mouseLastPosition']['y']);for(let q=0x0;q<g['length'];q++){g[q]['action']['transform']=new b['Matrix4']()['multiplyMatrices'](p,g[q]['action']['transform']),g[q]['object']['flag']['updateProcess']=!![];}a['Renderer']['MainFBClear'](),a['Renderer']['Render']();}break;}}}else{if(!c['mouseLeftDown']){if(d!==undefined&&d['state']===b['Enum']['HANDLE_MOUSE_STATE']['OVER'])a['Renderer']['Render']();a['Handle']['ClearState'](),a['Clipping']['PickPlane'](j,k);let r=a['Handle']['Pick'](j,k);r!==undefined&&d['id']===r['id']&&(d['state']=b['Enum']['HANDLE_MOUSE_STATE']['OVER'],a['Renderer']['Render']());}}}c['base']['prototype']['mouseMove']['call'](c,j,k),c['actionEnabled']=!![];},this['mouseUp']=function(j,k,l){if(d!==undefined){if(d['state']===b['Enum']['HANDLE_MOUSE_STATE']['DOWN'])c['actionEnabled']=![],a['Handle']['ClearStateById'](d['id']),a['Renderer']['Render']();else{if(a['useRenderLimit'])a['Renderer']['enableRenderLimit']=![];}}if(c['actionEnabled']&&l===b['Enum']['MOUSE_STATE']['PAN']){if(c['base']['prototype']['GetMouseClick']['call'](c,j,k)===!![]){let n=new b['Vector2']()['subVectors'](c['mouseDownPosition'],c['mouse']);n['length']()<0x5&&(c['actionEnabled']=![],a['Control']['RestoreMode'](),a['Renderer']['Render']());}}let m=c['base']['prototype']['mouseUp']['call'](c,j,k,l);if(c['actionEnabled']){g=[],d['object']=undefined;let o=!![],p=new b['BBox']();if(e){let q=a['Data']['GetSelection'](),r=a['Data']['GetBodies'](q);if(r['length']>0x0){let s=a['Data']['GetBBoxFormMatrix'](r);o?(p['min']['copy'](s['min']),p['max']['copy'](s['max']),o=![]):(p['min']['min'](s['min']),p['min']['min'](s['max']),p['max']['min'](s['min']),p['max']['max'](s['max']));}for(let t=0x0;t<r['length'];t++){g['push'](r[t]);}}if(f){let u=a['CustomObject']['GetSelection']();if(u['length']>0x0)for(let v=0x0;v<u['length'];v++){let w=a['CustomObject']['GetBodyFormObject'](u[v]),z=a['Data']['GetBBoxFormMatrix'](w);o?(p['min']['copy'](z['min']),p['max']['copy'](z['max']),o=![]):(p['min']['min'](z['min']),p['min']['min'](z['max']),p['max']['min'](z['min']),p['max']['max'](z['max']));for(let A=0x0;A<w['length'];A++){g['push'](w[A]);}}}d!==undefined&&(!o?(d['object']=null,p['update'](),d['center']=p['center']):d['object']=undefined);}return c['actionEnabled']=!![],m;},this['mouseDoubleClick']=function(j,k,l){c['base']['prototype']['mouseDoubleClick']['call'](c,j,k,l);},this['Render']=function(){if(d===undefined)return;const j=new b['Matrix4']()['copy'](a['Camera']['matMV']),k=new b['Matrix4']()['copy'](a['Camera']['matMVP']);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetGLLight'](),a['Shader']['SetClipping'](undefined),a['Shader']['SetMatrix'](k,j),a['Handle']['RenderItem'](d),a['Shader']['EndShader']();};};export default UIObjectTransform;