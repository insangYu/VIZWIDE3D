class Pick{constructor(a,b){let c=this;this['PreselectObjects']=[],this['PreselectEdges']=[];let d=[],e=new b['Color'](0x0,0x0,0x0,0xff),f=new b['Color'](0x0,0xc8,0x0,0xff),g=0xa,h=0x3;i();function i(){for(let l=0x0;l<0x4;l++){c['PreselectObjects'][l]=a['Data']['Object3D']();}};this['GetPickByBody']=function(l,m,n){let o;if(a['Camera']['perspectiveView'])o=new b['Vector3'](m,n,0x0);else o=new b['Vector3'](m,n,-0x1);let p=new b['Vector3'](o['x'],o['y'],o['z']),q=new b['Vector3'](o['x'],o['y'],0x1),r,s;r=a['Camera']['screen2WorldWithMatrix'](a['Camera']['matMVP'],p),s=a['Camera']['screen2WorldWithMatrix'](a['Camera']['matMVP'],q);let t=c['GetWorldPickByID'](l,r,s);return t;},this['GetBodyCacheDownload']=function(l,m){if(a['MeshBlock']['IsCacheBlockDownloading']())return;if(m===undefined)return;let n=a['Data']['GetBody'](l);if(n===undefined||n['length']===0x0)return;let o=n[0x0],p=function(r){a['MeshBlock']['IsCacheBlockDownloading']()===![]&&(m(l),a['Control']['Unlock']());};a['Control']['Lock']();let q=[];if(!o['object']['flag']['cache']||o['object']['attribs']['a_index']['buffer']===null){let r=function(s,t,u){for(let v=0x0;v<s['length'];v++){if(o['object']['uuid']!==s[v]['uuid'])continue;q['push'](t);break;}};a['Data']['ObjectMap']['forEach'](r);if(q['length']>0x1)console['log']('[Shw3DCore]\x20URL\x20cache\x20Num\x20:\x20'+q['length']);a['MeshBlock']['CacheBlock'](q,p);}else setTimeout(p,0x1);},this['GetPickByBodyCacheDownload']=function(l,m,n){if(a['MeshBlock']['IsCacheBlockDownloading']())return;if(n===undefined)return;const o=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),p=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],o);let q=![],r=undefined,s=undefined,t=undefined,u=function(A,B){t=B;},v=a['Renderer']['PickingCallback'](l,m,c,u,undefined);if(!v)return;let w=function(A){const B=c['GetPickByBody'](t['bodyId'],l,m);if(B['pick']){q=!![];let C=new b['Vector3']()['copy'](B['position']);const D=a['Camera']['world2ScreenWithMatrix'](p,C);if(s===undefined)s=B,r=D;else D['z']<r['z']&&(s=B,r=D);}if(a['MeshBlock']['IsCacheBlockDownloading']()===![]){if(q)n(s);a['Control']['Unlock']();}};a['Control']['Lock']();let z=[];if(!t['object']['flag']['cache']||t['object']['attribs']['a_index']['buffer']===null){let A=function(B,C,D){for(let E=0x0;E<B['length'];E++){if(t['object']['uuid']!==B[E]['uuid'])continue;z['push'](C);break;}};a['Data']['ObjectMap']['forEach'](A);if(z['length']===0x0){let B=function(){const C=a['Renderer']['PickPositionObject'](l,m);if(C!==undefined)n(s);a['Control']['Unlock']();};setTimeout(B,0x1);return;}if(z['length']>0x1)console['log']('[Shw3DCore]\x20URL\x20cache\x20Num\x20:\x20'+z['length']);a['MeshBlock']['CacheBlock'](z,w);}else setTimeout(w,0x1);},this['GetWorldPickByID']=function(l,m,n){let o=a['Data']['GetBody'](l);return c['GetWorldPick'](o,m,n);},this['GetWorldPick']=function(l,m,n){if(l===undefined)return[![],undefined,undefined];let o,p;o=new b['Vector3']()['copy'](m),p=new b['Vector3']()['copy'](n);let q=![],r,s=a['Data']['PickDataItem']();for(let t=0x0;t<l['length'];t++){let u=l[t],v=u['BBox']['min'],w=u['BBox']['max'],x=[new b['Vector3'](v['x'],v['y'],v['z']),new b['Vector3'](v['x'],v['y'],w['z']),new b['Vector3'](v['x'],w['y'],v['z']),new b['Vector3'](v['x'],w['y'],w['z']),new b['Vector3'](w['x'],v['y'],v['z']),new b['Vector3'](w['x'],v['y'],w['z']),new b['Vector3'](w['x'],w['y'],v['z']),new b['Vector3'](w['x'],w['y'],w['z'])],y=[[0x0,0x1,0x2],[0x1,0x2,0x3],[0x4,0x5,0x6],[0x5,0x6,0x7],[0x0,0x2,0x4],[0x2,0x4,0x6],[0x1,0x3,0x5],[0x3,0x5,0x7],[0x2,0x3,0x6],[0x3,0x6,0x7],[0x0,0x1,0x4],[0x1,0x4,0x5]],z=new b['Matrix4'](),A=![];if(u['action']['transform']['equals'](z)===![])A=!![];if(A)for(let B=0x0;B<0x8;++B){x[B]['applyMatrix4'](u['action']['transform']);}if(a['useFramebuffer']&&u['object']['attribs']['a_index']['array']['length']<=0x0){for(let C=0x0;C<0xc;++C){let D=a['Util']['LineToTriangleIntersections'](o,p,x[y[C][0x0]],x[y[C][0x1]],x[y[C][0x2]]);if(D[0x0]===0x1){let E=new b['Vector3']()['subVectors'](o,D[0x1])['length']();if(q===![])q=!![],r=E,s['pick']=!![],s['position']=D[0x1],s['normal']=new b['Plane']()['setFromCoplanarPoints'](x[y[C][0x0]],x[y[C][0x1]],x[y[C][0x2]])['normal'],s['body']=u;else E<r&&(r=E,s['pick']=!![],s['position']=D[0x1],s['normal']=new b['Plane']()['setFromCoplanarPoints'](x[y[C][0x0]],x[y[C][0x1]],x[y[C][0x2]])['normal'],s['body']=u);}}continue;}else{let F=![];for(let G=0x0;G<0xc;++G){let H=a['Util']['LineToTriangleIntersections'](o,p,x[y[G][0x0]],x[y[G][0x1]],x[y[G][0x2]]);if(H[0x0]===0x1){F=!![];break;}}if(!F)continue;}for(let I=u['m_triIdx'];I<u['m_triIdx']+u['m_nTris'];I+=0x3){let J,K,L;J=u['object']['attribs']['a_index']['array'][I],K=u['object']['attribs']['a_index']['array'][I+0x1],L=u['object']['attribs']['a_index']['array'][I+0x2];let M=new b['Vector3'](u['object']['attribs']['a_position']['array'][J*0x3+0x0],u['object']['attribs']['a_position']['array'][J*0x3+0x1],u['object']['attribs']['a_position']['array'][J*0x3+0x2]),N=new b['Vector3'](u['object']['attribs']['a_position']['array'][K*0x3+0x0],u['object']['attribs']['a_position']['array'][K*0x3+0x1],u['object']['attribs']['a_position']['array'][K*0x3+0x2]),O=new b['Vector3'](u['object']['attribs']['a_position']['array'][L*0x3+0x0],u['object']['attribs']['a_position']['array'][L*0x3+0x1],u['object']['attribs']['a_position']['array'][L*0x3+0x2]),P=new b['Vector3']()['copy'](M),Q=new b['Vector3']()['copy'](N),R=new b['Vector3']()['copy'](O);A&&(P['applyMatrix4'](u['action']['transform']),Q['applyMatrix4'](u['action']['transform']),R['applyMatrix4'](u['action']['transform']));let S=a['Util']['LineToTriangleIntersections'](o,p,P,Q,R);if(S[0x0]===0x1){if(!a['Clipping']['IsClippingPosition'](S[0x1])){let T=new b['Vector3']()['subVectors'](o,S[0x1])['length']();if(q===![])q=!![],r=T,s['pick']=!![],s['position']=S[0x1],s['normal']=new b['Plane']()['setFromCoplanarPoints'](P,Q,R)['normal'],s['surface']=!![],s['triangle']['vertex']['v1']=P,s['triangle']['vertex']['v2']=Q,s['triangle']['vertex']['v3']=R,s['triangle']['normal']['v1']['copy'](s['normal']),s['triangle']['normal']['v2']['copy'](s['normal']),s['triangle']['normal']['v3']['copy'](s['normal']),s['triangle']['index'][0x0]=J,s['triangle']['index'][0x1]=K,s['triangle']['index'][0x2]=L,s['body']=u;else T<r&&(r=T,s['pick']=!![],s['position']=S[0x1],s['normal']=new b['Plane']()['setFromCoplanarPoints'](P,Q,R)['normal'],s['surface']=!![],s['triangle']['vertex']['v1']=P,s['triangle']['vertex']['v2']=Q,s['triangle']['vertex']['v3']=R,s['triangle']['normal']['v1']['copy'](s['normal']),s['triangle']['normal']['v2']['copy'](s['normal']),s['triangle']['normal']['v3']['copy'](s['normal']),s['triangle']['index'][0x0]=J,s['triangle']['index'][0x1]=K,s['triangle']['index'][0x2]=L,s['body']=u);}}}}return s;},this['GetPreselectPick']=function(l,m,n){let o=a['Renderer']['PickingPreselectData'](l,m);if(o===undefined)return undefined;let p=c['PreselectEdges'][o['index']],q=a['Data']['PickDataItem']();q['pick']=!![],q['surface']=![],q['body']=undefined,q['preselectKind']=o['pickKind'],q['preselect']=p;if(o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE']){}else{if(o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_START'])q['position']['copy'](p['vData'][0x0]);else{if(o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_END'])q['position']['copy'](p['vData'][0x1]);else{if(o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_MID'])q['position']=new b['Vector3']()['addVectors'](p['vData'][0x0],p['vData'][0x1])['multiplyScalar'](0.5);else{if(o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['CIRCLE_CENTER'])q['position']['copy'](p['vData'][0x2]),q['normal']['copy'](p['vData'][0x3]);else o['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['CIRCLE']&&q['normal']['copy'](p['vData'][0x3]);}}}}return n!==undefined&&n(q),q;},this['GetPreselectDataPick']=function(l,m){let n=a['Renderer']['PickingPreselectData'](l,m);return n;},this['GetPreselectDataByID']=function(l){for(let m=0x0;m<d['length'];m++){if(d[m]['id']!==l)continue;return d[m];}return undefined;},this['GetMakePreselectID']=function(){for(let l=0x0;l<c['PreselectObjects']['length'];l++){return c['PreselectObjects'][l]['index'];}return-0x1;},this['MakeMeasurePreselectInfoByBodyCache']=function(l){c['GetBodyCacheDownload'](l,c['MakeMeasurePreselectInfoByID']);},this['MakeMeasurePreselectInfoByID']=function(l){let m=a['Tree']['GetBodies']([l]);c['MakeMeasurePreselectInfo'](m);},this['MakeMeasurePreselectInfo']=function(n){let o=a['Data']['GetTriangles'](n);c['ReleaseMeasurePreselectInfo']();for(let H=0x0;H<c['PreselectObjects']['length'];H++){c['PreselectObjects'][H]['index']=n[0x0]['bodyId'];}{let I=c['PreselectObjects'][0x0],J=0x0,K=0x0;for(let L=0x0;L<o['length'];L++){let M=J;I['attribs']['a_position']['array'][M]=o[L]['vertex']['v1']['x'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v1']['y'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v1']['z'],M++,I['attribs']['a_index']['array'][K]=K,K++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v2']['x'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v2']['y'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v2']['z'],M++,I['attribs']['a_index']['array'][K]=K,K++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v3']['x'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v3']['y'],M++,I['attribs']['a_position']['array'][M]=o[L]['vertex']['v3']['z'],M++,I['attribs']['a_index']['array'][K]=K,K++,J=M;}K>0x0&&(I['attribs']['a_position']['array']=new Float32Array(I['attribs']['a_position']['array'],0x0,I['attribs']['a_position']['array']['length']),I['attribs']['a_index']['array']=new Uint32Array(I['attribs']['a_index']['array'],0x0,I['attribs']['a_index']['array']['length']));}{for(let N=o['length']-0x1;N=0x0;N--){let O=o[N];(O['v1']['equals'](O['v2'])||O['v2']['equals'](O['v3'])||O['v3']['equals'](O['v1']))&&o['splice'](N,0x1);}}let p=o['length'],q=function(P){let Q={'triangle':P,'closedTriangleIndex':[],'fValue':0x0};for(let R=0x0;R<0x3;R++){Q['closedTriangleIndex'][R]=[-0x1,-0x1];}return Q;},r=0x1,s=0.00001,t=[];if(o['length']>0x0){for(let P=o['length']-0x1;P=0x0;P--){let Q=o[P];Q['fValue']=Q['v1']['x']+Q['v1']['y']+Q['v1']['z']+Q['v2']['x']+Q['v2']['y']+Q['v2']['z']+Q['v3']['x']+Q['v3']['y']+Q['v3']['z'];}o['sort'](function(R,S){if(R['fValue']>S['fValue'])return 0x1;if(R['fValue']<S['fValue'])return-0x1;return 0x0;});for(let R=0x0;R<p;R++){t[R]=q(o[R]);}for(let S=0x0;S<p;S++){let T=t[S];for(let U=0x0;U<0x3;U++){if(T['closedTriangleIndex'][U][0x0]>=0x0)continue;let V=new b['Vector3']()['copy'](T['triangle']['normal']),W=[T['triangle']['v1'],T['triangle']['v2'],T['triangle']['v3']],X=![];for(let Y=S+0x1;Y<p;Y++){let Z=t[Y],a0=new b['Vector3']()['copy'](Z['triangle']['normal']),a1=[Z['triangle']['v1'],Z['triangle']['v2'],Z['triangle']['v3']];for(let a2=0x0;a2<0x3;a2++){if(Z['closedTriangleIndex'][a2][0x0]>=0x0)continue;if(o[S]['index'][U]===o[Y]['index'][a2]&&o[S]['index'][(U+0x1)%0x3]===o[Y]['index'][(a2+0x1)%0x3]||o[S]['index'][U]===o[Y]['index'][(a2+0x1)%0x3]&&o[S]['index'][(U+0x1)%0x3]===o[Y]['index'][a2]){X=!![],t[S]['closedTriangleIndex'][U][0x0]=Y,t[S]['closedTriangleIndex'][U][0x1]=a2,t[Y]['closedTriangleIndex'][a2][0x0]=S,t[Y]['closedTriangleIndex'][a2][0x1]=U;break;}}if(X)break;}}}}let u=0x0,v=0x0;for(let a3=0x0;a3<p;a3++){let a4=t[a3];for(let a5=0x0;a5<0x3;a5++){u++;if(a4['closedTriangleIndex'][a5][0x0]<0x0)v++;}}if(v===0x0)return;let w=function(){let a6={'vPos':[],'vNormal':[],'blockIndex':0x0,'index':[],'linkedEdgeIndex':[],'bProcessed':![],'fLength':0x0,'fCosAngle':0x0};for(let a7=0x0;a7<0x2;a7++){a6['vPos'][a7]=new b['Vector3'](),a6['vNormal'][a7]=new b['Vector3'](),a6['index'][a7]=-0x1,a6['linkedEdgeIndex'][a7]=[];for(let a8=0x0;a8<0x2;a8++){a6['linkedEdgeIndex'][a7][a8]=-0x1;}}return a6;},x=![],y=![],z=![],A=![],B=[],C=0x0;for(let a6=0x0;a6<p;a6++){let a7=t[a6];for(let a8=0x0;a8<0x3;a8++){if(a7['closedTriangleIndex'][a8][0x0]<0x0){let a9=w();a9['vPos'][0x0]=a['Util']['GetTrianglePos'](a7['triangle'],a8),a9['vPos'][0x1]=a['Util']['GetTrianglePos'](a7['triangle'],(a8+0x1)%0x3),a9['vNormal'][0x0]=a['Util']['GetTriangleNormal'](a7['triangle'],a8),a9['vNormal'][0x1]=a['Util']['GetTriangleNormal'](a7['triangle'],(a8+0x1)%0x3),a9['index'][0x0]=a7['triangle']['index'][a8],a9['index'][0x1]=a7['triangle']['index'][(a8+0x1)%0x3];for(let aa=0x0;aa<0x2;aa++)for(let ab=0x0;ab<0x2;ab++)a9['linkedEdgeIndex'][aa][ab]=-0x1;a9['bProcessed']=![],a9['fLength']=new b['Vector3']()['subVectors'](a9['vPos'][0x0],a9['vPos'][0x1])['length'](),B[C]=a9,C++;}}}let D=0x0;for(let ac=0x0;ac<v;ac++){for(let ad=0x0;ad<0x2;ad++){if(B[ac]['linkedEdgeIndex'][ad][0x0]>=0x0)continue;let ae=![];for(let af=ac+0x1;af<v;af++){if(B[ac]['blockIndex']!==B[af]['blockIndex'])continue;for(let ag=0x0;ag<0x2;ag++){if(B[af]['linkedEdgeIndex'][ag][0x0]>=0x0)continue;if(B[ac]['index'][ad]===B[af]['index'][ag]){ae=!![],B[ac]['linkedEdgeIndex'][ad][0x0]=af,B[ac]['linkedEdgeIndex'][ad][0x1]=ag,B[af]['linkedEdgeIndex'][ag][0x0]=ac,B[af]['linkedEdgeIndex'][ag][0x1]=ad,D++;break;}}if(ae)break;}}}let E=0x1388,F=0x0,G=0x0;for(let ah=0x0;ah<v;ah++){if(B[ah]['bProcessed'])continue;if(B[ah]['linkedEdgeIndex'][0x0][0x0]<0x0&&B[ah]['linkedEdgeIndex'][0x1][0x0]<0x0||A||x){c['AddPreselectEdgeByLine'](r,B[ah]['vPos'][0x0],B[ah]['vPos'][0x1],0x0),r++,B[ah]['bProcessed']=!![],F++;continue;}let ai=ah,aj=B[ah]['linkedEdgeIndex'][0x0][0x0],ak=B[ah]['linkedEdgeIndex'][0x0][0x1];aj<0x0&&(aj=B[ah]['linkedEdgeIndex'][0x1][0x0],ak=B[ah]['linkedEdgeIndex'][0x1][0x1]);let al=0x0;for(let at=0x0;at<v;at++){let au=B[aj]['linkedEdgeIndex'][0x1-ak][0x0],av=B[aj]['linkedEdgeIndex'][0x1-ak][0x1];if(au<0x0||au===ai)break;aj=au,ak=av,al++;}al=0x1,ak=B[aj]['linkedEdgeIndex'][0x0][0x1];if(B[aj]['linkedEdgeIndex'][0x0][0x0]<0x0)ak=B[aj]['linkedEdgeIndex'][0x1][0x1];let am,an;am=aj,an=ak;let ao,ap,aq,ar,as;ao=new b['Vector3']()['subVectors'](B[am]['vPos'][an],B[am]['vPos'][0x1-an]),aq=B[am]['fLength'],as=B[am];for(let aw=0x0;aw<v;aw++){let ax=B[am]['linkedEdgeIndex'][an][0x0],ay=0x1-B[am]['linkedEdgeIndex'][an][0x1];am=ax,an=ay;if(am<0x0||am===aj)break;ap=new b['Vector3']()['subVectors'](B[am]['vPos'][an],B[am]['vPos'][0x1-an]),ar=B[am]['fLength'],ar>1e-7&&aq>1e-7&&(as['fCosAngle']=ap['dot'](ao)/ar/aq),ao=ap,aq=ar,as=B[am],al++;}am=aj,an=ak;for(let az=0x0;az<al;az++){if(az>al-0x4||y){for(let aB=az;aB<al;aB++){if(an>0x0){c['AddPreselectEdgeByLine'](r,B[am]['vPos'][an-0x1],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(am<0x0||am===aj)break;}}break;}let aA=0x1;{let aC,aD,aE=am,aF=an;for(let aG=az;aG<al-0x1;aG++){if(aG===az){aC=B[aE]['fCosAngle'],aD=B[aE]['fLength'];if(aC<0.7071||aC>0.9999)break;aA++;}else{if(Math['abs'](aC-B[aE]['fCosAngle'])>0.005)break;if(Math['abs'](aD-B[aE]['fLength'])>Math['max'](aD*0.01,B[aE]['fLength']*0.01))break;aA++;}aE=B[aE]['linkedEdgeIndex'][aF][0x0],aF=0x1-B[aE]['linkedEdgeIndex'][aF][0x1];if(aE<0x0||aE===aj)break;}}{let aH=B[am]['linkedEdgeIndex'][an][0x0],aI=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(B[am]['vPos'][0x1-an]!=B[am]['vPos'][an]&&B[am]['vPos'][an]!=B[aH]['vPos'][aI]&&B[am]['vPos'][0x1-an]!=B[aH]['vPos'][aI]){let aJ=a['Util']['GetCircleCenterPTFrom3Pt'](B[am]['vPos'][0x1-an],B[am]['vPos'][an],B[aH]['vPos'][aI]),aK=new b['Vector3']()['subVectors'](aJ,B[am]['vPos'][an])['length']();if(aK>E)aA=0x0;}else aA=0x0;}if(aA>=0x4){let aL=B[am]['linkedEdgeIndex'][an][0x0],aM=0x1-B[am]['linkedEdgeIndex'][an][0x1],aN=a['Util']['GetCircleCenterPTFrom3Pt'](B[am]['vPos'][0x1-an],B[am]['vPos'][an],B[aL]['vPos'][aM]),aO=new b['Vector3']()['subVectors'](aN,B[am]['vPos'][an])['length']();aO=new b['Vector3']()['subVectors'](aN,B[am]['vPos'][0x1-an])['length'](),aO=new b['Vector3']()['subVectors'](aN,B[aL]['vPos'][aM])['length']();let aP=new b['Vector3']()['subVectors'](B[am]['vPos'][0x1-an],B[am]['vPos'][an]);aP=new b['Vector3']()['crossVectors'](aP,new b['Vector3']()['subVectors'](B[aL]['vPos'][aM],B[am]['vPos'][an])),aP['normalize']();if(z){{c['AddPreselectEdgeByLine'](r,B[am]['vPos'][0x1-an],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];}c['AddPreselectEdgeByLine'](r,aN,aN,0x0),r++;}else{G++;for(let aQ=0x0;aQ<aA;aQ++){c['AddPreselectEdgeByCircle'](r,B[am]['vPos'][0x1-an],B[am]['vPos'][an],aN,aP,aO),B[am]['bProcessed']=!![],am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(am<0x0||am===aj)break;}r++;}}else an>0x0&&(c['AddPreselectEdgeByLine'](r,B[am]['vPos'][0x1-an],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1]);if(am<0x0||am==aj)break;}ao=new b['Vector3']()['subVectors'](B[am]['vPos'][an],B[am]['vPos'][0x1-an]),aq=B[am]['fLength'],as=B[am];for(let aR=0x0;aR<v;aR++){let aS=B[am]['linkedEdgeIndex'][an][0x0],aT=0x1-B[am]['linkedEdgeIndex'][an][0x1];am=aS,an=aT;if(am<0x0||am===aj)break;ap=new b['Vector3']()['subVectors'](B[am]['vPos'][an],B[am]['vPos'][0x1-an]),ar=B[am]['fLength'],ar>1e-7&&aq>1e-7&&(as['fCosAngle']=ap['dot'](ao)/ar/aq),ao=ap,aq=ar,as=B[am],al++;}am=aj,an=ak;for(let aU=0x0;aU<al;aU++){if(aU>al-0x4||y){for(let aW=aU;aW<al;aW++){if(an>0x0){c['AddPreselectEdgeByLine'](r,B[am]['vPos'][an-0x1],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(am<0x0||am===aj)break;}}break;}let aV=0x1;{let aX,aY,aZ=am,b0=an;for(let b1=aU;b1<al-0x1;b1++){if(b1==aU){aX=B[aZ]['fCosAngle'],aY=B[aZ]['fLength'];if(aX<0.7071||aX>0.9999)break;aV++;}else{if(Math['abs'](aX-B[aZ]['fCosAngle'])>0.005)break;if(Math['abs'](aY-B[aZ]['fLength'])>Math['max'](aY*0.01,B[aZ]['fLength']*0.01))break;aV++;}aZ=B[aZ]['linkedEdgeIndex'][b0][0x0],b0=0x1-B[aZ]['linkedEdgeIndex'][b0][0x1];if(aZ<0x0||aZ===aj)break;}}{let b2=B[am]['linkedEdgeIndex'][an][0x0],b3=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(!B[am]['vPos'][0x1-an]['equals'](B[am]['vPos'][an])&&!B[am]['vPos'][an]['equals'](B[b2]['vPos'][b3])&&!B[am]['vPos'][0x1-an]['equals'](B[b2]['vPos'][b3])){let b4=a['Util']['GetCircleCenterPTFrom3Pt'](B[am]['vPos'][0x1-an],B[am]['vPos'][an],B[b2]['vPos'][b3]),b5=new b['Vector3']()['subVectors'](b4,B[am]['vPos'][an])['length']();if(b5>E)aV=0x0;}else aV=0x0;}if(aV>=0x4){let b6=B[am]['linkedEdgeIndex'][an][0x0],b7=0x1-B[am]['linkedEdgeIndex'][an][0x1],b8=a['Util']['GetCircleCenterPTFrom3Pt'](B[am]['vPos'][0x1-an],B[am]['vPos'][an],B[b6]['vPos'][b7]),b9=new b['Vector3']()['subVectors'](b8,B[am]['vPos'][an])['length']();b9=new b['Vector3']()['subVectors'](b8,B[am]['vPos'][0x1-an])['length'](),b9=new b['Vector3']()['subVectors'](b8,B[b6]['vPos'][b7])['length']();let ba=new b['Vector3']()['subVectors'](B[am]['vPos'][0x1-an],B[am]['vPos'][an]);ba=new b['Vector3']()['crossVectors'](ba,new b['Vector3']()['subVectors'](B[b6]['vPos'][b7],B[am]['vPos'][an])),ba['normalize']();if(z){{c['AddPreselectEdgeByLine'](r,B[am]['vPos'][an-0x1],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];}c['AddPreselectEdgeByLine'](r,b8,b8,0x0),r++;}else{G++;for(let bb=0x0;bb<aV;bb++){c['AddPreselectEdgeByCircle'](r,B[am]['vPos'][0x1-an],B[am]['vPos'][an],b8,ba,b9),B[am]['bProcessed']=!![],am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1];if(am<0x0||am===aj)break;}r++;}}else an>0x0&&(c['AddPreselectEdgeByLine'](r,B[am]['vPos'][0x1-an],B[am]['vPos'][an],0x0),r++,B[am]['bProcessed']=!![],F++,am=B[am]['linkedEdgeIndex'][an][0x0],an=0x1-B[am]['linkedEdgeIndex'][an][0x1]);if(am<0x0||am===aj)break;}}if(c['PreselectEdges']['length']>0x0)for(let bc=0x0;bc<c['PreselectObjects']['length'];bc++){c['PreselectObjects'][bc]['flag']['updateProcess']=!![];}},this['ReleaseMeasurePreselectInfo']=function(){for(let l=0x0;l<c['PreselectObjects']['length'];l++){a['RenderWGL']['ReleaseDataByObject'](c['PreselectObjects'][l]),c['PreselectObjects'][l]['index']=-0x1;}c['PreselectEdges']=[],d=[];},this['AddPreselectEdgeByLine']=function(l,m,n,o){let p=a['Data']['PreselectEdgeItem']();p['id']=l,p['kind']=b['Enum']['PRESELECT_EDGE_KIND']['EDGE'],p['vData'][0x0]=m,p['vData'][0x1]=n,p['fValue']=o,c['PreselectEdges']['push'](p);},this['AddPreselectEdgeByCircle']=function(l,m,n,o,p,q){let r=a['Data']['PreselectEdgeItem']();r['id']=l,r['kind']=b['Enum']['PRESELECT_EDGE_KIND']['CIRCLE'],r['vData'][0x0]=m,r['vData'][0x1]=n,r['vData'][0x2]=o,r['vData'][0x3]=p,r['fValue']=q;{let s=new b['Vector3'](0x0,0x0,0x1),t;if(s['dot'](p)>0.9)s['set'](0x1,0x0,0x0);s=new b['Vector3']()['crossVectors'](s,p),s['normalize'](),t=new b['Vector3']()['copy'](s),t=new b['Vector3']()['crossVectors'](t,p),t['normalize'](),r['vData'][0x4]=s,r['vData'][0x5]=t;}c['PreselectEdges']['push'](r);};function j(l){if(c['PreselectObjects']['length']<=0x0)return;let m=![];for(let F=0x0;F<c['PreselectObjects']['length'];F++){let G=c['PreselectObjects'][F];if(!G['flag']['updateProcess'])break;m=!![];break;}if(!m)return;let o=![],p=![],q=![],r=![],s=![],t=![],u=![],w=![],x=![],y=![],z=![],A=![],B=![],C=![];l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['POINT'])&&(s=!![],x=!![],y=!![]);l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])&&(z=!![]);l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['AXIS_CENTER'])&&(C=!![]);l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['SURFACE'])&&(w=!![]);l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['LINE'])&&(t=!![]);l['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['CIRCLE'])&&(u=!![]);d=[];let D=new b['Color'](0x0,0x0,0x0,0x1),E=c['PreselectEdges']['length'];{let H=c['PreselectObjects'][0x0];H['flag']['updateProcess']&&(a['RenderWGL']['RemoveGLBuffer'](H,!![]),a['RenderWGL']['DeletePipeline'](H['uuid']),a['RenderWGL']['SetDataByObject'](H),a['RenderWGL']['InitRenderPipelineSample'](H));}for(let I=0x1;I<c['PreselectObjects']['length'];I++){let J=c['PreselectObjects'][I];if(!J['flag']['updateProcess'])continue;a['RenderWGL']['ReleaseDataByObject'](J),a['RenderWGL']['DeletePipeline'](J['uuid']);let K=0x0,L=0x0,M=0x0;for(let N=0x0;N<E;N++){let O=c['PreselectEdges'][N];if(O['kind']===b['Enum']['PRESELECT_EDGE_KIND']['EDGE']){if(s&&I===0x1){D['new'](),J['attribs']['a_position']['array'][K]=O['vData'][0x0]['x'],J['attribs']['a_position']['array'][K+0x1]=O['vData'][0x0]['y'],J['attribs']['a_position']['array'][K+0x2]=O['vData'][0x0]['z'],K+=0x3,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],L+=0x4,J['attribs']['a_index']['array'][M]=M,M+=0x1,k(D,N,b['Enum']['PRESELECT_PICK_KIND']['EDGE_START']),D['new']();let P=new b['Vector3']()['addVectors'](O['vData'][0x0],O['vData'][0x1])['multiplyScalar'](0.5);J['attribs']['a_position']['array'][K]=P['x'],J['attribs']['a_position']['array'][K+0x1]=P['y'],J['attribs']['a_position']['array'][K+0x2]=P['z'],K+=0x3,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],L+=0x4,J['attribs']['a_index']['array'][M]=M,M+=0x1,k(D,N,b['Enum']['PRESELECT_PICK_KIND']['EDGE_MID']),D['new'](),J['attribs']['a_position']['array'][K]=O['vData'][0x1]['x'],J['attribs']['a_position']['array'][K+0x1]=O['vData'][0x1]['y'],J['attribs']['a_position']['array'][K+0x2]=O['vData'][0x1]['z'],K+=0x3,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],L+=0x4,J['attribs']['a_index']['array'][M]=M,M+=0x1,k(D,N,b['Enum']['PRESELECT_PICK_KIND']['EDGE_END']);}else t&&I===0x2&&(D['new'](),J['attribs']['a_position']['array'][K]=O['vData'][0x0]['x'],J['attribs']['a_position']['array'][K+0x1]=O['vData'][0x0]['y'],J['attribs']['a_position']['array'][K+0x2]=O['vData'][0x0]['z'],J['attribs']['a_position']['array'][K+0x3]=O['vData'][0x1]['x'],J['attribs']['a_position']['array'][K+0x4]=O['vData'][0x1]['y'],J['attribs']['a_position']['array'][K+0x5]=O['vData'][0x1]['z'],K+=0x6,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],J['attribs']['a_color']['array'][L+0x4]=D['r'],J['attribs']['a_color']['array'][L+0x5]=D['g'],J['attribs']['a_color']['array'][L+0x6]=D['b'],J['attribs']['a_color']['array'][L+0x7]=D['a'],L+=0x8,J['attribs']['a_index']['array'][M]=M,J['attribs']['a_index']['array'][M+0x1]=M+0x1,M+=0x2,k(D,N,b['Enum']['PRESELECT_PICK_KIND']['EDGE']));}else{if(O['kind']===b['Enum']['PRESELECT_EDGE_KIND']['CIRCLE']){z&&I===0x1&&(D['new'](),J['attribs']['a_position']['array'][K]=O['vData'][0x2]['x'],J['attribs']['a_position']['array'][K+0x1]=O['vData'][0x2]['y'],J['attribs']['a_position']['array'][K+0x2]=O['vData'][0x2]['z'],K+=0x3,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],L+=0x4,J['attribs']['a_index']['array'][M]=M,M+=0x1,k(D,N,b['Enum']['PRESELECT_PICK_KIND']['CIRCLE_CENTER']));if(u&&I===0x3){D['new']();let Q=a['MeshProcess']['Get2D3DCircleVertices'](O['vData'][0x2],O['vData'][0x4],O['vData'][0x5],O['fValue'],0x0,0x168);for(let R=0x1;R<Q['vertices']['length'];R++){for(let S=0x1;S>=0x0;S--){J['attribs']['a_position']['array'][K]=Q['vertices'][R-S]['x'],J['attribs']['a_position']['array'][K+0x1]=Q['vertices'][R-S]['y'],J['attribs']['a_position']['array'][K+0x2]=Q['vertices'][R-S]['z'],K+=0x3,J['attribs']['a_color']['array'][L]=D['r'],J['attribs']['a_color']['array'][L+0x1]=D['g'],J['attribs']['a_color']['array'][L+0x2]=D['b'],J['attribs']['a_color']['array'][L+0x3]=D['a'],L+=0x4,J['attribs']['a_index']['array'][M]=M,M+=0x1;}}k(D,N,b['Enum']['PRESELECT_PICK_KIND']['CIRCLE']);}}}}if(M>0x0){{J['attribs']['a_position']['array']=new Float32Array(J['attribs']['a_position']['array'],0x0,J['attribs']['a_position']['array']['length']),J['attribs']['a_color']['array']=new Uint8Array(J['attribs']['a_color']['array'],0x0,J['attribs']['a_color']['array']['length']),J['attribs']['a_index']['array']=new Uint32Array(J['attribs']['a_index']['array'],0x0,J['attribs']['a_index']['array']['length']);}a['RenderWGL']['SetDataByObject'](J),a['RenderWGL']['InitRenderPipelineSample'](J);}}}function k(l,m,n){let o=a['Data']['PreselectEdgeColorTableItem']();o['id']=l['r']+(l['g']<<0x8)+(l['b']<<0x10)+l['a']*0x1000000,o['index']=m,o['pickKind']=n,d['push'](o);};this['RefreshPreselectEdgeProcess']=function(){for(let l=0x0;l<c['PreselectObjects']['length'];l++){let m=c['PreselectObjects'][l];m['flag']['updateProcess']=!![];}},this['RenderPreselectEdgeColor']=function(){let l=a['Control']['GetMode']();if(l!==b['Enum']['CONTROL_STATE']['MARKUP'])return;let m=a['Control']['GetUIMode'](),n=m['GetUIControl']();if(n===undefined)return;if(!n['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['PRESELECT']))return;if(c['PreselectObjects']['length']<=0x0)return;if(c['GetMakePreselectID']()<0x0)return;j(n);let o=new b['Matrix4'](),p=a['Tree']['GetBodies']([c['PreselectObjects'][0x0]['index']]);p!==undefined&&p['length']>0x0&&(p[0x0]['action']['transform']!==undefined&&o['copy'](p[0x0]['action']['transform']));for(let q=0x0;q<c['PreselectObjects']['length'];q++){let r=a['RenderWGL']['GetPipeline'](c['PreselectObjects'][q]['uuid']);if(r===undefined)continue;if(r['listProcess']['length']<=0x0)continue;for(let s=0x0;s<r['listProcess']['length'];s++){r['listProcess'][s]['action']['transform']['copy'](o);}}{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']);let t=new b['Color']();t['set'](0x0,0x0,0x0,0x0),a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](c['PreselectObjects'][0x0],t),a['Shader']['EndShader']();}{let u=g,v=h,w=h;a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']),a['Shader']['SetPointSize'](u),a['RenderWGL']['SetGLDrawMode'](a['gl']['POINTS']),a['RenderWGL']['UpdateRenderProcessByColorID_v2'](c['PreselectObjects'][0x1]),a['Shader']['EndShader'](),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']),a['Shader']['SetPointSize'](u),a['RenderWGL']['SetGLDrawMode'](a['gl']['LINES']),a['RenderWGL']['UpdateRenderProcessByColorID_v2'](c['PreselectObjects'][0x2]),a['RenderWGL']['SetGLDrawMode'](a['gl']['LINES']),a['RenderWGL']['UpdateRenderProcessByColorID_v2'](c['PreselectObjects'][0x3]),a['RenderWGL']['SetGLDrawMode'](a['gl']['TRIANGLES']),a['Shader']['EndShader']();}},this['RenderPreselectEdge']=function(){let l=a['Control']['GetMode']();if(l!==b['Enum']['CONTROL_STATE']['MARKUP'])return;let m=a['Control']['GetUIMode'](),n=m['GetUIControl']();if(n===undefined)return;if(!n['GetProcessFlag'](b['Enum']['MARKUP_FLAG']['PRESELECT']))return;if(c['PreselectObjects']['length']<=0x0)return;if(c['GetMakePreselectID']()<0x0)return;j(n);let o=new b['Matrix4'](),p=a['Tree']['GetBodies']([c['PreselectObjects'][0x0]['index']]);p!==undefined&&p['length']>0x0&&(p[0x0]['action']['transform']!==undefined&&o['copy'](p[0x0]['action']['transform']));for(let q=0x0;q<c['PreselectObjects']['length'];q++){let r=a['RenderWGL']['GetPipeline'](c['PreselectObjects'][q]['uuid']);if(r===undefined)continue;if(r['listProcess']['length']<=0x0)continue;for(let s=0x0;s<r['listProcess']['length'];s++){r['listProcess'][s]['action']['transform']['copy'](o);}}{let t=e,u=e,v=e;a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetPointSize'](g),a['RenderWGL']['SetGLDrawMode'](a['gl']['POINTS']),a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](c['PreselectObjects'][0x1],t),a['Shader']['EndShader'](),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetLineThickness'](h),a['RenderWGL']['SetGLDrawMode'](a['gl']['LINES']),a['Shader']['SetLineThickness'](h),a['Shader']['SetResolutionData'](),a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](c['PreselectObjects'][0x2],u),a['RenderWGL']['SetGLDrawMode'](a['gl']['LINES']),a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](c['PreselectObjects'][0x3],v),a['RenderWGL']['SetGLDrawMode'](a['gl']['TRIANGLES']),a['Shader']['EndShader']();if(![]){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASICLINES2D']),a['Shader']['SetLineThickness'](0xa),a['Shader']['SetResolutionData'](),a['Shader']['SetGLCameraData']();let w=new b['Matrix4']()['copy'](a['Camera']['matMVP']),x=new b['Matrix4']()['copy'](a['Camera']['matMV']);a['Shader']['SetMatrix'](w,x);let y=new b['Color'](0x0,0x0,0x0,0xff),z=y['glColor']();a['Shader']['SetGLColor'](z['r'],z['g'],z['b'],z['a']);let A=[],B=[],C=[],D=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],D);let E=0x0,F=a['MeshProcess']['GetLine'](new b['Vector3'](-0x64,-0x96,0x28),new b['Vector3'](0x64,-0x96,0x28));for(let I=0x0;I<F['vertices']['length'];I++){A[I*0x3+0x0]=F['vertices'][I]['x'],A[I*0x3+0x1]=F['vertices'][I]['y'],A[I*0x3+0x2]=F['vertices'][I]['z'],C[I*0x3+0x0]=F['normals'][I]['x'],C[I*0x3+0x1]=F['normals'][I]['y'],C[I*0x3+0x2]=F['normals'][I]['z'],I<F['vertices']['length']-0x1&&(B[I*0x3+0x0]=F['vertices'][I]['x'],B[I*0x3+0x1]=F['vertices'][I]['y'],B[I*0x3+0x2]=F['vertices'][I]['z']);}E+=A['length'],F=a['MeshProcess']['GetLine'](new b['Vector3'](0x64,-0x96,0x28),new b['Vector3'](0x64,-0x32,0x28));for(let J=0x0;J<F['vertices']['length'];J++){A[E+J*0x3+0x0]=F['vertices'][J]['x'],A[E+J*0x3+0x1]=F['vertices'][J]['y'],A[E+J*0x3+0x2]=F['vertices'][J]['z'],C[E+J*0x3+0x0]=F['normals'][J]['x'],C[E+J*0x3+0x1]=F['normals'][J]['y'],C[E+J*0x3+0x2]=F['normals'][J]['z'],B[E+J*0x3+0x0]=F['vertices'][J]['x'],B[E+J*0x3+0x1]=F['vertices'][J]['y'],B[E+J*0x3+0x2]=F['vertices'][J]['z'];}{E+=A['length'];let K=F['vertices']['length']-0x1;A[E+0x0]=F['vertices'][K]['x'],A[E+0x1]=F['vertices'][K]['y'],A[E+0x2]=F['vertices'][K]['z'],C[E+0x0]=F['normals'][K]['x'],C[E+0x1]=F['normals'][K]['y'],C[E+0x2]=F['normals'][K]['z'],B[E+0x0]=F['vertices'][K]['x'],B[E+0x1]=F['vertices'][K]['y'],B[E+0x2]=F['vertices'][K]['z'];}a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(A),a['gl']['STATIC_DRAW']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0);let G=a['gl']['getAttribLocation'](a['Shader']['currentProgram'],'a_nextPosition');if(G>=0x0){let L=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],L),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(B),a['gl']['STATIC_DRAW']),a['gl']['enableVertexAttribArray'](G),a['gl']['vertexAttribPointer'](G,0x3,a['gl']['FLOAT'],![],0x0,0xc);}let H=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],H),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(C),a['gl']['STATIC_DRAW']),a['gl']['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](a['gl']['TRIANGLES'],0x0,0x6),G>=0x0&&a['gl']['disableVertexAttribArray'](G),a['gl']['deleteBuffer'](D),a['gl']['deleteBuffer'](H),a['Shader']['EndShader']();}}},this['RenderPreselectData']=function(l){if(l===undefined)return;let m=c['PreselectEdges'][l['index']];if(m===undefined)return;let o=[],p=a['gl']['TRIANGLES'];if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE'])p=a['gl']['LINES'],o[0x0]=new b['Vector3']()['copy'](m['vData'][0x0]),o[0x1]=new b['Vector3']()['copy'](m['vData'][0x1]);else{if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_START'])p=a['gl']['POINTS'],o[0x0]=new b['Vector3']()['copy'](m['vData'][0x0]);else{if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_END'])p=a['gl']['POINTS'],o[0x0]=new b['Vector3']()['copy'](m['vData'][0x1]);else{if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE_MID']){p=a['gl']['POINTS'];let q=new b['Vector3']()['addVectors'](m['vData'][0x0],m['vData'][0x1])['multiplyScalar'](0.5);o[0x0]=new b['Vector3']()['copy'](q);}else{if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['CIRCLE_CENTER'])p=a['gl']['POINTS'],a['Shader']['SetPointSize'](g),o[0x0]=new b['Vector3']()['copy'](m['vData'][0x2]);else{if(l['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['CIRCLE']){p=a['gl']['LINES'];let r=a['MeshProcess']['Get2D3DCircleVertices'](m['vData'][0x2],m['vData'][0x4],m['vData'][0x5],m['fValue'],0x0,0x168),s=o['length'],t=0x0;for(let u=0x1;u<r['vertices']['length'];u++){for(let w=0x1;w>=0x0;w--){o[s]=new b['Vector3']()['copy'](r['vertices'][u-w]),s++;}}}}}}}}if(o['length']>0x0){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetPointSize'](g);const x=new b['Matrix4']()['copy'](a['Camera']['matMVP']),y=new b['Matrix4']()['copy'](a['Camera']['screenProjectionMatrix']);a['Shader']['SetMatrix'](y,undefined);let z=new b['Color']()['copy'](f)['glColor']();a['Shader']['SetGLColor'](z['r'],z['g'],z['b'],z['a']);if(p===a['gl']['LINES']){let E=h;![]&&(E=new b['Vector3']()['subVectors'](v2,v1)['length']());let F=[];for(let G=0x0;G<o['length'];G+=0x2){let H=a['Camera']['world2ScreenWithMatrix'](x,o[G]),I=a['Camera']['world2ScreenWithMatrix'](x,o[G+0x1]);H['z']=0x0,I['z']=0x0;let J=a['MeshProcess']['GetLine'](H,I,E);for(let K=0x0;K<J['vertices']['length'];K++){F['push'](J['vertices'][K]);}}o=F,p=a['gl']['TRIANGLES'];}else for(let L=0x0;L<o['length'];L++){let M=a['Camera']['world2ScreenWithMatrix'](x,o[L]);o[L]=M;}let A=0x0,B=[],C=0x0;for(let N=0x0;N<o['length'];N++){B[C]=o[N]['x'],B[C+0x1]=o[N]['y'],B[C+0x2]=0x0,C+=0x3,A++;}let D=a['gl']['createBuffer']();a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],D),a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(B),a['gl']['STATIC_DRAW']),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0),a['gl']['drawArrays'](p,0x0,A),a['gl']['deleteBuffer'](D);}a['Shader']['EndShader']();};}}export default Pick;