let UIMarkup_Measure_ObjectMinDistance=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=-0x1,f=undefined,g=new c['BBox'](),h=undefined,i=new c['BBox']();this['Start']=function(){if($('.ui_message')['length']>0x0){let j='Measures\x20the\x20distance\x20between\x20two\x20object.',k=j;$('.ui_message_text')['html'](k),$('.ui_message')['fadeIn'](0x1f4);}d['base']['prototype']['Start']['call'](d);},this['Release']=function(){e=-0x1,f=undefined,h=undefined,d['base']['prototype']['Release']['call'](d);},this['PreviousStep']=function(){switch(a['GetStep']()){case 0x1:{b['Data']['DeleteReview'](a['currentReviewItem']['id']),b['Renderer']['Render'](),d['mouseAction']=!![];}break;}},this['ProcessStep']=function(j){switch(a['GetStep']()){case 0x0:{if(j===undefined)return;if(!j['pick'])return;if(j['body']===undefined)return;g=b['Data']['GetBBoxFormMatrix']([j['body']]),f=b['Data']['GetTriangles']([j['body']]),e=j['body']['bodyId'],b['Renderer']['Render'](),a['NextStep']();}break;case 0x1:{if(j===undefined)return;if(!j['pick'])return;if(j['body']===undefined)return;i=b['Data']['GetBBoxFormMatrix']([j['body']]),h=b['Data']['GetTriangles']([j['body']]);let k=new c['Vector3'](),l=new c['Vector3']();b['Data']['GetMinDistanceByTriangles'](f,h,k,l);let m=[k,l];a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_OBJECTMINDISTANCE'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Measure']['UpdateReviewText'](a['currentReviewItem'],m),a['currentReviewItem']['text']['position']=new c['Vector3']()['copy'](j['position']),a['currentReviewItem']['drawitem']['position'][0x0]=k,a['currentReviewItem']['drawitem']['position'][0x1]=l,b['Data']['Reviews']['push'](a['currentReviewItem']),b['Renderer']['Render'](),a['NextStep']();}break;case 0x2:{a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();}break;}},this['mouseDown']=function(j,k,l){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,j,k,l),a['actionEnabled']=!![],!![];},this['mouseMove']=function(j,k){a['base']['prototype']['mouseMove']['call'](a,j,k);switch(a['GetStep']()){case 0x2:{let l=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),m=b['Camera']['world2ScreenWithMatrix'](l,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),n=b['Camera']['screen2WorldWithMatrix'](l,new c['Vector3'](j,k,m['z']));a['currentReviewItem']['text']['position']['copy'](n),b['Renderer']['Render']();}break;}},this['mouseUp']=function(j,k,l){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,j,k,l),a['actionEnabled']=!![];if(l===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y']))switch(a['GetStep']()){case 0x0:{let m=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);m!==undefined&&(b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![]);}break;case 0x1:{let n=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(n!==undefined){if(e===n['bodyId']){d['mouseAction']=![];break;}b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![];}}break;case 0x2:{d['ProcessStep']();}break;}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseWheel']=function(j,k,l){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ZOOM']))a['base']['prototype']['mouseWheel']['call'](a,j,k,l);},this['Render']=function(){switch(a['GetStep']()){case 0x2:{let k=new c['Color'](0x64,0xff,0x0,0xff),l=new c['Color'](0x64,0xc8,0x0,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['gl']['enable'](b['gl']['DEPTH_TEST']),b['RenderWGL']['UpdateRenderProcessByTriangles'](h,k),b['Shader']['EndShader'](),b['gl']['disable'](b['gl']['DEPTH_TEST']);{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetClipping'](undefined);let m=l,n=m['glColor']();b['Shader']['SetGLColor'](n['r'],n['g'],n['b'],n['a']);let o=[[0x0,0x4,0x4,0x5,0x5,0x1,0x1,0x0],[0x2,0x6,0x6,0x7,0x7,0x3,0x3,0x2],[0x0,0x2],[0x4,0x6],[0x1,0x3],[0x5,0x7]],p=b['Util']['GetBBox2Vertex'](i),q=b['gl']['createBuffer'](),r=[];b['gl']['bindBuffer'](b['gl']['ARRAY_BUFFER'],q),b['gl']['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,b['gl']['FLOAT'],![],0x0,0x0);{let s=0x0;for(let t=0x0;t<o['length'];t++){for(let u=0x0;u<o[t]['length'];u++){r[s]=p[o[t][u]]['x'],s++,r[s]=p[o[t][u]]['y'],s++,r[s]=p[o[t][u]]['z'],s++;}}}b['gl']['bufferData'](b['gl']['ARRAY_BUFFER'],new Float32Array(r),b['gl']['STATIC_DRAW']),b['gl']['drawArrays'](b['gl']['LINES'],0x0,r['length']),b['gl']['deleteBuffer'](q);}b['Shader']['EndShader']();}case 0x1:{let v=new c['Color'](0x64,0xff,0x0,0xff),w=new c['Color'](0x64,0xc8,0x0,0xff);b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['PHONG']),b['Shader']['SetGLLight'](),b['Shader']['SetClipping'](undefined),b['gl']['enable'](b['gl']['DEPTH_TEST']),b['RenderWGL']['UpdateRenderProcessByTriangles'](f,v),b['Shader']['EndShader'](),b['gl']['disable'](b['gl']['DEPTH_TEST']);{b['Shader']['BeginShader'](c['Enum']['SHADER_TYPES']['BASIC2D']),b['Shader']['SetMatrix'](b['Camera']['matMVP'],b['Camera']['matMV']),b['Shader']['SetClipping'](undefined);let x=w,y=x['glColor']();b['Shader']['SetGLColor'](y['r'],y['g'],y['b'],y['a']);let z=[[0x0,0x4,0x4,0x5,0x5,0x1,0x1,0x0],[0x2,0x6,0x6,0x7,0x7,0x3,0x3,0x2],[0x0,0x2],[0x4,0x6],[0x1,0x3],[0x5,0x7]],A=b['Util']['GetBBox2Vertex'](g),B=b['gl']['createBuffer'](),C=[];b['gl']['bindBuffer'](b['gl']['ARRAY_BUFFER'],B),b['gl']['vertexAttribPointer'](b['Shader']['positionAttributeLocation'],0x3,b['gl']['FLOAT'],![],0x0,0x0);{let D=0x0;for(let E=0x0;E<z['length'];E++){for(let F=0x0;F<z[E]['length'];F++){C[D]=A[z[E][F]]['x'],D++,C[D]=A[z[E][F]]['y'],D++,C[D]=A[z[E][F]]['z'],D++;}}}b['gl']['bufferData'](b['gl']['ARRAY_BUFFER'],new Float32Array(C),b['gl']['STATIC_DRAW']),b['gl']['drawArrays'](b['gl']['LINES'],0x0,C['length']),b['gl']['deleteBuffer'](B);}b['Shader']['EndShader']();}break;}},this['Render2D']=function(j){},this['GetProcessFlag']=function(j){switch(a['GetStep']()){case 0x0:{if(j===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(j===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(j===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;case 0x1:{if(j===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(j===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(j===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}break;}return![];};};export default UIMarkup_Measure_ObjectMinDistance;