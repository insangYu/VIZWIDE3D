let UIMarkup_Measure_LinkedArea=function(a,b,c){let d=this;this['base']=c['UIMarkup_Base'],this['base'](a,b);let e=![];this['Start']=function(){if($('.ui_message')['length']>0x0){let f='Measure\x20the\x20surface\x20area.',g=f;$('.ui_message_text')['html'](g),$('.ui_message')['fadeIn'](0x1f4);}d['base']['prototype']['Start']['call'](d),a['currentReviewItem']['itemType']=c['Enum']['REVIEW_TYPES']['RK_MEASURE_LINKEDAREA'],b['Measure']['UpdateReviewStyle'](a['currentReviewItem']),b['Data']['Reviews']['push'](a['currentReviewItem']);},this['Release']=function(){d['base']['prototype']['Release']['call'](d),a['currentReviewItem']!==undefined&&b['Data']['DeleteReview'](a['currentReviewItem']['id']),e=![];},this['PreviousStep']=function(){if(!e)a['currentReviewItem']['drawitem']['position']['length']>0x0&&(a['currentReviewItem']['drawitem']['position']['splice'](a['currentReviewItem']['drawitem']['position']['length']-0x1,0x1),b['Measure']['UpdateReviewText'](a['currentReviewItem'],a['currentReviewItem']['drawitem']['position']));else{e=![];let f,g,h;for(let j=0x0;j<a['currentReviewItem']['drawitem']['position']['length'];j++){j===0x0?(g=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][j]),h=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][j])):(g['min'](a['currentReviewItem']['drawitem']['position'][j]),h['max'](a['currentReviewItem']['drawitem']['position'][j]));}f=new c['Vector3']((g['x']+h['x'])*0.5,(g['y']+h['y'])*0.5,(g['z']+h['z'])*0.5),a['currentReviewItem']['text']['position']=f,b['Renderer']['Render'](),d['mouseAction']=!![];}},this['ProcessStep']=function(f){if(!e){if(f===undefined)return;if(!f['pick'])return;if(a['currentReviewItem']['drawitem']['position']['length']<0x3)a['currentReviewItem']['drawitem']['position']['push'](new c['Vector3']()['copy'](f['position']));else{let g=new c['Plane']()['setFromCoplanarPoints'](a['currentReviewItem']['drawitem']['position'][0x0],a['currentReviewItem']['drawitem']['position'][0x1],a['currentReviewItem']['drawitem']['position'][0x2]),h=Math['abs'](g['distanceToPoint'](f['position']));if(h>0.0001)return;a['currentReviewItem']['drawitem']['position']['push'](new c['Vector3']()['copy'](f['position']));}if(a['currentReviewItem']['drawitem']['position']['length']>=0x3){let j,k,l;for(let m=0x0;m<a['currentReviewItem']['drawitem']['position']['length'];m++){m===0x0?(k=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][m]),l=new c['Vector3']()['copy'](a['currentReviewItem']['drawitem']['position'][m])):(k['min'](a['currentReviewItem']['drawitem']['position'][m]),l['max'](a['currentReviewItem']['drawitem']['position'][m]));}j=new c['Vector3']((k['x']+l['x'])*0.5,(k['y']+l['y'])*0.5,(k['z']+l['z'])*0.5),a['currentReviewItem']['text']['position']=j,b['Measure']['UpdateReviewText'](a['currentReviewItem'],a['currentReviewItem']['drawitem']['position']);}a['NextStep'](),b['Renderer']['Render'](),d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])&&b['Pick']['RefreshPreselectEdgeProcess']();}else a['currentReviewItem']=undefined,b['Control']['RestoreMode'](),b['Renderer']['Render']();},this['mouseDown']=function(f,g,h){return d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['ROTATE'])===![]&&(d['mouseAction']=![],a['actionEnabled']=![]),a['base']['prototype']['mouseDown']['call'](a,f,g,h),a['actionEnabled']=!![],!![];},this['mouseMove']=function(f,g){a['base']['prototype']['mouseMove']['call'](a,f,g);if(e){let h=new c['Matrix4']()['multiplyMatrices'](b['Camera']['projectionMatrix'],b['Camera']['cameraMatrix']),i=b['Camera']['world2ScreenWithMatrix'](h,new c['Vector3']()['copy'](a['currentReviewItem']['text']['position'])),j=b['Camera']['screen2WorldWithMatrix'](h,new c['Vector3'](f,g,i['z']));a['currentReviewItem']['text']['position']['copy'](j),b['Renderer']['Render']();}},this['mouseUp']=function(f,g,h){a['actionEnabled']=![],a['base']['prototype']['mouseUp']['call'](a,f,g,h),a['actionEnabled']=!![];if(h===0x0&&a['GetMouseClick'](a['mouse']['x'],a['mouse']['y'])){if(!e){let i=!![];if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){let j=b['Pick']['GetPreselectDataPick'](a['mouse']['x'],a['mouse']['y']);j!==undefined&&(b['Data']['GetPreselectPick'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![],i=![]);}if(i){let k=b['Renderer']['Picking'](a['mouse']['x'],a['mouse']['y']);if(k!==undefined){if(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['PRESELECT'])){if(b['Pick']['GetMakePreselectID']()!==k['bodyId']){let l=function(m){b['Pick']['MakeMeasurePreselectInfoByID'](m);if(b['useFramebuffer'])b['MeshBlock']['Reset']();b['Renderer']['Render']();};b['Pick']['GetBodyCacheDownload'](k['bodyId'],l),d['mouseAction']=![],i=![];}}i&&(d['GetProcessFlag'](c['Enum']['MARKUP_FLAG']['SURFACE'])&&b['Data']['GetPickByBodyCacheDownload'](a['mouse']['x'],a['mouse']['y'],d['ProcessStep']),d['mouseAction']=![],i=![]);}}}else d['ProcessStep']();}else b['MeshBlock']['Reset']();return d['mouseAction'];},this['mouseDoubleClick']=function(f,g,h){if(!e){if(a['currentReviewItem']['drawitem']['position']['length']<0x3)return;e=!![],a['NextStep'](),b['Renderer']['Render']();}},this['mouseWheel']=function(f,g,h){if(!e)a['base']['prototype']['mouseWheel']['call'](a,f,g,h);},this['Render2D']=function(f){if(a['currentReviewItem']['drawitem']['position']['length']>=0x3)return;if(e)return;const g=new c['Matrix4']()['copy'](b['Camera']['matMVP']);let h=0x3;f['fillStyle']='rgba(0,\x20255,\x200,\x201)';for(let j=0x0;j<a['currentReviewItem']['drawitem']['position']['length'];j++){let k=b['Renderer']['Util_GetScreenPositionByMatrix'](g,a['currentReviewItem']['drawitem']['position'][j]);b['Renderer']['Util_draw_Point'](f,k['x'],k['y'],h);}},this['GetProcessFlag']=function(f){if(!e){if(f===c['Enum']['MARKUP_FLAG']['PRESELECT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ROTATE'])return!![];if(f===c['Enum']['MARKUP_FLAG']['ZOOM'])return!![];if(f===c['Enum']['MARKUP_FLAG']['POINT'])return!![];if(f===c['Enum']['MARKUP_FLAG']['CIRCLE_CENTER'])return![];if(f===c['Enum']['MARKUP_FLAG']['SURFACE'])return!![];}return![];};};export default UIMarkup_Measure_LinkedArea;