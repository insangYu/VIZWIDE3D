let Renderer=function(a,b){let c=this,d,e;this['RenderEvent']=![],this['LockRender']=![],this['enableDrawCall']=![],this['enableTimePanel']=![],this['enableFPS']=![];let f={'font':{'face':'Arial','size':0xc,'color':new b['Color'](0x36,0xaf,0xb8,0xc8)},'count':0x0,'occlusionCullingCount':0x0};function g(){let bP={'rect':new b['Rect'](),'position':[],'text':[]};return bP;}let h=new b['Color'](0xcb,0xd5,0xe0,0xff),i=new b['Color'](0xcb,0xd5,0xe0,0xff),j=new b['Color'](0xff,0xff,0xff,0xff);this['mainFramebufferClear']=!![],this['enableRenderLimit']=![],this['enableRenderLimitCnt']=0x7d0,this['currentRenderCnt']=0x0,this['enableRenderLimitRate']=-0x1;let k=0x0;this['enableOcclusion']=![],this['occlusionProcessCount']=0x0,this['occlusionProcessMax']=0x0;let l=![],m=new b['Color'](0x46,0x46,0x46,0x1),n=![],o=![],p=new b['Color'](0x0,0x0,0x0,0xb4),q=new b['Color'](0x0,0x0,0x0,0xb4),r=![],s=!![],t=0x1,u=new b['Color'](0xff,0xff,0xff,0xff),v=![],w=![],x=new b['Color'](0x0,0x0,0x0,0xb4),y=![],z=0x10,A=new b['Color'](0x0,0x0,0x0,0xff),B=![],C=![],D=![],E=![],F=!![],G=new b['Color'](0x0,0xc8,0x0,0xff),H=![],I=![],J=![],K=![],L=!![],M=0.2,N=0x1,O=new b['Color'](0x80,0x80,0x80,0xc8),P=0x3e8,Q=!![],R=0x64,S=new b['Color'](0xe6,0xe6,0xe6,0xc8),T=![],U=[],V=[0x1,0x0,0x0,0x0];this['RenderPivot']=![],X();function W(bP,bQ){bQ=bQ||0x1;const bR=bP['clientWidth']*bQ|0x0,bS=bP['clientHeight']*bQ|0x0;if(bP['width']!==bR||bP['height']!==bS)return bP['width']=bR,bP['height']=bS,!![];return![];}function X(){d=a['gl'],e=a['ctx_review'],W(d['canvas']),W(e['canvas']),d['viewport'](0x0,0x0,d['canvas']['width'],d['canvas']['height']),e['clearRect'](0x0,0x0,e['canvas']['width'],e['canvas']['height']);let bP=h['glColor']();d['clearColor'](bP['r'],bP['g'],bP['b'],bP['a']),d['clear'](d['COLOR_BUFFER_BIT']);if(a['DEBUG']===!![]){if(a['DemoType']!==0x1)c['enableDrawCall']=!![];}a['DemoType']===0x1&&(c['enableTimePanel']=!![]);}this['InitCanvas']=function(){X();};let Y=new Map(),Z=function(){let bP={'id':'','listProcess':[],'query':undefined,'queryInProgress':![],'occluded':![],'renderEnableOcclusion':![]};return bP;},a0=function(){let bP={'start':0x0,'length':0x0,'action':null,'processKind':0x0};return bP;},a1=function(bP,bQ){return a['Util']['EqualAction'](bP,bQ);};function a2(){for(let bP=0x0;bP<a['Data']['ObjectsUpdateLength'];bP++){let bQ=a['Data']['Objects'][bP];if(!bQ['flag']['updateProcess'])continue;a['RenderWGL']['InitRenderPipeline'](bQ);if(I){bQ['flag']['updateProcess']=!![];let bR=a['RenderWGL']['GetPipeline'](bQ['uuid']);a['RenderWGL']['InitRenderPipelineByWireframe'](bQ,bR);}}}function a3(bP){if(!bP['flag']['updateProcess'])return;let bQ=Y['get'](bP['uuid']),bR=undefined;bQ!==undefined&&(bR=bQ['query']);{bQ=Z(),bQ['id']=bP['uuid'],Y['set'](bP['uuid'],bQ);if(a['useWebGL2']){if(bR===undefined)bQ['query']=d['createQuery']();else bQ['query']=bR;}}let bS=0x0,bT=0x0,bU=a['Data']['ActionItem']();if(bP['attribs']['a_index']!==null)for(let bV=0x0;bV<bP['tag']['length'];bV++){let bW=bP['tag'][bV];{}if(bS>0x0){if(a1(bW['action'],bU))bS+=bW['m_nTris'];else{let bX=a0();bX['start']=bT,bX['length']=bS,bX['processKind']=0x0,bX['action']=a['Data']['ActionItem'](),bX['action']['visible']=bU['visible'],bX['action']['selection']=bU['selection'],bX['action']['transform']['copy'](bU['transform']),bX['action']['color']=bU['color'],bX['action']['transformIdx']=bU['transformIdx'],bX['action']['material']=bU['material'],bX['action']['customColor']=bU['customColor'],bQ['listProcess']['push'](bX),bS=0x0;}}bS===0x0&&bW['action']['visible']&&(bT=bW['m_triIdx'],bS=bW['m_nTris'],bU['visible']=bW['action']['visible'],bU['selection']=bW['action']['selection'],bU['transform']['copy'](bW['action']['transform']),bU['color']=bW['action']['color'],bU['transformIdx']=bW['action']['transformIdx'],bU['material']=bW['action']['material'],bU['customColor']=bW['action']['customColor']);if(bS>0x0&&bP['tag']['length']-0x1===bV){let bY=a0();bY['start']=bT,bY['length']=bS,bY['processKind']=0x0,bY['action']=a['Data']['ActionItem'](),bY['action']['visible']=bU['visible'],bY['action']['selection']=bU['selection'],bY['action']['transform']['copy'](bU['transform']),bY['action']['color']=bU['color'],bY['action']['material']=bU['material'],bY['action']['customColor']=bU['customColor'],bY['action']['transformIdx']=bU['transformIdx'],bQ['listProcess']['push'](bY);}}if(I)a4(bP,bQ);bP['flag']['updateProcess']=![],bP['flag']['renderEnable']=!![];}function a4(bP,bQ){let bR=0x0,bS=0x0,bT=a['Data']['ActionItem']();if(bP['attribs']['a_index']['buffer']!==null){if(bP['attribs']['sub']['a_wireframe']['buffer']===null){let bW=[],bX=0x0;for(let bY=0x0;bY<bP['attribs']['a_index']['array']['length']/0x3;bY++){bW[bX]=bP['attribs']['a_index']['array'][bY*0x3],bX++,bW[bX]=bP['attribs']['a_index']['array'][bY*0x3+0x1],bX++,bW[bX]=bP['attribs']['a_index']['array'][bY*0x3+0x1],bX++,bW[bX]=bP['attribs']['a_index']['array'][bY*0x3+0x2],bX++,bW[bX]=bP['attribs']['a_index']['array'][bY*0x3+0x2],bX++,bW[bX]=bP['attribs']['a_index']['array'][bY*0x3],bX++;}bP['attribs']['sub']['a_wireframe']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['sub']['a_wireframe']['buffer']),d['bufferData'](d['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bW),d['STATIC_DRAW']);}let bU=0x0,bV=0xffdc;for(let bZ=0x0;bZ<bP['tag']['length'];bZ++){let c0=bP['tag'][bZ];if(bR>0x0){if(a1(c0['action'],bT)&&bR+c0['m_nTris']*0x2<bV)bR+=c0['m_nTris']*0x2;else{let c1=a0();c1['start']=bS,c1['length']=bR,c1['processKind']=0x1,c1['action']=a['Data']['ActionItem'](),c1['action']['visible']=bT['visible'],c1['action']['selection']=bT['selection'],c1['action']['transform']['copy'](bT['transform']),c1['action']['color']=bT['color'],c1['action']['transformIdx']=bT['transformIdx'],c1['action']['material']=bT['material'],bQ['listProcess']['push'](c1),bR=0x0;}}bR===0x0&&c0['action']['visible']&&(bS=bU+c0['m_triIdx']*0x2,bR=c0['m_nTris']*0x2,bT['visible']=c0['action']['visible'],bT['selection']=c0['action']['selection'],bT['transform']['copy'](c0['action']['transform']),bT['color']=c0['action']['color'],bT['transformIdx']=c0['action']['transformIdx'],bT['material']=c0['action']['material']);if(bR>0x0&&bP['tag']['length']-0x1===bZ){let c2=a0();c2['start']=bS,c2['length']=bR,c2['processKind']=0x1,c2['action']=a['Data']['ActionItem'](),c2['action']['visible']=bT['visible'],c2['action']['selection']=bT['selection'],c2['action']['transform']['copy'](bT['transform']),c2['action']['color']=bT['color'],c2['action']['material']=bT['material'],c2['action']['transformIdx']=bT['transformIdx'],bQ['listProcess']['push'](c2);}}}bP['flag']['updateProcess']=![],bP['flag']['renderEnable']=!![];}function a5(bP,bQ){let bR=Y['get'](bP['uuid']);if(bR===undefined)return;if(bR['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bS=0x3,bT=d['FLOAT'],bU=![],bV=0x0,bW=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bS,bT,bU,bV,bW),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],bS,bT,bU,bV,bW),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);let bX=bP['tag'][0x0],bY=bX['color'];if(l)bY=m;{const c0=new b['Matrix4']();c0['copy'](a['Camera']['cameraMatrix']);const c1=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c0);a['Shader']['SetMatrix'](c1,c0);}let bZ=new b['Matrix4']();for(let c2=0x0;c2<bR['listProcess']['length'];c2++){let c3=bR['listProcess'][c2],c4=bY;a['Shader']['SetGLMaterial'](c3['action']['material']);if(c3['action']['material']>=0x0){let c6=a['Material']['GetMaterial'](c3['action']['material']);if(c6!==undefined)c4=c6['color'];}if(c3['action']['selection'])c4=a['Configuration']['Model']['Selection']['Color'];if(bQ&&c4['a']===0xff)continue;if(!bQ&&c4['a']!==0xff)continue;let c5=c4['glColor']();a['Shader']['SetGLColor'](c5['r'],c5['g'],c5['b'],c5['a']);if(!bZ['equals'](c3['action']['transform'])){bZ['copy'](c3['action']['transform']);const c7=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bZ),c8=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c7);a['Shader']['SetMatrix'](c8,c7);}d['drawElements'](d['TRIANGLES'],c3['length'],d['UNSIGNED_SHORT'],c3['start']*0x2);}}function a6(bP){let bQ=Y['get'](bP['uuid']);if(bQ===undefined)return;if(bQ['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bR=0x3,bS=d['FLOAT'],bT=![],bU=0x0,bV=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bR,bS,bT,bU,bV);a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],bT,bU,bV));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bX=new b['Matrix4']();bX['copy'](a['Camera']['cameraMatrix']);const bY=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bX);a['Shader']['SetMatrix'](bY,bX),a['Shader']['SetClipping'](bX);}let bW=new b['Matrix4']();for(let bZ=0x0;bZ<bQ['listProcess']['length'];bZ++){let c0=bQ['listProcess'][bZ];if(!bW['equals'](c0['action']['transform'])){bW['copy'](c0['action']['transform']);const c1=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bW),c2=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c1);a['Shader']['SetMatrix'](c2,c1);}d['drawElements'](d['TRIANGLES'],c0['length'],d['UNSIGNED_SHORT'],c0['start']*0x2);}}function a7(bP){let bQ=Y['get'](bP['uuid']);if(bQ===undefined)return;if(bQ['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0);a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],![],0x0,0x0));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bS=new b['Matrix4']();bS['copy'](a['Camera']['cameraMatrix']);const bT=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bS);a['Shader']['SetMatrix'](bT,bS),a['Shader']['SetClipping'](bS);}let bR=new b['Matrix4']();for(let bU=0x0;bU<bQ['listProcess']['length'];bU++){let bV=bQ['listProcess'][bU];if(!bV['action']['selection'])continue;if(!bR['equals'](bV['action']['transform'])){bR['copy'](bV['action']['transform']);const bW=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bR),bX=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bW);a['Shader']['SetMatrix'](bX,bW);}d['drawElements'](d['TRIANGLES'],bV['length'],d['UNSIGNED_SHORT'],bV['start']*0x2);}}function a8(bP){let bQ=bP['object'];d['bindBuffer'](d['ARRAY_BUFFER'],bQ['attribs']['a_position']['buffer']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ARRAY_BUFFER'],bQ['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bQ['attribs']['a_index']['buffer']);{const bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bP['action']['transform']),bS=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bR);a['Shader']['SetMatrix'](bS,undefined);}d['drawElements'](d['TRIANGLES'],bP['m_nTris'],d['UNSIGNED_SHORT'],bP['m_triIdx']*0x2);}let a9,aa=0x0,ab=0x0,ac=new Date()['getTime']();function ad(){if(!c['enableFPS'])return;setTimeout(function(){a9=new Date()['getTime'](),a9>=ac+0x3e8&&(ac=a9,ab=aa,aa=0x0),aa++;},0xa);}function ae(){if(J){af();return;}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BACKGROUND']);{let bP=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],bQ=i['glColor'](),bR=j['glColor'](),bS=[bR['r'],bR['g'],bR['b'],bR['a'],bR['r'],bR['g'],bR['b'],bR['a'],bQ['r'],bQ['g'],bQ['b'],bQ['a'],bQ['r'],bQ['g'],bQ['b'],bQ['a']];const bT=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bT),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bP),d['STATIC_DRAW']);const bU=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bU),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bS),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],bT),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ARRAY_BUFFER'],bU),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4),d['deleteBuffer'](bT),d['deleteBuffer'](bU);}a['Shader']['EndShader']();}function af(){d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['SKYBOX']);if(!![]){let bP=new b['Matrix4']()['copy'](a['Camera']['matMV']);bP['setPosition'](new b['Vector3']());let bQ=new b['Matrix4']();if(a['Camera']['perspectiveView']){const bX=a['Util']['DegToRad'](0x3c),bY=d['canvas']['clientWidth']/d['canvas']['clientHeight'];let bZ=new b['Matrix4']()['perspective'](bX,bY,0.001,0xa),c0=new b['Matrix4']();c0['elements']=bZ,bQ=new b['Matrix4']()['multiplyMatrices'](c0,bP);}else{const c1=a['Util']['DegToRad'](0x5a),c2=d['canvas']['clientWidth']/d['canvas']['clientHeight'];let c3=new b['Matrix4']()['perspective'](c1,c2,0.001,0xa),c4=new b['Matrix4']();c4['elements']=c3,bQ=new b['Matrix4']()['multiplyMatrices'](c4,bP);}a['Shader']['SetMatrix'](bQ,undefined),a['Shader']['SetGLSkyBox']();let bR=new b['Vector3'](-0x1,-0x1,-0x1),bS=new b['Vector3'](0x1,0x1,0x1),bT=[0x2,0x0,0x3,0x0,0x3,0x1,0x4,0x6,0x5,0x6,0x5,0x7,0x0,0x4,0x1,0x4,0x1,0x5,0x6,0x2,0x7,0x2,0x7,0x3,0x4,0x0,0x6,0x0,0x6,0x2,0x1,0x5,0x3,0x5,0x3,0x7],bU=[bR['x'],bR['y'],bR['z'],bR['x'],bR['y'],bS['z'],bR['x'],bS['y'],bR['z'],bR['x'],bS['y'],bS['z'],bS['x'],bR['y'],bR['z'],bS['x'],bR['y'],bS['z'],bS['x'],bS['y'],bR['z'],bS['x'],bS['y'],bS['z']];const bV=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bV),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bU),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],bV),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0);let bW=d['createBuffer']();d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bW),d['bufferData'](d['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bT),d['STATIC_DRAW']),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bW),d['drawElements'](d['TRIANGLES'],0x24,d['UNSIGNED_SHORT'],0x0),d['deleteBuffer'](bV),d['deleteBuffer'](bW);}a['Shader']['EndShader'](),d['clear'](d['DEPTH_BUFFER_BIT']);}let ag=0x0;function ah(){a['Data']['DataProcessCheck'](e,aT);if(c['LockRender'])return;if(k>0x0)return;if(a['useFramebuffer']){d['canvas']['width']>0x0&&d['canvas']['height']>0x0&&(a['Dual']['Visible']()&&(a['Mode']['Camera'](0x1),bm(),a['Dual']['Draw'](),a['Mode']['Camera'](0x0),a['Data']['DataProcessCheck'](e,aT)),bm(),bp(),a['CustomObject']['EndRenderObject']());c['RenderEvent']=![],c['mainFramebufferClear']=![];return;}let bP=h['glColor']();d['clearColor'](bP['r'],bP['g'],bP['b'],bP['a']),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a2(),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PHONG']),a['Shader']['SetGLLight'](),d['enable'](d['DEPTH_TEST']);const bQ=new b['Matrix4']();bQ['copy'](a['Camera']['cameraMatrix']);const bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bQ);a['Shader']['SetMatrix'](bR,bQ),a['Shader']['SetClipping'](bQ);let bS=a['Data']['ObjectsUpdateLength'];for(let bT=0x0;bT<bS;bT++){a5(a['Data']['Objects'][bT],![]);}d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);for(let bU=0x0;bU<bS;bU++){a5(a['Data']['Objects'][bU],!![]);}d['disable'](d['BLEND']),a['Shader']['EndShader']();if(n||l){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']);{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let bV=0x0;bV<bS;bV++){a6(a['Data']['Objects'][bV]);}a['Shader']['EndShader']();}a['Shader']['EndFramebuffer']();}if(n||l){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);if(w)bF(b['Enum']['SHADER_TYPES']['EDGE'],b['Enum']['FB_RENDER_TYPES']['PICK'],x);else bF(b['Enum']['SHADER_TYPES']['EDGE'],b['Enum']['FB_RENDER_TYPES']['PICK'],p);a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),bF(b['Enum']['SHADER_TYPES']['FXAA'],b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),bM(),d['disable'](d['BLEND']);if(F){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['SELECTED']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let bW=0x0;bW<bS;bW++){a7(a['Data']['Objects'][bW]);}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),bF(b['Enum']['SHADER_TYPES']['EDGE'],b['Enum']['FB_RENDER_TYPES']['SELECTED'],G),a['Shader']['EndFramebuffer'](),bF(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}ak(),d['clear'](d['DEPTH_BUFFER_BIT']),bf(),c['RenderEvent']=![];}function ai(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),d['viewport'](0x0,0x0,d['canvas']['width'],d['canvas']['height']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']),d['enable'](d['DEPTH_TEST']);let bR=a['Data']['ObjectsUpdateLength'];for(let bX=0x0;bX<bR;bX++){let bY=a['RenderWGL']['GetPipeline'](a['Data']['Objects'][bX]['uuid']);if(bY===undefined||bY['listProcess']['length']<=0x0)return;d['bindBuffer'](d['ARRAY_BUFFER'],a['Data']['Objects'][bX]['attribs']['a_position']['buffer']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ARRAY_BUFFER'],a['Data']['Objects'][bX]['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],![],0x0,0x0),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],a['Data']['Objects'][bX]['attribs']['a_index']['buffer']);{const c0=new b['Matrix4']();c0['copy'](a['Camera']['cameraMatrix']);const c1=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c0);a['Shader']['SetMatrix'](c1,c0);}let bZ=new b['Matrix4']();for(let c2=0x0;c2<bY['listProcess']['length'];c2++){let c3=bY['listProcess'][c2];if(!bZ['equals'](c3['action']['transform'])){bZ['copy'](c3['action']['transform']);const c4=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bZ),c5=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c4);a['Shader']['SetMatrix'](c5,c4);}d['drawElements'](d['TRIANGLES'],c3['length'],d['UNSIGNED_SHORT'],c3['start']*0x2);}}a['Shader']['EndShader'](),a['Shader']['BindTargetTexture']();const bS=bP,bT=d['canvas']['height']-bQ,bU=new Uint8Array(0x4);d['readPixels'](bS,bT,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],bU);const bV=bU[0x0]+(bU[0x1]<<0x8)+(bU[0x2]<<0x10)+bU[0x3]*0x1000000;let bW=a['Data']['GetBodyByColorIdx'](bV);return a['Shader']['EndFramebuffer'](),bW;}function aj(bP,bQ){return a['Util']['IsRenderReivewNearPlane'](bP,bQ);}this['GetReviewNearPlane']=function(){return V;};function ak(){let bP=[0x1,0x0,0x0,0x0];{let bQ=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),bR=new b['Matrix4']()['getInverse'](bQ),bS=bR['multiplyVector'](a['Camera']['cameraPosition']),bT=bR['multiplyVector'](a['Camera']['cameraTarget']),bU=a['Camera']['near'],bV=new b['Vector3']()['subVectors'](bT,bS);bV['normalize'](),bP[0x0]=bV['x'],bP[0x1]=bV['y'],bP[0x2]=bV['z'];let bW=new b['Vector3']()['addVectors'](bS,bV['multiplyScalar'](bU));bP[0x3]=-(bP[0x0]*bW['x']+bP[0x1]*bW['y']+bP[0x2]*bW['z']);}V=bP;for(let bX=0x0;bX<a['Data']['Reviews']['length'];bX++){let bY=a['Data']['Reviews'][bX];c['RenderReviewIitem'](bY);}a['Control']['Render2D'](e);if(a['useMiniView'])a['MiniView']['Render']();}this['RenderReviewIitem']=function(bP){if(!bP['visible'])return;switch(bP['itemType']){case b['Enum']['REVIEW_TYPES']['RK_SURFACE_NOTE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;ay(bP);break;case b['Enum']['REVIEW_TYPES']['RK_2D_NOTE']:az(bP);break;case b['Enum']['REVIEW_TYPES']['RK_3D_NOTE']:if(aj(bP['text']['position'],V))break;aA(bP);break;case b['Enum']['REVIEW_TYPES']['RK_TOOLTIP_NOTE']:if(aj(bP['text']['position'],V))break;aC(bP);break;case b['Enum']['REVIEW_TYPES']['RK_IMAGE_NOTE']:if(aj(bP['drawitem']['position'][0x0],V))break;aD(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_POS']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;aE(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aG(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_ANGLE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;if(aj(bP['drawitem']['position'][0x2],V))break;aH(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_OBJECTMINDISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aI(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_NORMALDISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aJ(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_HORIZONTALITYDISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aK(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_ORTHODISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aL(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_X_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aM(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_Y_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aN(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_Z_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aO(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_XY_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aP(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_YZ_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aQ(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_ZX_AXIS_DISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aR(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_LINKEDAREA']:if(aj(bP['text']['position'],V))break;aS(bP);break;case b['Enum']['REVIEW_TYPES']['RK_MEASURE_SURFACEDISTANCE']:if(aj(bP['text']['position'],V))break;if(aj(bP['drawitem']['position'][0x0],V))break;if(aj(bP['drawitem']['position'][0x1],V))break;aG(bP);break;case b['Enum']['REVIEW_TYPES']['RK_PATH']:av(bP);break;case b['Enum']['REVIEW_TYPES']['RK_CUSTOM']:aw(bP);break;case b['Enum']['REVIEW_TYPES']['RK_SKETCH']:ax(bP);break;default:break;}};function al(bP){c['Util_SetReviewArrowOption'](e,bP);}this['Util_SetReviewArrowOption']=function(bP,bQ){bP['strokeStyle']='rgba('+bQ['style']['line']['color']['r']+','+bQ['style']['line']['color']['g']+','+bQ['style']['line']['color']['b']+','+bQ['style']['line']['color']['glAlpha']()+')',bP['lineWidth']=bQ['style']['line']['thickness'],bP['fillStyle']='rgba('+bQ['style']['arrow']['color']['r']+','+bQ['style']['arrow']['color']['g']+','+bQ['style']['arrow']['color']['b']+','+bQ['style']['arrow']['color']['glAlpha']()+')';};function am(bP){c['Util_SetReviewLineOption'](e,bP);}this['Util_SetReviewLineOption']=function(bP,bQ){bP['strokeStyle']='rgba('+bQ['style']['line']['color']['r']+','+bQ['style']['line']['color']['g']+','+bQ['style']['line']['color']['b']+','+bQ['style']['line']['color']['glAlpha']()+')',bP['lineWidth']=bQ['style']['line']['thickness'];};function an(bP,bQ){c['Util_SetReviewAxisLineOption'](e,bP,bQ);}this['Util_SetReviewAxisLineOption']=function(bP,bQ,bR){if(bR===0x0)bP['strokeStyle']='rgba(255,\x200,\x200,\x201)';else{if(bR===0x1)bP['strokeStyle']='rgba(0,\x20255,\x200,\x201)';else bR===0x2&&(bP['strokeStyle']='rgba(100,\x20100,\x20255,\x201)');}bP['lineWidth']=bQ['style']['line']['thickness'];};function ao(bP){c['Util_SetReviewPointOption'](e,bP);}this['Util_SetReviewPointOption']=function(bP,bQ){bP['fillStyle']='rgba('+bQ['style']['point']['color']['r']+','+bQ['style']['point']['color']['g']+','+bQ['style']['point']['color']['b']+','+bQ['style']['point']['color']['glAlpha']()+')';};function ap(bP){c['Util_SetReviewBgOption'](e,bP);}this['Util_SetReviewBgOption']=function(bP,bQ){bQ['style']['background']['enable']?bP['fillStyle']='rgba('+bQ['style']['background']['color']['r']+','+bQ['style']['background']['color']['g']+','+bQ['style']['background']['color']['b']+','+bQ['style']['background']['color']['glAlpha']()+')':bP['fillStyle']='rgba('+bQ['style']['background']['color']['r']+','+bQ['style']['background']['color']['g']+','+bQ['style']['background']['color']['b']+','+0x0+')',bQ['style']['border']['enable']?(bP['strokeStyle']='rgba('+bQ['style']['border']['color']['r']+','+bQ['style']['border']['color']['g']+','+bQ['style']['border']['color']['b']+','+bQ['style']['border']['color']['glAlpha']()+')',bP['lineWidth']=bQ['style']['border']['thickness']):(bP['strokeStyle']='rgba('+bQ['style']['border']['color']['r']+','+bQ['style']['border']['color']['g']+','+bQ['style']['border']['color']['b']+','+0x0+')',bP['lineWidth']=bQ['style']['border']['thickness']);};function aq(bP){c['Util_SetReviewFontOption'](e,bP);}this['Util_SetReviewFontOption']=function(bP,bQ){bP['font']=bQ['style']['font']['size']+'pt\x20'+bQ['style']['font']['face'],bP['fillStyle']='rgba('+bQ['style']['font']['color']['r']+','+bQ['style']['font']['color']['g']+','+bQ['style']['font']['color']['b']+','+bQ['style']['font']['color']['glAlpha']()+')';};function ar(bP){c['Util_SetReviewTriangleOption'](e,bP);}this['Util_SetReviewTriangleOption']=function(bP,bQ){bP['fillStyle']='rgba('+bQ['style']['triangle']['color']['r']+','+bQ['style']['triangle']['color']['g']+','+bQ['style']['triangle']['color']['b']+','+bQ['style']['triangle']['color']['glAlpha']()+')';},this['AddDrawCount']=function(){f['count']++;},this['AddOcclusionCullingCount']=function(){f['occlusionCullingCount']++;};function as(){e['fillStyle']=a['Data']['GetColorString'](f['font']['color']),e['font']=f['font']['size']+'pt\x20'+f['font']['face'];let bP='Node\x20:\x20'+a['Tree']['GetNodeCount']()+'\x20,\x20'+'Draw\x20:\x20'+f['count']+'\x20,\x20'+'Culling\x20:\x20'+f['occlusionCullingCount']+'\x20,\x20'+'MeshBlock\x20:\x20'+a['Data']['Objects']['length'];if(c['enableFPS'])bP+=',\x20FPS\x20:'+ab;e['fillText'](bP,e['canvas']['width']-0x1f4,e['canvas']['height']-0x14);}function at(){e['fillStyle']=a['Data']['GetColorString'](f['font']['color']),e['font']=0x18+'pt\x20'+f['font']['face'];let bP=a['Animation']['Daelim_GetTimeString']();e['fillText'](bP,e['canvas']['width']-0x190,e['canvas']['height']-0xc8);}function au(bP,bQ){let bR=new b['Matrix4']()['transformVector'](bP['elements'],[bQ['x'],bQ['y'],bQ['z'],0x1]);bR[0x0]/=bR[0x3],bR[0x1]/=bR[0x3];let bS=(bR[0x0]*0.5+0.5)*d['canvas']['width'],bT=(bR[0x1]*-0.5+0.5)*d['canvas']['height'],bU=new b['Vector2'](bS,bT);return bU;}function av(bP){const bQ=new b['Matrix4']();bQ['copy'](a['Camera']['cameraMatrix']);const bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bQ);for(let bS=0x0;bS<bP['drawitem']['position']['length'];bS++){let bT=bP['drawitem']['position'][bS];if(aj(bT['start'],V))continue;if(aj(bT['end'],V))continue;let bU=au(bR,bT['start']),bV=au(bR,bT['end']);switch(bT['drawType']){case b['Enum']['LINE_TYPES']['SOLID']:{am(bP),aV(e,bU['x'],bU['y'],bV['x'],bV['y']);}break;case b['Enum']['LINE_TYPES']['SHORT_DASHED']:{am(bP),e['setLineDash']([0x4,0x4]),aV(e,bU['x'],bU['y'],bV['x'],bV['y']),e['setLineDash']([]);}break;case b['Enum']['LINE_TYPES']['SOLID_ARROW']:{al(bP),aY(e,bV['x'],bV['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}break;case b['Enum']['LINE_TYPES']['SHORT_DASHED_ARROW']:{am(bP),e['setLineDash']([0x4,0x4]),aV(e,bU['x'],bU['y'],bV['x'],bV['y']),e['setLineDash']([]),e['lineWidth']=0x1,e['strokeStyle']='rgba('+bP['style']['arrow']['color']['r']+','+bP['style']['arrow']['color']['g']+','+bP['style']['arrow']['color']['b']+','+bP['style']['arrow']['color']['glAlpha']()+')',e['fillStyle']='rgba('+bP['style']['arrow']['color']['r']+','+bP['style']['arrow']['color']['g']+','+bP['style']['arrow']['color']['b']+','+bP['style']['arrow']['color']['glAlpha']()+')',aZ(e,bV['x'],bV['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}break;case b['Enum']['LINE_TYPES']['POINT']:{ao(bP),b2(e,bU['x'],bU['y'],bP['style']['point']['size']);}break;case b['Enum']['LINE_TYPES']['USER']:{am(bP),e['setLineDash'](bP['style']['line']['dash']),aV(e,bU['x'],bU['y'],bV['x'],bV['y']),e['setLineDash']([]);}break;case b['Enum']['LINE_TYPES']['USER_ARROW']:{am(bP),e['setLineDash'](bP['style']['line']['dash']),aV(e,bU['x'],bU['y'],bV['x'],bV['y']),e['setLineDash']([]),e['strokeStyle']='rgba('+bP['style']['arrow']['color']['r']+','+bP['style']['arrow']['color']['g']+','+bP['style']['arrow']['color']['b']+','+bP['style']['arrow']['color']['glAlpha']()+')',e['lineWidth']=0x1,e['fillStyle']='rgba('+bP['style']['arrow']['color']['r']+','+bP['style']['arrow']['color']['g']+','+bP['style']['arrow']['color']['b']+','+bP['style']['arrow']['color']['glAlpha']()+')',aZ(e,bV['x'],bV['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}break;}}}function aw(bP){const bQ=new b['Matrix4']();bQ['copy'](a['Camera']['cameraMatrix']);const bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bQ);let bS=bP['drawitem']['position'][0x0];if(aj(bS,V))return;let bT=0x7c,bU=0x3c,bV=au(bR,bS);ap(bP),am(bP);if(bP['drawitem']['custom']!==undefined){let bW=0x64/0x7,bX=0xa,bY=0xa;const bZ=b5(bP);bT=bZ['width']+bX*0x2;bP['drawitem']['custom']['battery']!==undefined&&(bU+=0x14);{bV['y']-=bU/0x2;}if(bP['drawitem']['custom']['progress']!==undefined){aT(e,bV['x']-bT/0x2,bV['y']-bU/0x2,bT,bU,0xa,bP['style']['background']['enable'],bP['style']['border']['enable']),aq(bP);for(let c2=0x0;c2<bP['text']['value']['length'];c2++){e['fillText'](bP['text']['value'][c2],bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY+(bZ['ascent']*c2+bZ['ascent']+bP['style']['border']['offset']*c2));}bY+=bZ['ascent']+0x6;let c0=a['Drawing']['mapCustomImage']['get']('progress'),c1=Math['floor'](bP['drawitem']['custom']['progress']/bW);e['fillStyle']='rgba('+0xff+','+0xff+','+0xff+','+0x1+')',aU(e,bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY,bT-0x14-0x2,0x12,!![],![]),e['strokeStyle']='rgba('+0x29+','+0x8f+','+0xc2+','+0.8+')',aU(e,bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY,bT-0x14-0x2,0x12,![],!![]),e['fillStyle']='rgba('+0x29+','+0x8f+','+0xc2+','+0.8+')',aU(e,bV['x']-bT/0x2+bX+0x1,bV['y']-bU/0x2+bY+0x1,(bT-0x14-0x2-0x2)/0x64*bP['drawitem']['custom']['progress'],0x10,!![],![]);}if(bP['drawitem']['custom']['battery']!==undefined){aT(e,bV['x']-bT/0x2,bV['y']-bU/0x2,bT,bU+0xa,0xa,bP['style']['background']['enable'],bP['style']['border']['enable']),bU=bZ['ascent']*bP['text']['value']['length']+0x1e,aq(bP),e['font']='bold\x20'+bP['style']['font']['size']+'pt\x20'+bP['style']['font']['face'],e['fillText'](bP['text']['value'][0x0],bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY+(bZ['ascent']*0x0+bZ['ascent']+bP['style']['border']['offset']*0x0)),bY+=0x2,aq(bP);for(let c5=0x1;c5<bP['text']['value']['length']-0x1;c5++){e['fillText'](bP['text']['value'][c5],bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY+(bZ['ascent']*c5+bZ['ascent']+bP['style']['border']['offset']*c5));}bY+=bZ['ascent']*(bP['text']['value']['length']-0x1)+0xc+0x2;let c3=a['Drawing']['mapCustomImage']['get']('battery'),c4=Math['floor'](bP['drawitem']['custom']['battery']/bW);if(c4>c3['length']-0x1)c4=c3['length']-0x1;e['strokeStyle']='rgba('+0x29+','+0x8f+','+0xc2+','+0.8+')',e['fillStyle']='rgba('+0x29+','+0x8f+','+0xc2+','+0.8+')',aU(e,bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY,bT-0x14,0x12,![],!![]),e['drawImage'](c3[c4],bV['x']-bT/0x2+bX,bV['y']-bU/0x2+bY,bT-0x14,0x12),e['strokeStyle']='rgba('+0x78+','+0x78+','+0x78+','+0x1+')',e['fillText'](bP['text']['value'][0x3],bV['x']-0x14+bX,bV['y']-bU/0x2+bY+bZ['ascent']+0x2);}if(bP['drawitem']['custom']['sign']!==undefined){if(!a['Animation']['ShowAnimationReview'])return;let c6=0x2,c7=0x2;bT=0x1c,bU=0x1c;{bV['y']-=bU/0x2;}if(bP['drawitem']['custom']['sign']['image']!==undefined){let c8;if(bP['drawitem']['custom']['sign']['image']===0x0)c8=a['Drawing']['mapCustomImage']['get']('car');else bP['drawitem']['custom']['sign']['image']===0x1&&(c8=a['Drawing']['mapCustomImage']['get']('bike'));aT(e,bV['x']-bT/0x2,bV['y']-bU/0x2,bT,bU,0xa,bP['style']['background']['enable'],bP['style']['border']['enable']),aq(bP),e['font']='bold\x20'+bP['style']['font']['size']+'pt\x20'+bP['style']['font']['face'],aq(bP),e['drawImage'](c8[0x0],bV['x']-bT/0x2+c6,bV['y']-bU/0x2+c7,0x18,0x18),e['strokeStyle']='rgba('+0x78+','+0x78+','+0x78+','+0x1+')';}}}}function ax(bP){am(bP);switch(bP['drawitem']['custom']['subType']){case b['Enum']['SKETCH_TYPES']['FREE']:{e['beginPath']();for(let bQ=0x0;bQ<bP['drawitem']['custom']['position']['length'];bQ++){if(bQ===0x0)continue;let bR=bP['drawitem']['custom']['position'][bQ-0x1],bS=bP['drawitem']['custom']['position'][bQ],bT=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](bR)),bU=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](bS));e['moveTo'](bT['x'],bT['y']),e['lineTo'](bU['x'],bU['y']);}e['stroke']();}break;case b['Enum']['SKETCH_TYPES']['LINE']:{let bV=bP['drawitem']['custom']['position'][0x0],bW=bP['drawitem']['custom']['position'][0x1],bX=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](bV)),bY=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](bW));e['beginPath'](),e['moveTo'](bX['x'],bX['y']),e['lineTo'](bY['x'],bY['y']),e['stroke']();}break;case b['Enum']['SKETCH_TYPES']['CIRCLE']:{let bZ=bP['drawitem']['custom']['position'][0x0],c0=bP['drawitem']['custom']['position'][0x1],c1=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](bZ)),c2=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](c0)),c3=0x0,c4=0x2*Math['PI'],c5=new b['Vector2']((c1['x']+c2['x'])/0x2,(c1['y']+c2['y'])/0x2),c6=new b['Vector2']()['subVectors'](c1,c2),c7=Math['abs'](c6['length']()/0x2);e['beginPath'](),e['arc'](c5['x'],c5['y'],c7,c3,c4,!![]),e['stroke']();}break;case b['Enum']['SKETCH_TYPES']['RECT']:{let c8=bP['drawitem']['custom']['position'][0x0],c9=bP['drawitem']['custom']['position'][0x1],ca=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](c8)),cb=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](c9)),cc=cb['x']-ca['x'],cd=cb['y']-ca['y'];e['beginPath'](),e['rect'](ca['x'],ca['y'],cc,cd),e['stroke']();}break;case b['Enum']['SKETCH_TYPES']['TEXT']:{if(bP['text']['value']['length']===0x0)return;if(bP['text']['position']===undefined)return;aq(bP);const ce=b5(bP);let cf=bP['text']['position'],cg=a['Camera']['world2ScreenWithMatrix'](a['Camera']['matMVP'],new b['Vector3']()['copy'](cf)),ch=ce['width']+bP['style']['border']['offset']*0x2,ci=ce['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;if(0x0){let cj=cg['x']-bP['style']['border']['offset'],ck=cg['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,cj,ck,ch,ci,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,cj,ck,ch,ci,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}e['fillStyle']='rgba('+bP['style']['font']['color']['r']+','+bP['style']['font']['color']['g']+','+bP['style']['font']['color']['b']+','+bP['style']['font']['color']['glAlpha']()+')';for(let cl=0x0;cl<bP['text']['value']['length'];cl++){e['fillText'](bP['text']['value'][cl],cg['x'],cg['y']+(ce['ascent']*cl+ce['ascent']+bP['style']['border']['offset']*cl));}}break;}}function ay(bP){if(bP['text']['value']['length']===0x0)return;if(bP['text']['position']===undefined)return;let bQ=new b['Vector3']()['copy'](bP['text']['position']),bR=[];bR[0x0]=new b['Vector3']()['copy'](bP['drawitem']['position'][0x0]);let bS=new b['Vector3'](),bT=new b['Vector3']();bP['action']!==undefined&&(bQ=bP['action']['text']['transform']['multiplyVector'](bQ),bS['copy'](bP['action']['text']['offset']),bS['x']*=d['canvas']['width'],bS['y']*=d['canvas']['height']*-0x1,bR[0x0]=bP['action']['drawitem']['transform']['multiplyVector'](bR[0x0]),bT['copy'](bP['action']['drawitem']['offset']),bT['x']*=d['canvas']['width'],bT['y']*=d['canvas']['height']*-0x1);aq(bP);const bU=b5(bP),bV=new b['Matrix4']();bV['copy'](a['Camera']['cameraMatrix']);const bW=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bV);let bX=new b['Matrix4']()['transformVector'](bW['elements'],[bQ['x'],bQ['y'],bQ['z'],0x1]);bX[0x0]/=bX[0x3],bX[0x1]/=bX[0x3];let bY=(bX[0x0]*0.5+0.5)*d['canvas']['width'],bZ=(bX[0x1]*-0.5+0.5)*d['canvas']['height'],c0=new b['Vector2'](bY,bZ);{let c3=new b['Matrix4']()['transformVector'](bW['elements'],[bR[0x0]['x'],bR[0x0]['y'],bR[0x0]['z'],0x1]);c3[0x0]/=c3[0x3],c3[0x1]/=c3[0x3];let c4=(c3[0x0]*0.5+0.5)*d['canvas']['width'],c5=(c3[0x1]*-0.5+0.5)*d['canvas']['height'],c6=new b['Vector2'](c4,c5);al(bP),aY(e,c6['x']+bT['x'],c6['y']+bT['y'],c0['x']+bT['x'],c0['y']+bT['y'],bP['style']['arrow']['size']),bP['style']['point']['enable']&&(ao(bP),b2(e,c6['x']+bT['x'],c6['y']+bT['y'],bP['style']['point']['size']));}let c1=bU['width']+bP['style']['border']['offset']*0x2,c2=bU['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;c0['x']-=c1*0.5,c0['y']-=c2*0.5;{let c7=c0['x']-bP['style']['border']['offset']+bS['x'],c8=c0['y']-bP['style']['border']['offset']+bS['y'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c7,c8,c1,c2,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c7,c8,c1,c2,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c9=0x0;c9<bP['text']['value']['length'];c9++){e['fillText'](bP['text']['value'][c9],c0['x']+bS['x'],c0['y']+bS['y']+(bU['ascent']*c9+bU['ascent']+bP['style']['border']['offset']*c9));}}}function az(bP){if(bP['text']['value']['length']===0x0)return;if(bP['text']['position']===undefined)return;let bQ=new b['Vector3']()['copy'](bP['text']['position']),bR=new b['Vector2']();bP['action']!==undefined&&(bR['copy'](bP['action']['text']['offset']),bR['x']*=d['canvas']['width'],bR['y']*=d['canvas']['height']*-0x1);e['font']=bP['style']['font']['size']+'pt\x20'+bP['style']['font']['face'];bP['style']['background']['enable']?e['fillStyle']='rgba('+bP['style']['background']['color']['r']+','+bP['style']['background']['color']['g']+','+bP['style']['background']['color']['b']+','+bP['style']['background']['color']['glAlpha']()+')':e['fillStyle']='rgba('+bP['style']['background']['color']['r']+','+bP['style']['background']['color']['g']+','+bP['style']['background']['color']['b']+','+0x0+')';bP['style']['border']['enable']?(e['strokeStyle']='rgba('+bP['style']['border']['color']['r']+','+bP['style']['border']['color']['g']+','+bP['style']['border']['color']['b']+','+bP['style']['border']['color']['glAlpha']()+')',e['lineWidth']=bP['style']['border']['thickness']):(e['strokeStyle']='rgba('+bP['style']['border']['color']['r']+','+bP['style']['border']['color']['g']+','+bP['style']['border']['color']['b']+','+0x0+')',e['lineWidth']=bP['style']['border']['thickness']);const bS=b5(bP);let bT;bT=new b['Vector2']()['copy'](bQ);let bU=bS['width']+bP['style']['border']['offset']*0x2,bV=bS['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bT['x']-=bU*0.5,bT['y']-=bV*0.5;{let bW=bT['x']-bP['style']['border']['offset']+bR['x'],bX=bT['y']-bP['style']['border']['offset']+bR['y'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,bW,bX,bU,bV,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,bW,bX,bU,bV,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}e['fillStyle']='rgba('+bP['style']['font']['color']['r']+','+bP['style']['font']['color']['g']+','+bP['style']['font']['color']['b']+','+bP['style']['font']['color']['glAlpha']()+')';for(let bY=0x0;bY<bP['text']['value']['length'];bY++){e['fillText'](bP['text']['value'][bY],bT['x']+bR['x'],bT['y']+ +bR['y']+(bS['ascent']*bY+bS['ascent']+bP['style']['border']['offset']*bY));}}function aA(bP){if(bP['text']['value']['length']===0x0)return;if(bP['text']['position']===undefined)return;let bQ=new b['Vector3']()['copy'](bP['text']['position']),bR=new b['Vector3']();bP['action']!==undefined&&(bQ=bP['action']['text']['transform']['multiplyVector'](bQ),bR['copy'](bP['action']['text']['offset']),bR['x']*=d['canvas']['width'],bR['y']*=d['canvas']['height']*-0x1);aq(bP);const bS=b5(bP),bT=new b['Matrix4']();bT['copy'](a['Camera']['cameraMatrix']);const bU=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bT);let bV=new b['Matrix4']()['transformVector'](bU['elements'],[bQ['x'],bQ['y'],bQ['z'],0x1]);bV[0x0]/=bV[0x3],bV[0x1]/=bV[0x3];let bW=(bV[0x0]*0.5+0.5)*d['canvas']['width'],bX=(bV[0x1]*-0.5+0.5)*d['canvas']['height'],bY=new b['Vector2'](bW,bX),bZ=bS['width']+bP['style']['border']['offset']*0x2,c0=bS['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bY['x']-=bZ*0.5,bY['y']-=c0*0.5;{let c1=bY['x']-bP['style']['border']['offset']+bR['x'],c2=bY['y']-bP['style']['border']['offset']+bR['y'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c1,c2,bZ,c0,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c1,c2,bZ,c0,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}e['fillStyle']='rgba('+bP['style']['font']['color']['r']+','+bP['style']['font']['color']['g']+','+bP['style']['font']['color']['b']+','+bP['style']['font']['color']['glAlpha']()+')';for(let c3=0x0;c3<bP['text']['value']['length'];c3++){e['fillText'](bP['text']['value'][c3],bY['x']+bR['x'],bY['y']+bR['y']+(bS['ascent']*c3+bS['ascent']+bP['style']['border']['offset']*c3));}}function aB(bP,bQ,bR){e['font']=0xc+'pt\x20'+'Arial';const bS=b6(bP,0xc),bT=new b['Matrix4']();bT['copy'](a['Camera']['cameraMatrix']);const bU=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bT);let bV=new b['Vector2'](bQ['x'],bQ['y']),bW=bS['width'],bX=bS['height'];bV['x']-=bW*0.5,bV['y']-=bX*0.5,e['fillStyle']='rgba('+bR['r']+','+bR['g']+','+bR['b']+','+bR['glAlpha']()+')',!![]&&(e['shadowColor']='rgba(0,\x200,\x200,\x200.2)',e['shadowOffsetX']=0x1,e['shadowOffsetY']=0x1,e['shadowBlur']=0x2),e['fillText'](bP,bV['x'],bV['y']+bS['ascent']),!![]&&(e['shadowOffsetX']=0x0,e['shadowOffsetY']=0x0,e['shadowBlur']=0x0);}function aC(bP){if(bP['text']['value']['length']===0x0)return;if(bP['text']['position']===undefined)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']();bR['copy'](a['Camera']['cameraMatrix']);const bS=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bR);let bT=new b['Matrix4']()['transformVector'](bS['elements'],[bP['text']['position']['x'],bP['text']['position']['y'],bP['text']['position']['z'],0x1]);bT[0x0]/=bT[0x3],bT[0x1]/=bT[0x3];let bU=(bT[0x0]*0.5+0.5)*d['canvas']['width'],bV=(bT[0x1]*-0.5+0.5)*d['canvas']['height'],bW=new b['Vector2'](bU,bV),bX=bQ['width']+bP['style']['border']['offset']*0x2,bY=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bW['y']-=bY*0.5;{let bZ=bW['x']-bP['style']['border']['offset'],c0=bW['y']-bP['style']['border']['offset'];ap(bP),b3(e,bZ,c0,bX,bY,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}{aq(bP);for(let c1=0x0;c1<bP['text']['value']['length'];c1++){e['fillText'](bP['text']['value'][c1],bW['x'],bW['y']+(bQ['ascent']*c1+bQ['ascent']+bP['style']['border']['offset']*c1));}}}function aD(bP){if(bP['drawitem']['custom']===undefined)return;let bQ=new b['Vector3']()['copy'](bP['text']['position']),bR=[];bR[0x0]=new b['Vector3']()['copy'](bP['drawitem']['position'][0x0]);let bS=new b['Vector3'](),bT=new b['Vector3']();bP['action']!==undefined&&(bS['copy'](bP['action']['text']['offset']),bS['x']*=d['canvas']['width'],bS['y']*=d['canvas']['height']*-0x1,bR[0x0]=bP['action']['drawitem']['transform']['multiplyVector'](bR[0x0]),bT['copy'](bP['action']['drawitem']['offset']),bT['x']*=d['canvas']['width'],bT['y']*=d['canvas']['height']*-0x1);const bU=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bV=c['Util_GetScreenPositionByMatrix'](bU,new b['Vector3']()['copy'](bR[0x0]));if(bP['drawitem']['custom']['image']!==undefined){let bW=bP['drawitem']['custom']['size']['x'],bX=bP['drawitem']['custom']['size']['y'];if(bW<=0x0)bW=bP['drawitem']['custom']['image']['width'];if(bX<=0x0)bX=bP['drawitem']['custom']['image']['height'];switch(bP['drawitem']['custom']['align']){case 0x1:break;case 0x2:{bV['x']=bV['x']-bW/0x2;}break;case 0x3:break;case 0x4:break;case 0x6:break;case 0x7:break;case 0x8:{bV['x']=bV['x']-bW/0x2,bV['y']=bV['y']-bX;}break;case 0x9:break;default:{bV['x']=bV['x']-bW/0x2,bV['y']=bV['y']-bX/0x2;}break;}e['drawImage'](bP['drawitem']['custom']['image'],bV['x']+bT['x'],bV['y']+bT['y'],bW,bX);}if(bP['text']['value']['length']!==0x0){aq(bP);const bY=b5(bP);let bZ=new b['Vector2'](bV['x']+bQ['x'],bV['y']+bQ['y']),c0=bY['width']+bP['style']['border']['offset']*0x2,c1=bY['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bZ['x']-=c0*0.5,bZ['y']-=c1*0.5;{let c2=bZ['x']-bP['style']['border']['offset']+bS,c3=bZ['y']-bP['style']['border']['offset']+bS;ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c2,c3,c0,c1,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c2,c3,c0,c1,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c4=0x0;c4<bP['text']['value']['length'];c4++){e['fillText'](bP['text']['value'][c4],bZ['x']+bS['x'],bZ['y']+bS['y']+(bY['ascent']*c4+bY['ascent']+bP['style']['border']['offset']*c4));}}}}function aE(bP){if(bP['text']['value']['length']===0x0)return;let bQ=new b['Vector3']()['copy'](bP['text']['position']),bR=[];bR[0x0]=new b['Vector3']()['copy'](bP['drawitem']['position'][0x0]);let bS=new b['Vector3'](),bT=new b['Vector3']();aq(bP);const bU=b5(bP),bV=new b['Matrix4']();bV['copy'](a['Camera']['cameraMatrix']);const bW=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bV);let bX=new b['Matrix4']()['transformVector'](bW['elements'],[bQ['x'],bQ['y'],bQ['z'],0x1]);bX[0x0]/=bX[0x3],bX[0x1]/=bX[0x3];let bY=(bX[0x0]*0.5+0.5)*d['canvas']['width'],bZ=(bX[0x1]*-0.5+0.5)*d['canvas']['height'],c0=new b['Vector2'](bY,bZ);{let c3=new b['Matrix4']()['transformVector'](bW['elements'],[bR[0x0]['x'],bR[0x0]['y'],bR[0x0]['z'],0x1]);c3[0x0]/=c3[0x3],c3[0x1]/=c3[0x3];let c4=(c3[0x0]*0.5+0.5)*d['canvas']['width'],c5=(c3[0x1]*-0.5+0.5)*d['canvas']['height'],c6=new b['Vector2'](c4,c5);al(bP),aY(e,c6['x']+bT['x'],c6['y']+bT['y'],c0['x']+bT['x'],c0['y']+bT['y'],bP['style']['arrow']['size']),bP['style']['point']['enable']&&(ao(bP),b2(e,c6['x']+bT['x'],c6['y']+bT['y'],bP['style']['point']['size']));}let c1=bU['width']+bP['style']['border']['offset']*0x2,c2=bU['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;c0['x']-=c1*0.5,c0['y']-=c2*0.5;{let c7=c0['x']-bP['style']['border']['offset']+bS['x'],c8=c0['y']-bP['style']['border']['offset']+bS['y'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c7,c8,c1,c2,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c7,c8,c1,c2,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c9=0x0;c9<bP['text']['value']['length'];c9++){e['fillText'](bP['text']['value'][c9],c0['x']+bS['x'],c0['y']+bS['y']+(bU['ascent']*c9+bU['ascent']+bP['style']['border']['offset']*c9));}}}function aF(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']();bR['copy'](a['Camera']['cameraMatrix']);const bS=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bR);let bT=new b['Matrix4']()['transformVector'](bS['elements'],[bP['text']['position']['x'],bP['text']['position']['y'],bP['text']['position']['z'],0x1]);bT[0x0]/=bT[0x3],bT[0x1]/=bT[0x3];let bU=(bT[0x0]*0.5+0.5)*d['canvas']['width'],bV=(bT[0x1]*-0.5+0.5)*d['canvas']['height'],bW=new b['Vector2'](bU,bV),bX=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1]);bX['x']/=0x2,bX['y']/=0x2,bX['z']/=0x2;let bY=new b['Vector3']()['subVectors'](bP['text']['position'],bX),bZ=[];bZ[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bY),bZ[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x1],bY);{let c2=[];for(let c3=0x0;c3<0x2;c3++){let c4=bP['drawitem']['position'][0x0];if(c3==0x1)c4=bZ[0x0];let c5=new b['Matrix4']()['transformVector'](bS['elements'],[c4['x'],c4['y'],c4['z'],0x1]);c5[0x0]/=c5[0x3],c5[0x1]/=c5[0x3];let c6=(c5[0x0]*0.5+0.5)*d['canvas']['width'],c7=(c5[0x1]*-0.5+0.5)*d['canvas']['height'];c2[c3]=new b['Vector2'](c6,c7);}am(bP),aV(e,c2[0x0]['x'],c2[0x0]['y'],c2[0x1]['x'],c2[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c2[0x0]['x'],c2[0x0]['y'],bP['style']['point']['size']));}{let c8=[];for(let c9=0x0;c9<0x2;c9++){let ca=bP['drawitem']['position'][0x1];if(c9===0x1)ca=bZ[0x1];let cb=new b['Matrix4']()['transformVector'](bS['elements'],[ca['x'],ca['y'],ca['z'],0x1]);cb[0x0]/=cb[0x3],cb[0x1]/=cb[0x3];let cc=(cb[0x0]*0.5+0.5)*d['canvas']['width'],cd=(cb[0x1]*-0.5+0.5)*d['canvas']['height'];c8[c9]=new b['Vector2'](cc,cd);}am(bP),aV(e,c8[0x0]['x'],c8[0x0]['y'],c8[0x1]['x'],c8[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c8[0x0]['x'],c8[0x0]['y'],bP['style']['point']['size']));}al(bP);{let ce=new b['Matrix4']()['transformVector'](bS['elements'],[bZ[0x0]['x'],bZ[0x0]['y'],bZ[0x0]['z'],0x1]);ce[0x0]/=ce[0x3],ce[0x1]/=ce[0x3];let cf=(ce[0x0]*0.5+0.5)*d['canvas']['width'],cg=(ce[0x1]*-0.5+0.5)*d['canvas']['height'],ch=new b['Vector2'](cf,cg);aY(e,ch['x'],ch['y'],bW['x'],bW['y'],bP['style']['arrow']['size']);}{let ci=new b['Matrix4']()['transformVector'](bS['elements'],[bZ[0x1]['x'],bZ[0x1]['y'],bZ[0x1]['z'],0x1]);ci[0x0]/=ci[0x3],ci[0x1]/=ci[0x3];let cj=(ci[0x0]*0.5+0.5)*d['canvas']['width'],ck=(ci[0x1]*-0.5+0.5)*d['canvas']['height'],cl=new b['Vector2'](cj,ck);aY(e,cl['x'],cl['y'],bW['x'],bW['y'],bP['style']['arrow']['size']);}let c0=bQ['width']+bP['style']['border']['offset']*0x2,c1=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bW['x']-=c0*0.5,bW['y']-=c1*0.5;{let cm=bW['x']-bP['style']['border']['offset'],cn=bW['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,cm,cn,c0,c1,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,cm,cn,c0,c1,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let co=0x0;co<bP['text']['value']['length'];co++){e['fillText'](bP['text']['value'][co],bW['x'],bW['y']+(bQ['ascent']*co+bQ['ascent']+bP['style']['border']['offset']*co));}}}function aG(bP){if(bP['text']['value']['length']===0x0)return;const bQ=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bR=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1]);bR['x']/=0x2,bR['y']/=0x2,bR['z']/=0x2;let bS=new b['Vector3']()['subVectors'](bP['text']['position'],bR),bT=[];bT[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bS),bT[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x1],bS);{let bW=[];bW[0x0]=b4(bQ,bP['drawitem']['position'][0x0]),bW[0x1]=b4(bQ,bT[0x0]),am(bP),aV(e,bW[0x0]['x'],bW[0x0]['y'],bW[0x1]['x'],bW[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bW[0x0]['x'],bW[0x0]['y'],bP['style']['point']['size']));}{let bX=[];bX[0x0]=b4(bQ,bP['drawitem']['position'][0x1]),bX[0x1]=b4(bQ,bT[0x1]),am(bP),aV(e,bX[0x0]['x'],bX[0x0]['y'],bX[0x1]['x'],bX[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bX[0x0]['x'],bX[0x0]['y'],bP['style']['point']['size']));}if(bP['drawitem']['axis']){let bY=[],bZ=[0xa,0xa];bY[0x0]=b4(bQ,bP['drawitem']['position'][0x0]),bY[0x1]=b4(bQ,new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x0]['y'],bP['drawitem']['position'][0x0]['z'])),bY[0x2]=b4(bQ,new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x0]['z'])),bY[0x3]=b4(bQ,bP['drawitem']['position'][0x1]);for(let c0=0x0;c0<0x3;c0++){an(bP,c0),aW(e,bY[c0]['x'],bY[c0]['y'],bY[c0+0x1]['x'],bY[c0+0x1]['y'],bZ);}}let bU=new b['Vector2'](),bV=[];{let c1=g();aq(bP);const c2=b5(bP);let c3=b4(bQ,bP['text']['position']);bU['set'](c3['x'],c3['y']);let c4=c2['width']+bP['style']['border']['offset']*0x2,c5=c2['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;c3['x']-=c4*0.5,c3['y']-=c5*0.5;{let c6=c3['x']-bP['style']['border']['offset'],c7=c3['y']-bP['style']['border']['offset'];c1['rect']['set'](c6,c7,c6+c4,c7+c5);}{for(let c8=0x0;c8<bP['text']['value']['length'];c8++){c1['position'][c8]=new b['Vector2'](c3['x'],c3['y']+(c2['ascent']*c8+c2['ascent']+bP['style']['border']['offset']*c8)),c1['text'][c8]=bP['text']['value'][c8];}}bV[0x0]=c1;}if(bP['drawitem']['axis']){let c9=[];c9[0x0]=bP['drawitem']['position'][0x0],c9[0x1]=new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x0]['y'],bP['drawitem']['position'][0x0]['z']),c9[0x2]=new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x0]['z']),c9[0x3]=bP['drawitem']['position'][0x1],aq(bP);for(let cb=0x0;cb<0x3;cb++){let cc=g(),cd=new b['Vector3']()['addVectors'](c9[cb],c9[cb+0x1]);cd['x']*=0.5,cd['y']*=0.5,cd['z']*=0.5;let ce=b4(bQ,cd),cf;if(cb===0x0)cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_X_AXIS_DISTANCE'];else{if(cb===0x1)cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_Y_AXIS_DISTANCE'];else cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_Z_AXIS_DISTANCE'];}let cg=[bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1]],ch=[];a['Measure']['UpdateReviewTextByType'](cf,ch,cg);const ci=b6(ch,bP['style']['font']['size']);let cj=ci['width']+bP['style']['border']['offset']*0x2,ck=ci['height']*ch['length']+bP['style']['border']['offset']*0x2;ce['x']-=cj*0.5,ce['y']-=ck*0.5;{let cl=ce['x']-bP['style']['border']['offset'],cm=ce['y']-bP['style']['border']['offset'];cc['rect']['set'](cl,cm,cl+cj,cm+ck);}{for(let cn=0x0;cn<ch['length'];cn++){cc['position'][cn]=new b['Vector2'](ce['x'],ce['y']+(ci['ascent']*cn+ci['ascent']+bP['style']['border']['offset']*cn)),cc['text'][cn]=ch[cn];}}bV[cb+0x1]=cc;}let ca=![];for(let co=0x0;co<bV['length'];co++){for(let cp=0x0;cp<bV['length'];cp++){if(co===cp)continue;if(bV[co]['rect']['isRectInRect'](bV[cp]['rect'])){ca=!![];break;}}if(ca)break;}if(ca){let cq=[],cr=g();for(let cw=0x0;cw<bV['length'];cw++){for(let cx=0x0;cx<bV[cw]['text']['length'];cx++){cr['text']['push'](bV[cw]['text'][cx]);}}aq(bP);const cs=b6(cr['text'],bP['style']['font']['size']);let ct=b4(bQ,bP['text']['position']),cu=cs['width']+bP['style']['border']['offset']*0x2,cv=cs['height']*cr['text']['length']+bP['style']['border']['offset']*0x2;ct['x']-=cu*0.5,ct['y']-=cv*0.5;{let cy=ct['x']-bP['style']['border']['offset'],cz=ct['y']-bP['style']['border']['offset'];cr['rect']['set'](cy,cz,cy+cu,cz+cv);}{for(let cA=0x0;cA<cr['text']['length'];cA++){cr['position'][cA]=new b['Vector2'](ct['x'],ct['y']+(cs['ascent']*cA+cs['ascent']+bP['style']['border']['offset']*cA));}}cq[0x0]=cr,bV=cq;}}al(bP);{let cB=b4(bQ,bT[0x0]);aY(e,cB['x'],cB['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}{let cC=b4(bQ,bT[0x1]);aY(e,cC['x'],cC['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}for(let cD=0x0;cD<bV['length'];cD++){{ap(bP);if(bP['style']['border']['type']===0x0)aU(e,bV[cD]['rect']['left'],bV[cD]['rect']['top'],bV[cD]['rect']['right']-bV[cD]['rect']['left'],bV[cD]['rect']['bottom']-bV[cD]['rect']['top'],bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,bV[cD]['rect']['left'],bV[cD]['rect']['top'],bV[cD]['rect']['right']-bV[cD]['rect']['left'],bV[cD]['rect']['bottom']-bV[cD]['rect']['top'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let cE=0x0;cE<bV[cD]['text']['length'];cE++){e['fillText'](bV[cD]['text'][cE],bV[cD]['position'][cE]['x'],bV[cD]['position'][cE]['y']);}}}}function aH(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']();bR['copy'](a['Camera']['cameraMatrix']);const bS=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bR);let bT=new b['Matrix4']()['transformVector'](bS['elements'],[bP['text']['position']['x'],bP['text']['position']['y'],bP['text']['position']['z'],0x1]);bT[0x0]/=bT[0x3],bT[0x1]/=bT[0x3];let bU=(bT[0x0]*0.5+0.5)*d['canvas']['width'],bV=(bT[0x1]*-0.5+0.5)*d['canvas']['height'],bW=new b['Vector2'](bU,bV);{let c0=[];for(let c1=0x0;c1<0x3;c1++){let c2=bP['drawitem']['position'][c1],c3=new b['Matrix4']()['transformVector'](bS['elements'],[c2['x'],c2['y'],c2['z'],0x1]);c3[0x0]/=c3[0x3],c3[0x1]/=c3[0x3];let c4=(c3[0x0]*0.5+0.5)*d['canvas']['width'],c5=(c3[0x1]*-0.5+0.5)*d['canvas']['height'];c0[c1]=new b['Vector2'](c4,c5);}am(bP),aV(e,c0[0x0]['x'],c0[0x0]['y'],c0[0x1]['x'],c0[0x1]['y']),aV(e,c0[0x0]['x'],c0[0x0]['y'],c0[0x2]['x'],c0[0x2]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c0[0x0]['x'],c0[0x0]['y'],bP['style']['point']['size']),b2(e,c0[0x1]['x'],c0[0x1]['y'],bP['style']['point']['size']),b2(e,c0[0x2]['x'],c0[0x2]['y'],bP['style']['point']['size']));}al(bP);let bX=b1(e,bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1],bP['drawitem']['position'][0x2],bP['style']['arrow']['size'],![]);{am(bP);let c6=new b['Matrix4']()['transformVector'](bS['elements'],[bX['x'],bX['y'],bX['z'],0x1]);c6[0x0]/=c6[0x3],c6[0x1]/=c6[0x3];let c7=(c6[0x0]*0.5+0.5)*d['canvas']['width'],c8=(c6[0x1]*-0.5+0.5)*d['canvas']['height'],c9=new b['Vector2'](c7,c8);aV(e,c9['x'],c9['y'],bW['x'],bW['y']);}let bY=bQ['width']+bP['style']['border']['offset']*0x2,bZ=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bW['x']-=bY*0.5,bW['y']-=bZ*0.5;{let ca=bW['x']-bP['style']['border']['offset'],cb=bW['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,ca,cb,bY,bZ,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,ca,cb,bY,bZ,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let cc=0x0;cc<bP['text']['value']['length'];cc++){e['fillText'](bP['text']['value'][cc],bW['x'],bW['y']+(bQ['ascent']*cc+bQ['ascent']+bP['style']['border']['offset']*cc));}}}function aI(bP){if(bP['text']['value']['length']===0x0)return;const bQ=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bR=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1]);bR['x']/=0x2,bR['y']/=0x2,bR['z']/=0x2;let bS=new b['Vector3']()['subVectors'](bP['text']['position'],bR),bT=[];bT[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bS),bT[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x1],bS);{let bW=[];bW[0x0]=b4(bQ,bP['drawitem']['position'][0x0]),bW[0x1]=b4(bQ,bT[0x0]),am(bP),aV(e,bW[0x0]['x'],bW[0x0]['y'],bW[0x1]['x'],bW[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bW[0x0]['x'],bW[0x0]['y'],bP['style']['point']['size']));}{let bX=[];bX[0x0]=b4(bQ,bP['drawitem']['position'][0x1]),bX[0x1]=b4(bQ,bT[0x1]),am(bP),aV(e,bX[0x0]['x'],bX[0x0]['y'],bX[0x1]['x'],bX[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bX[0x0]['x'],bX[0x0]['y'],bP['style']['point']['size']));}if(bP['drawitem']['axis']){let bY=[],bZ=[0xa,0xa];bY[0x0]=b4(bQ,bP['drawitem']['position'][0x0]),bY[0x1]=b4(bQ,new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x0]['y'],bP['drawitem']['position'][0x0]['z'])),bY[0x2]=b4(bQ,new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x0]['z'])),bY[0x3]=b4(bQ,bP['drawitem']['position'][0x1]);for(let c0=0x0;c0<0x3;c0++){an(bP,c0),aW(e,bY[c0]['x'],bY[c0]['y'],bY[c0+0x1]['x'],bY[c0+0x1]['y'],bZ);}}let bU=new b['Vector2'](),bV=[];{let c1=g();aq(bP);const c2=b5(bP);let c3=b4(bQ,bP['text']['position']);bU['set'](c3['x'],c3['y']);let c4=c2['width']+bP['style']['border']['offset']*0x2,c5=c2['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;c3['x']-=c4*0.5,c3['y']-=c5*0.5;{let c6=c3['x']-bP['style']['border']['offset'],c7=c3['y']-bP['style']['border']['offset'];c1['rect']['set'](c6,c7,c6+c4,c7+c5);}{for(let c8=0x0;c8<bP['text']['value']['length'];c8++){c1['position'][c8]=new b['Vector2'](c3['x'],c3['y']+(c2['ascent']*c8+c2['ascent']+bP['style']['border']['offset']*c8)),c1['text'][c8]=bP['text']['value'][c8];}}bV[0x0]=c1;}if(bP['drawitem']['axis']){let c9=[];c9[0x0]=bP['drawitem']['position'][0x0],c9[0x1]=new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x0]['y'],bP['drawitem']['position'][0x0]['z']),c9[0x2]=new b['Vector3'](bP['drawitem']['position'][0x1]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x0]['z']),c9[0x3]=bP['drawitem']['position'][0x1],aq(bP);for(let cb=0x0;cb<0x3;cb++){let cc=g(),cd=new b['Vector3']()['addVectors'](c9[cb],c9[cb+0x1]);cd['x']*=0.5,cd['y']*=0.5,cd['z']*=0.5;let ce=b4(bQ,cd),cf;if(cb===0x0)cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_X_AXIS_DISTANCE'];else{if(cb===0x1)cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_Y_AXIS_DISTANCE'];else cf=b['Enum']['REVIEW_TYPES']['RK_MEASURE_Z_AXIS_DISTANCE'];}let cg=[bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x1]],ch=[];a['Measure']['UpdateReviewTextByType'](cf,ch,cg);const ci=b6(ch,bP['style']['font']['size']);let cj=ci['width']+bP['style']['border']['offset']*0x2,ck=ci['height']*ch['length']+bP['style']['border']['offset']*0x2;ce['x']-=cj*0.5,ce['y']-=ck*0.5;{let cl=ce['x']-bP['style']['border']['offset'],cm=ce['y']-bP['style']['border']['offset'];cc['rect']['set'](cl,cm,cl+cj,cm+ck);}{for(let cn=0x0;cn<ch['length'];cn++){cc['position'][cn]=new b['Vector2'](ce['x'],ce['y']+(ci['ascent']*cn+ci['ascent']+bP['style']['border']['offset']*cn)),cc['text'][cn]=ch[cn];}}bV[cb+0x1]=cc;}let ca=![];for(let co=0x0;co<bV['length'];co++){for(let cp=0x0;cp<bV['length'];cp++){if(co===cp)continue;if(bV[co]['rect']['isRectInRect'](bV[cp]['rect'])){ca=!![];break;}}if(ca)break;}if(ca){let cq=[],cr=g();for(let cw=0x0;cw<bV['length'];cw++){for(let cx=0x0;cx<bV[cw]['text']['length'];cx++){cr['text']['push'](bV[cw]['text'][cx]);}}aq(bP);const cs=b6(cr['text'],bP['style']['font']['size']);let ct=b4(bQ,bP['text']['position']),cu=cs['width']+bP['style']['border']['offset']*0x2,cv=cs['height']*cr['text']['length']+bP['style']['border']['offset']*0x2;ct['x']-=cu*0.5,ct['y']-=cv*0.5;{let cy=ct['x']-bP['style']['border']['offset'],cz=ct['y']-bP['style']['border']['offset'];cr['rect']['set'](cy,cz,cy+cu,cz+cv);}{for(let cA=0x0;cA<cr['text']['length'];cA++){cr['position'][cA]=new b['Vector2'](ct['x'],ct['y']+(cs['ascent']*cA+cs['ascent']+bP['style']['border']['offset']*cA));}}cq[0x0]=cr,bV=cq;}}al(bP);{let cB=b4(bQ,bT[0x0]);aY(e,cB['x'],cB['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}{let cC=b4(bQ,bT[0x1]);aY(e,cC['x'],cC['y'],bU['x'],bU['y'],bP['style']['arrow']['size']);}for(let cD=0x0;cD<bV['length'];cD++){{ap(bP);if(bP['style']['border']['type']===0x0)aU(e,bV[cD]['rect']['left'],bV[cD]['rect']['top'],bV[cD]['rect']['right']-bV[cD]['rect']['left'],bV[cD]['rect']['bottom']-bV[cD]['rect']['top'],bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,bV[cD]['rect']['left'],bV[cD]['rect']['top'],bV[cD]['rect']['right']-bV[cD]['rect']['left'],bV[cD]['rect']['bottom']-bV[cD]['rect']['top'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let cE=0x0;cE<bV[cD]['text']['length'];cE++){e['fillText'](bV[cD]['text'][cE],bV[cD]['position'][cE]['x'],bV[cD]['position'][cE]['y']);}}}}function aJ(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x3]);bT['x']/=0x2,bT['y']/=0x2,bT['z']/=0x2;let bU=new b['Vector3']()['subVectors'](bP['text']['position'],bT),bV=[];bV[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU),bV[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x3],bU);{let bY=[];bY[0x0]=b4(bR,bP['drawitem']['position'][0x0]),bY[0x1]=b4(bR,bV[0x0]),am(bP),aV(e,bY[0x0]['x'],bY[0x0]['y'],bY[0x1]['x'],bY[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bY[0x0]['x'],bY[0x0]['y'],bP['style']['point']['size']));}{let bZ=[];bZ[0x0]=b4(bR,bP['drawitem']['position'][0x3]),bZ[0x1]=b4(bR,bV[0x1]),am(bP),aV(e,bZ[0x0]['x'],bZ[0x0]['y'],bZ[0x1]['x'],bZ[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bZ[0x0]['x'],bZ[0x0]['y'],bP['style']['point']['size']));}{let c0=[],c1=[0xa,0xa];c0[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c0[0x1]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x2]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x3]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x3]=b4(bR,bP['drawitem']['position'][0x3]),am(bP);for(let c2=0x0;c2<0x3;c2++){aW(e,c0[c2]['x'],c0[c2]['y'],c0[c2+0x1]['x'],c0[c2+0x1]['y'],c1);}}al(bP);{let c3=b4(bR,bV[0x0]);aY(e,c3['x'],c3['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c4=b4(bR,bV[0x1]);aY(e,c4['x'],c4['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bW=bQ['width']+bP['style']['border']['offset']*0x2,bX=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bW*0.5,bS['y']-=bX*0.5;{let c5=bS['x']-bP['style']['border']['offset'],c6=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c5,c6,bW,bX,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c5,c6,bW,bX,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c7=0x0;c7<bP['text']['value']['length'];c7++){e['fillText'](bP['text']['value'][c7],bS['x'],bS['y']+(bQ['ascent']*c7+bQ['ascent']+bP['style']['border']['offset']*c7));}}}function aK(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x3]);bT['x']/=0x2,bT['y']/=0x2,bT['z']/=0x2;let bU=new b['Vector3']()['subVectors'](bP['text']['position'],bT),bV=[];bV[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU),bV[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x3],bU);{let bY=[];bY[0x0]=b4(bR,bP['drawitem']['position'][0x0]),bY[0x1]=b4(bR,bV[0x0]),am(bP),aV(e,bY[0x0]['x'],bY[0x0]['y'],bY[0x1]['x'],bY[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bY[0x0]['x'],bY[0x0]['y'],bP['style']['point']['size']));}{let bZ=[];bZ[0x0]=b4(bR,bP['drawitem']['position'][0x3]),bZ[0x1]=b4(bR,bV[0x1]),am(bP),aV(e,bZ[0x0]['x'],bZ[0x0]['y'],bZ[0x1]['x'],bZ[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bZ[0x0]['x'],bZ[0x0]['y'],bP['style']['point']['size']));}{let c0=[],c1=[0xa,0xa];c0[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c0[0x1]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x2]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x3]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x3]=b4(bR,bP['drawitem']['position'][0x3]),am(bP);for(let c2=0x0;c2<0x3;c2++){aW(e,c0[c2]['x'],c0[c2]['y'],c0[c2+0x1]['x'],c0[c2+0x1]['y'],c1);}}al(bP);{let c3=b4(bR,bV[0x0]);aY(e,c3['x'],c3['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c4=b4(bR,bV[0x1]);aY(e,c4['x'],c4['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bW=bQ['width']+bP['style']['border']['offset']*0x2,bX=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bW*0.5,bS['y']-=bX*0.5;{let c5=bS['x']-bP['style']['border']['offset'],c6=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c5,c6,bW,bX,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c5,c6,bW,bX,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c7=0x0;c7<bP['text']['value']['length'];c7++){e['fillText'](bP['text']['value'][c7],bS['x'],bS['y']+(bQ['ascent']*c7+bQ['ascent']+bP['style']['border']['offset']*c7));}}}function aL(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bP['drawitem']['position'][0x3]);bT['x']/=0x2,bT['y']/=0x2,bT['z']/=0x2;let bU=new b['Vector3']()['subVectors'](bP['text']['position'],bT),bV=[];bV[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU),bV[0x1]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x3],bU);{let bY=[];bY[0x0]=b4(bR,bP['drawitem']['position'][0x0]),bY[0x1]=b4(bR,bV[0x0]),am(bP),aV(e,bY[0x0]['x'],bY[0x0]['y'],bY[0x1]['x'],bY[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bY[0x0]['x'],bY[0x0]['y'],bP['style']['point']['size']));}{let bZ=[];bZ[0x0]=b4(bR,bP['drawitem']['position'][0x3]),bZ[0x1]=b4(bR,bV[0x1]),am(bP),aV(e,bZ[0x0]['x'],bZ[0x0]['y'],bZ[0x1]['x'],bZ[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,bZ[0x0]['x'],bZ[0x0]['y'],bP['style']['point']['size']));}{let c0=[],c1=[0xa,0xa];c0[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c0[0x1]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x2]=b4(bR,new b['Vector3'](bP['drawitem']['position'][0x3]['x'],bP['drawitem']['position'][0x3]['y'],bP['drawitem']['position'][0x1]['z'])),c0[0x3]=b4(bR,bP['drawitem']['position'][0x3]),am(bP);for(let c2=0x0;c2<0x3;c2++){aW(e,c0[c2]['x'],c0[c2]['y'],c0[c2+0x1]['x'],c0[c2+0x1]['y'],c1);}}al(bP);{let c3=b4(bR,bV[0x0]);aY(e,c3['x'],c3['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c4=b4(bR,bV[0x1]);aY(e,c4['x'],c4['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bW=bQ['width']+bP['style']['border']['offset']*0x2,bX=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bW*0.5,bS['y']-=bX*0.5;{let c5=bS['x']-bP['style']['border']['offset'],c6=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c5,c6,bW,bX,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c5,c6,bW,bX,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c7=0x0;c7<bP['text']['value']['length'];c7++){e['fillText'](bP['text']['value'][c7],bS['x'],bS['y']+(bQ['ascent']*c7+bQ['ascent']+bP['style']['border']['offset']*c7));}}}function aM(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=bP['drawitem']['position'][0x1]['x']-bP['drawitem']['position'][0x0]['x'],bU=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],new b['Vector3'](0x1,0x0,0x0)['multiplyScalar'](bT)),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU);bV['x']/=0x2,bV['y']/=0x2,bV['z']/=0x2;let bW=new b['Vector3']()['subVectors'](bP['text']['position'],bV),bX=[];bX[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bW),bX[0x1]=new b['Vector3']()['addVectors'](bU,bW);{let c0=[];c0[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c0[0x1]=b4(bR,bX[0x0]),am(bP),aV(e,c0[0x0]['x'],c0[0x0]['y'],c0[0x1]['x'],c0[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c0[0x0]['x'],c0[0x0]['y'],bP['style']['point']['size']));}{let c1=[];c1[0x0]=b4(bR,bU),c1[0x1]=b4(bR,bX[0x1]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[],c3=[0xa,0xa];c2[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c2[0x1]=b4(bR,new b['Vector3'](bU['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x2]=b4(bR,new b['Vector3'](bU['x'],bU['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x3]=b4(bR,bU),am(bP);for(let c4=0x0;c4<0x3;c4++){aW(e,c2[c4]['x'],c2[c4]['y'],c2[c4+0x1]['x'],c2[c4+0x1]['y'],c3);}}al(bP);{let c5=b4(bR,bX[0x0]);aY(e,c5['x'],c5['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c6=b4(bR,bX[0x1]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bY=bQ['width']+bP['style']['border']['offset']*0x2,bZ=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bY*0.5,bS['y']-=bZ*0.5;{let c7=bS['x']-bP['style']['border']['offset'],c8=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c7,c8,bY,bZ,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c7,c8,bY,bZ,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c9=0x0;c9<bP['text']['value']['length'];c9++){e['fillText'](bP['text']['value'][c9],bS['x'],bS['y']+(bQ['ascent']*c9+bQ['ascent']+bP['style']['border']['offset']*c9));}}}function aN(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=bP['drawitem']['position'][0x1]['y']-bP['drawitem']['position'][0x0]['y'],bU=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],new b['Vector3'](0x0,0x1,0x0)['multiplyScalar'](bT)),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU);bV['x']/=0x2,bV['y']/=0x2,bV['z']/=0x2;let bW=new b['Vector3']()['subVectors'](bP['text']['position'],bV),bX=[];bX[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bW),bX[0x1]=new b['Vector3']()['addVectors'](bU,bW);{let c0=[];c0[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c0[0x1]=b4(bR,bX[0x0]),am(bP),aV(e,c0[0x0]['x'],c0[0x0]['y'],c0[0x1]['x'],c0[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c0[0x0]['x'],c0[0x0]['y'],bP['style']['point']['size']));}{let c1=[];c1[0x0]=b4(bR,bU),c1[0x1]=b4(bR,bX[0x1]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[],c3=[0xa,0xa];c2[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c2[0x1]=b4(bR,new b['Vector3'](bU['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x2]=b4(bR,new b['Vector3'](bU['x'],bU['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x3]=b4(bR,bU),am(bP);for(let c4=0x0;c4<0x3;c4++){aW(e,c2[c4]['x'],c2[c4]['y'],c2[c4+0x1]['x'],c2[c4+0x1]['y'],c3);}}al(bP);{let c5=b4(bR,bX[0x0]);aY(e,c5['x'],c5['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c6=b4(bR,bX[0x1]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bY=bQ['width']+bP['style']['border']['offset']*0x2,bZ=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bY*0.5,bS['y']-=bZ*0.5;{let c7=bS['x']-bP['style']['border']['offset'],c8=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c7,c8,bY,bZ,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c7,c8,bY,bZ,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c9=0x0;c9<bP['text']['value']['length'];c9++){e['fillText'](bP['text']['value'][c9],bS['x'],bS['y']+(bQ['ascent']*c9+bQ['ascent']+bP['style']['border']['offset']*c9));}}}function aO(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=bP['drawitem']['position'][0x1]['z']-bP['drawitem']['position'][0x0]['z'],bU=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],new b['Vector3'](0x0,0x0,0x1)['multiplyScalar'](bT)),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bU);bV['x']/=0x2,bV['y']/=0x2,bV['z']/=0x2;let bW=new b['Vector3']()['subVectors'](bP['text']['position'],bV),bX=[];bX[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bW),bX[0x1]=new b['Vector3']()['addVectors'](bU,bW);{let c0=[];c0[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c0[0x1]=b4(bR,bX[0x0]),am(bP),aV(e,c0[0x0]['x'],c0[0x0]['y'],c0[0x1]['x'],c0[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c0[0x0]['x'],c0[0x0]['y'],bP['style']['point']['size']));}{let c1=[];c1[0x0]=b4(bR,bU),c1[0x1]=b4(bR,bX[0x1]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[],c3=[0xa,0xa];c2[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c2[0x1]=b4(bR,new b['Vector3'](bU['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x2]=b4(bR,new b['Vector3'](bU['x'],bU['y'],bP['drawitem']['position'][0x1]['z'])),c2[0x3]=b4(bR,bU),am(bP);for(let c4=0x0;c4<0x3;c4++){aW(e,c2[c4]['x'],c2[c4]['y'],c2[c4+0x1]['x'],c2[c4+0x1]['y'],c3);}}al(bP);{let c5=b4(bR,bX[0x0]);aY(e,c5['x'],c5['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c6=b4(bR,bX[0x1]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bY=bQ['width']+bP['style']['border']['offset']*0x2,bZ=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bY*0.5,bS['y']-=bZ*0.5;{let c7=bS['x']-bP['style']['border']['offset'],c8=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c7,c8,bY,bZ,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c7,c8,bY,bZ,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c9=0x0;c9<bP['text']['value']['length'];c9++){e['fillText'](bP['text']['value'][c9],bS['x'],bS['y']+(bQ['ascent']*c9+bQ['ascent']+bP['style']['border']['offset']*c9));}}}function aP(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['subVectors'](bP['drawitem']['position'][0x1],bP['drawitem']['position'][0x0]);bT['z']=0x0;let bU=bT['length'](),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bT),bW=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bV);bW['x']/=0x2,bW['y']/=0x2,bW['z']/=0x2;let bX=new b['Vector3']()['subVectors'](bP['text']['position'],bW),bY=[];bY[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bX),bY[0x1]=new b['Vector3']()['addVectors'](bV,bX);{let c1=[];c1[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c1[0x1]=b4(bR,bY[0x0]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[];c2[0x0]=b4(bR,bV),c2[0x1]=b4(bR,bY[0x1]),am(bP),aV(e,c2[0x0]['x'],c2[0x0]['y'],c2[0x1]['x'],c2[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c2[0x0]['x'],c2[0x0]['y'],bP['style']['point']['size']));}{let c3=[],c4=[0xa,0xa];c3[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c3[0x1]=b4(bR,new b['Vector3'](bV['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x2]=b4(bR,new b['Vector3'](bV['x'],bV['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x3]=b4(bR,bV),am(bP);for(let c5=0x0;c5<0x3;c5++){aW(e,c3[c5]['x'],c3[c5]['y'],c3[c5+0x1]['x'],c3[c5+0x1]['y'],c4);}}al(bP);{let c6=b4(bR,bY[0x0]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c7=b4(bR,bY[0x1]);aY(e,c7['x'],c7['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bZ=bQ['width']+bP['style']['border']['offset']*0x2,c0=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bZ*0.5,bS['y']-=c0*0.5;{let c8=bS['x']-bP['style']['border']['offset'],c9=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c8,c9,bZ,c0,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c8,c9,bZ,c0,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let ca=0x0;ca<bP['text']['value']['length'];ca++){e['fillText'](bP['text']['value'][ca],bS['x'],bS['y']+(bQ['ascent']*ca+bQ['ascent']+bP['style']['border']['offset']*ca));}}}function aQ(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['subVectors'](bP['drawitem']['position'][0x1],bP['drawitem']['position'][0x0]);bT['x']=0x0;let bU=bT['length'](),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bT),bW=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bV);bW['x']/=0x2,bW['y']/=0x2,bW['z']/=0x2;let bX=new b['Vector3']()['subVectors'](bP['text']['position'],bW),bY=[];bY[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bX),bY[0x1]=new b['Vector3']()['addVectors'](bV,bX);{let c1=[];c1[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c1[0x1]=b4(bR,bY[0x0]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[];c2[0x0]=b4(bR,bV),c2[0x1]=b4(bR,bY[0x1]),am(bP),aV(e,c2[0x0]['x'],c2[0x0]['y'],c2[0x1]['x'],c2[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c2[0x0]['x'],c2[0x0]['y'],bP['style']['point']['size']));}{let c3=[],c4=[0xa,0xa];c3[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c3[0x1]=b4(bR,new b['Vector3'](bV['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x2]=b4(bR,new b['Vector3'](bV['x'],bV['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x3]=b4(bR,bV),am(bP);for(let c5=0x0;c5<0x3;c5++){aW(e,c3[c5]['x'],c3[c5]['y'],c3[c5+0x1]['x'],c3[c5+0x1]['y'],c4);}}al(bP);{let c6=b4(bR,bY[0x0]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c7=b4(bR,bY[0x1]);aY(e,c7['x'],c7['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bZ=bQ['width']+bP['style']['border']['offset']*0x2,c0=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bZ*0.5,bS['y']-=c0*0.5;{let c8=bS['x']-bP['style']['border']['offset'],c9=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c8,c9,bZ,c0,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c8,c9,bZ,c0,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let ca=0x0;ca<bP['text']['value']['length'];ca++){e['fillText'](bP['text']['value'][ca],bS['x'],bS['y']+(bQ['ascent']*ca+bQ['ascent']+bP['style']['border']['offset']*ca));}}}function aR(bP){if(bP['text']['value']['length']===0x0)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=new b['Vector3']()['subVectors'](bP['drawitem']['position'][0x1],bP['drawitem']['position'][0x0]);bT['y']=0x0;let bU=bT['length'](),bV=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bT),bW=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bV);bW['x']/=0x2,bW['y']/=0x2,bW['z']/=0x2;let bX=new b['Vector3']()['subVectors'](bP['text']['position'],bW),bY=[];bY[0x0]=new b['Vector3']()['addVectors'](bP['drawitem']['position'][0x0],bX),bY[0x1]=new b['Vector3']()['addVectors'](bV,bX);{let c1=[];c1[0x0]=b4(bR,bP['drawitem']['position'][0x0]),c1[0x1]=b4(bR,bY[0x0]),am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c1[0x0]['x'],c1[0x0]['y'],bP['style']['point']['size']));}{let c2=[];c2[0x0]=b4(bR,bV),c2[0x1]=b4(bR,bY[0x1]),am(bP),aV(e,c2[0x0]['x'],c2[0x0]['y'],c2[0x1]['x'],c2[0x1]['y']),bP['style']['point']['enable']&&(ao(bP),b2(e,c2[0x0]['x'],c2[0x0]['y'],bP['style']['point']['size']));}{let c3=[],c4=[0xa,0xa];c3[0x0]=b4(bR,bP['drawitem']['position'][0x1]),c3[0x1]=b4(bR,new b['Vector3'](bV['x'],bP['drawitem']['position'][0x1]['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x2]=b4(bR,new b['Vector3'](bV['x'],bV['y'],bP['drawitem']['position'][0x1]['z'])),c3[0x3]=b4(bR,bV),am(bP);for(let c5=0x0;c5<0x3;c5++){aW(e,c3[c5]['x'],c3[c5]['y'],c3[c5+0x1]['x'],c3[c5+0x1]['y'],c4);}}al(bP);{let c6=b4(bR,bY[0x0]);aY(e,c6['x'],c6['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}{let c7=b4(bR,bY[0x1]);aY(e,c7['x'],c7['y'],bS['x'],bS['y'],bP['style']['arrow']['size']);}let bZ=bQ['width']+bP['style']['border']['offset']*0x2,c0=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bZ*0.5,bS['y']-=c0*0.5;{let c8=bS['x']-bP['style']['border']['offset'],c9=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c8,c9,bZ,c0,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c8,c9,bZ,c0,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let ca=0x0;ca<bP['text']['value']['length'];ca++){e['fillText'](bP['text']['value'][ca],bS['x'],bS['y']+(bQ['ascent']*ca+bQ['ascent']+bP['style']['border']['offset']*ca));}}}function aS(bP){if(bP['text']['value']['length']===0x0)return;if(bP['drawitem']['position']['length']<0x3)return;aq(bP);const bQ=b5(bP),bR=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bS=b4(bR,bP['text']['position']),bT=[],bU,bV,bW;for(let bZ=0x0;bZ<bP['drawitem']['position']['length'];bZ++){bT[bZ]=b4(bR,bP['drawitem']['position'][bZ]),bZ===0x0?(bV=new b['Vector3']()['copy'](bP['drawitem']['position'][bZ]),bW=new b['Vector3']()['copy'](bP['drawitem']['position'][bZ])):(bV['min'](bP['drawitem']['position'][bZ]),bW['max'](bP['drawitem']['position'][bZ]));}bU=new b['Vector3']((bV['x']+bW['x'])*0.5,(bV['y']+bW['y'])*0.5,(bV['z']+bW['z'])*0.5),ar(bP),b0(e,bT);{am(bP),aX(e,bT),aV(e,bT[0x0]['x'],bT[0x0]['y'],bT[bT['length']-0x1]['x'],bT[bT['length']-0x1]['y']);}{ao(bP);for(let c0=0x0;c0<bT['length'];c0++){b2(e,bT[c0]['x'],bT[c0]['y'],bP['style']['point']['size']);}}{let c1=[];c1[0x0]=b4(bR,bU),c1[0x1]=bS,am(bP),aV(e,c1[0x0]['x'],c1[0x0]['y'],c1[0x1]['x'],c1[0x1]['y']);}let bX=bQ['width']+bP['style']['border']['offset']*0x2,bY=bQ['height']*bP['text']['value']['length']+bP['style']['border']['offset']*0x2;bS['x']-=bX*0.5,bS['y']-=bY*0.5;{let c2=bS['x']-bP['style']['border']['offset'],c3=bS['y']-bP['style']['border']['offset'];ap(bP);if(bP['style']['border']['type']===0x0)aU(e,c2,c3,bX,bY,bP['style']['background']['enable'],bP['style']['border']['enable']);else{if(bP['style']['border']['type']===0x1)aT(e,c2,c3,bX,bY,bP['style']['border']['round'],bP['style']['background']['enable'],bP['style']['border']['enable']);}}{aq(bP);for(let c4=0x0;c4<bP['text']['value']['length'];c4++){e['fillText'](bP['text']['value'][c4],bS['x'],bS['y']+(bQ['ascent']*c4+bQ['ascent']+bP['style']['border']['offset']*c4));}}}function aT(bP,bQ,bR,bS,bT,bU,bV,bW){bP['beginPath'](),bP['moveTo'](bQ+bU,bR),bP['lineTo'](bQ+bS-bU,bR),bP['quadraticCurveTo'](bQ+bS,bR,bQ+bS,bR+bU),bP['lineTo'](bQ+bS,bR+bT-bU),bP['quadraticCurveTo'](bQ+bS,bR+bT,bQ+bS-bU,bR+bT),bP['lineTo'](bQ+bU,bR+bT),bP['quadraticCurveTo'](bQ,bR+bT,bQ,bR+bT-bU),bP['lineTo'](bQ,bR+bU),bP['quadraticCurveTo'](bQ,bR,bQ+bU,bR),bP['closePath']();if(bV)bP['fill']();if(bW)bP['stroke']();}function aU(bP,bQ,bR,bS,bT,bU,bV){if(bU)bP['fillRect'](bQ,bR,bS,bT);if(bV)bP['strokeRect'](bQ,bR,bS,bT);}this['Util_draw_Rect']=function(bP,bQ,bR,bS,bT,bU,bV){aU(bP,bQ,bR,bS,bT,bU,bV);};function aV(bP,bQ,bR,bS,bT){bP['beginPath'](),bP['moveTo'](bQ,bR),bP['lineTo'](bS,bT),bP['stroke']();}this['Util_draw_Line']=function(bP,bQ,bR,bS,bT){aV(bP,bQ,bR,bS,bT);};function aW(bP,bQ,bR,bS,bT,bU){bP['beginPath'](),bP['setLineDash'](bU),bP['moveTo'](bQ,bR),bP['lineTo'](bS,bT),bP['stroke'](),bP['setLineDash']([]);}this['Util_draw_LineDash']=function(bP,bQ,bR,bS,bT,bU){aW(bP,bQ,bR,bS,bT,bU);};function aX(bP,bQ){bP['beginPath'](),bP['moveTo'](bQ[0x0]['x'],bQ[0x0]['y']);for(let bR=0x1;bR<bQ['length'];bR++){bP['lineTo'](bQ[bR]['x'],bQ[bR]['y']);}bP['stroke']();};function aY(bP,bQ,bR,bS,bT,bU){let bV=new b['Vector3'](bQ,bR,0x0),bW=new b['Vector3'](bS,bT,0x0),bX=new b['Vector3']()['subVectors'](bW,bV);bX['normalize']();let bY=new b['Vector3'](0x0,0x0,0x1);bY['cross'](bX),bY['normalize'](),bP['beginPath'](),bP['moveTo'](bQ+bX['x']*bU/0x2,bR+bX['y']*bU/0x2),bP['lineTo'](bS,bT),bP['stroke']();let bZ=bQ+bX['x']*bU,c0=bR+bX['y']*bU;bP['beginPath'](),bP['moveTo'](bQ,bR),bP['lineTo'](bZ+bY['x']*bU/0x2,c0+bY['y']*bU/0x2),bP['lineTo'](bZ-bY['x']*bU/0x2,c0-bY['y']*bU/0x2),bP['stroke'](),bP['fill']();}this['Util_draw_Arrow']=function(bP,bQ,bR,bS,bT,bU){aY(bP,bQ,bR,bS,bT,bU);};function aZ(bP,bQ,bR,bS,bT,bU){let bV=new b['Vector3'](bQ,bR,0x0),bW=new b['Vector3'](bS,bT,0x0),bX=new b['Vector3']()['subVectors'](bW,bV);bX['normalize']();let bY=new b['Vector3'](0x0,0x0,0x1);bY['cross'](bX),bY['normalize']();let bZ=bQ+bX['x']*bU,c0=bR+bX['y']*bU;bP['beginPath'](),bP['moveTo'](bQ,bR),bP['lineTo'](bZ+bY['x']*bU/0x2,c0+bY['y']*bU/0x2),bP['lineTo'](bZ-bY['x']*bU/0x2,c0-bY['y']*bU/0x2),bP['stroke'](),bP['fill']();}this['Util_draw_Triangle']=function(bP,bQ,bR,bS,bT,bU){aZ(bP,bQ,bR,bS,bT,bU);};function b0(bP,bQ){for(let bR=0x0;bR<bQ['length']-0x2;bR++){bP['beginPath'](),bP['moveTo'](bQ[0x0]['x'],bQ[0x0]['y']),bP['lineTo'](bQ[bR+0x1]['x'],bQ[bR+0x1]['y']),bP['lineTo'](bQ[bR+0x2]['x'],bQ[bR+0x2]['y']),bP['stroke'](),bP['fill']();}}function b1(bP,bQ,bR,bS,bT,bU){const bV=new b['Matrix4']();bV['copy'](a['Camera']['cameraMatrix']);const bW=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bV);let bX,bY,bZ,c0;bZ=new b['Vector3']()['subVectors'](bR,bQ),c0=new b['Vector3']()['subVectors'](bS,bQ);let c1=Math['min'](bZ['length'](),c0['length']())/0x3,c2,c3,c4;c2=new b['Vector3']()['copy'](bZ),c3=new b['Vector3']()['copy'](c0),c4=new b['Vector3']()['crossVectors'](c2,c3),c3=new b['Vector3']()['crossVectors'](c2,c4),c2['normalize'](),c3['normalize'](),bZ['normalize'](),c0['normalize']();let c5=Math['acos'](bZ['dot'](c0));bU&&(c5=(Math['PI']*0x2-c5)*-0x1);let c6=[],c7=0x1e;for(let c8=0x0;c8<=c7;c8++){let c9=-(c8/c7)*c5,ca=new b['Vector3']()['copy'](c2)['multiplyScalar'](Math['cos'](c9))['multiplyScalar'](c1),cb=new b['Vector3']()['copy'](c3)['multiplyScalar'](Math['sin'](c9))['multiplyScalar'](c1),cc=new b['Vector3']()['addVectors'](ca,cb);c6[c8]=cc['add'](bQ);}bP['beginPath']();for(let cd=0x0;cd<=c7;cd++){let ce=new b['Matrix4']()['transformVector'](bW['elements'],[c6[cd]['x'],c6[cd]['y'],c6[cd]['z'],0x1]);ce[0x0]/=ce[0x3],ce[0x1]/=ce[0x3];let cf=(ce[0x0]*0.5+0.5)*d['canvas']['width'],cg=(ce[0x1]*-0.5+0.5)*d['canvas']['height'];if(cd===0x0)bP['moveTo'](cf,cg);else bP['lineTo'](cf,cg);}bP['stroke']();{let ch=new b['Matrix4']()['transformVector'](bW['elements'],[c6[0x0]['x'],c6[0x0]['y'],c6[0x0]['z'],0x1]),ci=new b['Matrix4']()['transformVector'](bW['elements'],[c6[0x1]['x'],c6[0x1]['y'],c6[0x1]['z'],0x1]);ch[0x0]/=ch[0x3],ch[0x1]/=ch[0x3],ci[0x0]/=ci[0x3],ci[0x1]/=ci[0x3];let cj=(ch[0x0]*0.5+0.5)*d['canvas']['width'],ck=(ch[0x1]*-0.5+0.5)*d['canvas']['height'],cl=(ci[0x0]*0.5+0.5)*d['canvas']['width'],cm=(ci[0x1]*-0.5+0.5)*d['canvas']['height'];aY(bP,cj,ck,cl,cm,bT);}{let cn=new b['Matrix4']()['transformVector'](bW['elements'],[c6[c7]['x'],c6[c7]['y'],c6[c7]['z'],0x1]),co=new b['Matrix4']()['transformVector'](bW['elements'],[c6[c7-0x1]['x'],c6[c7-0x1]['y'],c6[c7-0x1]['z'],0x1]);cn[0x0]/=cn[0x3],cn[0x1]/=cn[0x3],co[0x0]/=co[0x3],co[0x1]/=co[0x3];let cp=(cn[0x0]*0.5+0.5)*d['canvas']['width'],cq=(cn[0x1]*-0.5+0.5)*d['canvas']['height'],cr=(co[0x0]*0.5+0.5)*d['canvas']['width'],cs=(co[0x1]*-0.5+0.5)*d['canvas']['height'];aY(bP,cp,cq,cr,cs,bT);}return c6[c7/0x2];}this['Util_draw_Angle']=function(bP,bQ,bR,bS,bT,bU){b1(bP,bQ,bR,bS,bT,bU);};function b2(bP,bQ,bR,bS){bP['beginPath'](),bP['arc'](bQ,bR,bS,0x0,Math['PI']*0x2),bP['fill']();}this['Util_draw_Point']=function(bP,bQ,bR,bS){b2(bP,bQ,bR,bS);};function b3(bP,bQ,bR,bS,bT,bU,bV,bW){let bX=0x5;if(bS<bX)bS=bX;bP['beginPath'](),bP['moveTo'](bQ+bU,bR),bP['lineTo'](bQ+bS-bU,bR),bP['quadraticCurveTo'](bQ+bS,bR,bQ+bS,bR+bU),bP['lineTo'](bQ+bS,bR+bT-bU),bP['quadraticCurveTo'](bQ+bS,bR+bT,bQ+bS-bU,bR+bT),bP['lineTo'](bQ+bX,bR+bT),bP['lineTo'](bQ,bR+bT+bX),bP['lineTo'](bQ,bR+bT),bP['lineTo'](bQ,bR+bU),bP['quadraticCurveTo'](bQ,bR,bQ+bU,bR),bP['closePath']();if(bV)bP['fill']();if(bW)bP['stroke']();}function b4(bP,bQ){let bR=new b['Matrix4']()['transformVector'](bP['elements'],[bQ['x'],bQ['y'],bQ['z'],0x1]);bR[0x0]/=bR[0x3],bR[0x1]/=bR[0x3];let bS=(bR[0x0]*0.5+0.5)*d['canvas']['width'],bT=(bR[0x1]*-0.5+0.5)*d['canvas']['height'];return new b['Vector2'](bS,bT);}this['Util_GetScreenPositionByMatrix']=function(bP,bQ){return b4(bP,bQ);};function b5(bP){let bQ;for(let bR=0x0;bR<bP['text']['value']['length'];bR++){let bS=e['measureText'](bP['text']['value'][bR]);if(bR===0x0)bQ=bS;else{if(bQ['width']<bS['width'])bQ=bS;}}return bP['text']['value']['length']>0x0&&(bQ['height']=bP['style']['font']['size']*1.5,bQ['ascent']=bP['style']['font']['size']+bP['style']['font']['size']*0.1),bQ;}function b6(bP,bQ){return c['Util_GetTextMetricsByText'](e,bP,bQ);}function b7(bP,bQ){bQ=bQ||'Hg';let bR=$('<span>'+bQ+'</span>')['css']({'font':bP}),bS=$('<div\x20style=\x22display:\x20inline-block;\x20width:\x201px;\x20height:\x200px;\x22></div>'),bT=$('<div></div>');bT['append'](bR,bS);let bU=$('body');bU['append'](bT);try{let bV={};bS['css']({'verticalAlign':'baseline'}),bV['ascent']=bS['offset']()['top']-bR['offset']()['top'],bS['css']({'verticalAlign':'bottom'}),bV['height']=bS['offset']()['top']-bR['offset']()['top'],bV['descent']=bV['height']-bV['ascent'];}finally{bT['remove']();}return result;}this['Util_GetTextMetricsByText']=function(bP,bQ,bR){let bS;for(let bT=0x0;bT<bQ['length'];bT++){let bU=bP['measureText'](bQ[bT]);if(bT===0x0)bS=bU;else{if(bS['width']<bU['width'])bS=bU;}}return bQ['length']>0x0&&(bS['height']=bR*1.5,bS['ascent']=bR+bR*0.1),bS;};function b8(bP,bQ,bR){let bS=a['Shader']['currentProgram'];bS===undefined&&(a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](a['Camera']['screenProjectionMatrix'],undefined));let bT=0x0,bU=0x4,bV=[];bV[bT++]=bP['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'],bV[bT++]=bQ['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'],bV[bT++]=bP['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'],bV[bT++]=bQ['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'];let bW=bR['glColor']();a['Shader']['SetGLColor'](bW['r'],bW['g'],bW['b'],bW['a']);const bX=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bX),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bV),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],bX),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,bU),d['deleteBuffer'](bX),bS===undefined&&a['Shader']['EndShader']();}function b9(bP,bQ,bR){let bS=a['Shader']['currentProgram'];bS===undefined&&(a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](a['Camera']['screenProjectionMatrix'],undefined));let bT=0x0,bU=0x8,bV=[];{bV[bT++]=bP['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'],bV[bT++]=bQ['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'];}{bV[bT++]=bQ['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'],bV[bT++]=bQ['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'];}{bV[bT++]=bQ['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'],bV[bT++]=bP['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'];}{bV[bT++]=bP['x'],bV[bT++]=bQ['y'],bV[bT++]=bP['z'],bV[bT++]=bP['x'],bV[bT++]=bP['y'],bV[bT++]=bP['z'];}let bW=bR['glColor']();a['Shader']['SetGLColor'](bW['r'],bW['g'],bW['b'],bW['a']);const bX=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bX),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bV),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['LINES'],0x0,bU),d['deleteBuffer'](bX),bS===undefined&&a['Shader']['EndShader']();}function ba(bP,bQ,bR){let bS=new b['Vector3']()['copy'](bQ);bS['normalize']();let bT=new b['Vector3'](0x1,0x0,0x0);(bT['dot'](bS)>0.99||bT['dot'](bS)<-0.99)&&(bT=new b['Vector3'](0x0,0x1,0x0));let bU=new b['Vector3']()['crossVectors'](bS,bT);bT=new b['Vector3']()['crossVectors'](bU,bS),bT['normalize'](),bU['normalize'](),bS['normalize']();let bV=0xa,bW=[],bX=[];for(let bY=0x0;bY<bV+0x1;bY++){let bZ=Math['PI']*0x2/bV*bY,c0=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](bZ)),c1=new b['Vector3']()['copy'](c0)['multiplyScalar'](bR),c2=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](bZ)),c3=new b['Vector3']()['copy'](c2)['multiplyScalar'](bR),c4=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['addVectors'](c1,c3));bW['push'](c4['x']),bW['push'](c4['y']),bW['push'](c4['z']);let c5=new b['Vector3']()['copy'](bS);bX['push'](c5['x']),bX['push'](c5['y']),bX['push'](c5['z']),c4=new b['Vector3']()['copy'](bP),bW['push'](c4['x']),bW['push'](c4['y']),bW['push'](c4['z']),bX['push'](c5['x']),bX['push'](c5['y']),bX['push'](c5['z']);}{let c6=Math['PI']*0x2/bV,c7=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](c6)),c8=new b['Vector3']()['copy'](c7)['multiplyScalar'](bR),c9=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](c6)),ca=new b['Vector3']()['copy'](c9)['multiplyScalar'](bR),cb=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['addVectors'](c8,ca));bW['push'](cb['x']),bW['push'](cb['y']),bW['push'](cb['z']);let cc=new b['Vector3']()['copy'](bS);bX['push'](cc['x']),bX['push'](cc['y']),bX['push'](cc['z']),cb=new b['Vector3']()['copy'](bP),bW['push'](cb['x']),bW['push'](cb['y']),bW['push'](cb['z']),bX['push'](cc['x']),bX['push'](cc['y']),bX['push'](cc['z']);}if(a['Shader']['positionAttributeLocation']>=0x0){const cd=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],cd),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']);const ce=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],ce),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bX),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],cd),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],ce),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,(bV+0x1)*0x2),d['deleteBuffer'](cd),d['deleteBuffer'](ce);}}function bb(bP,bQ,bR){let bS=new b['Vector3']()['subVectors'](bQ,bP);bS['normalize']();let bT=new b['Vector3'](0x1,0x0,0x0);(bT['dot'](bS)>0.99||bT['dot'](bS)<-0.99)&&(bT=new b['Vector3'](0x0,0x1,0x0));let bU=new b['Vector3']()['crossVectors'](bS,bT);bT=new b['Vector3']()['crossVectors'](bU,bS),bT['normalize'](),bU['normalize'](),bS['normalize']();let bV=0xa,bW=[],bX=[];for(let bY=0x0;bY<bV+0x1;bY++){let bZ=Math['PI']*0x2/bV*bY,c0=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](bZ)),c1=new b['Vector3']()['copy'](c0)['multiplyScalar'](bR),c2=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](bZ)),c3=new b['Vector3']()['copy'](c2)['multiplyScalar'](bR),c4=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['addVectors'](c1,c3));bW['push'](c4['x']),bW['push'](c4['y']),bW['push'](c4['z']);let c5=new b['Vector3']()['addVectors'](c0,c2);bX['push'](c5['x']),bX['push'](c5['y']),bX['push'](c5['z']),c4=new b['Vector3']()['addVectors'](bQ,new b['Vector3']()['addVectors'](c1,c3)),bW['push'](c4['x']),bW['push'](c4['y']),bW['push'](c4['z']),bX['push'](c5['x']),bX['push'](c5['y']),bX['push'](c5['z']);}if(a['Shader']['positionAttributeLocation']>=0x0){const c6=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c6),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']);const c7=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c7),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bX),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],c6),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],c7),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,(bV+0x1)*0x2),d['deleteBuffer'](c6),d['deleteBuffer'](c7);}}function bc(bP,bQ,bR){let bS=new b['Vector3']()['subVectors'](bQ,bP);bS['normalize']();let bT=new b['Vector3'](0x1,0x0,0x0);(bT['dot'](bS)>0.99||bT['dot'](bS)<-0.99)&&(bT=new b['Vector3'](0x0,0x1,0x0));let bU=new b['Vector3']()['crossVectors'](bS,bT);bT=new b['Vector3']()['crossVectors'](bU,bS),bT['normalize'](),bU['normalize'](),bS['normalize']();let bV=0xa,bW=[],bX=[];for(let c0=0x0;c0<bV+0x1;c0++){let c1=Math['PI']*0x2/bV*c0,c2=Math['PI']*0x2/bV*(c0+0x1),c3=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](c1)),c4=new b['Vector3']()['copy'](c3)['multiplyScalar'](bR),c5=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](c1)),c6=new b['Vector3']()['copy'](c5)['multiplyScalar'](bR),c7=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['addVectors'](c4,c6));bW['push'](c7['x']),bW['push'](c7['y']),bW['push'](c7['z']),c7=new b['Vector3']()['copy'](bQ),bW['push'](c7['x']),bW['push'](c7['y']),bW['push'](c7['z']);let c8=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](c2)),c9=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](c2)),ca=new b['Vector3']()['subVectors'](new b['Vector3']()['addVectors'](c8,c9),new b['Vector3']()['addVectors'](c3,c5)),cb=new b['Vector3']()['addVectors'](c3,c5);cb['normalize'](),bX['push'](cb['x']),bX['push'](cb['y']),bX['push'](cb['z']),bX['push'](cb['x']),bX['push'](cb['y']),bX['push'](cb['z']);}const bY=d['createBuffer'](),bZ=d['createBuffer']();a['Shader']['positionAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bY),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],bZ),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bX),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],bY),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bZ),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,(bV+0x1)*0x2));bW=[],bX=[];for(let cc=0x0;cc<bV+0x1;cc++){let cd=Math['PI']*0x2/bV*cc,ce=Math['PI']*0x2/bV*(cc+0x1),cf=new b['Vector3']()['copy'](bT)['multiplyScalar'](Math['cos'](cd)),cg=new b['Vector3']()['copy'](cf)['multiplyScalar'](bR),ch=new b['Vector3']()['copy'](bU)['multiplyScalar'](Math['sin'](cd)),ci=new b['Vector3']()['copy'](ch)['multiplyScalar'](bR),cj=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['addVectors'](cg,ci));bW['push'](cj['x']),bW['push'](cj['y']),bW['push'](cj['z']),cj=new b['Vector3']()['copy'](bP),bW['push'](cj['x']),bW['push'](cj['y']),bW['push'](cj['z']);let ck=new b['Vector3']()['copy'](bS);bX['push'](ck['x']),bX['push'](ck['y']),bX['push'](ck['z']),bX['push'](ck['x']),bX['push'](ck['y']),bX['push'](ck['z']);}a['Shader']['positionAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bY),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bZ),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bX),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,(bV+0x1)*0x2)),d['deleteBuffer'](bY),d['deleteBuffer'](bZ);}function bd(bP,bQ){let bR=new b['Vector3'](0x1,0x0,0x0),bS=new b['Vector3'](0x0,0x1,0x0),bT=new b['Vector3'](0x0,0x0,0x1),bU=0xa;const bV=d['createBuffer'](),bW=d['createBuffer']();let bX=new b['Vector3'](0x0,0x0,0x1);for(let bY=0x0;bY<bU;bY++){let bZ=Math['PI']*0x2/bU*bY,c0=Math['PI']*0x2/bU*(bY+0x1),c1=[],c2=[];for(let c3=0x0;c3<bU+0x1;c3++){let c4=Math['PI']*0x2/bU*c3,c5=new b['Vector3']()['copy'](bR)['multiplyScalar'](Math['cos'](c4)),c6=new b['Vector3']()['copy'](c5)['multiplyScalar'](bQ),c7=new b['Vector3']()['copy'](bS)['multiplyScalar'](Math['sin'](c4)),c8=new b['Vector3']()['copy'](c7)['multiplyScalar'](bQ),c9=new b['Vector3']()['addVectors'](c6,c8);c9['normalize']();let ca=new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](bX)['multiplyScalar'](Math['cos'](bZ)),new b['Vector3']()['copy'](c9)['multiplyScalar'](Math['sin'](bZ)));ca['normalize']();let cb=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['copy'](ca)['multiplyScalar'](bQ));c1['push'](cb['x']),c1['push'](cb['y']),c1['push'](cb['z']),c2['push'](ca['x']),c2['push'](ca['y']),c2['push'](ca['z']);let cc=new b['Vector3']()['addVectors'](new b['Vector3']()['copy'](bX)['multiplyScalar'](Math['cos'](c0)),new b['Vector3']()['copy'](c9)['multiplyScalar'](Math['sin'](c0)));cc['normalize']();let cd=new b['Vector3']()['addVectors'](bP,new b['Vector3']()['copy'](cc)['multiplyScalar'](bQ));c1['push'](cd['x']),c1['push'](cd['y']),c1['push'](cd['z']),c2['push'](cc['x']),c2['push'](cc['y']),c2['push'](cc['z']);}a['Shader']['positionAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bV),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c1),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bW),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c2),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,(bU+0x1)*0x2));}d['deleteBuffer'](bV),d['deleteBuffer'](bW);}function be(bP,bQ,bR,bS,bT){let bU=[],bV=0x0,bW=[],bX=0x0;bU[bV]=bP['x'],bV++,bU[bV]=bP['y'],bV++,bU[bV]=bP['z'],bV++,bU[bV]=bQ['x'],bV++,bU[bV]=bQ['y'],bV++,bU[bV]=bQ['z'],bV++,bU[bV]=bR['x'],bV++,bU[bV]=bR['y'],bV++,bU[bV]=bR['z'],bV++,bU[bV]=bS['x'],bV++,bU[bV]=bS['y'],bV++,bU[bV]=bS['z'],bV++,bU[bV]=bP['x'],bV++,bU[bV]=bP['y'],bV++,bU[bV]=bP['z'],bV++;if(bT===undefined){let bY=new b['Vector3']()['subVectors'](bQ,bP),bZ=new b['Vector3']()['subVectors'](bR,bP);bT=new b['Vector3'](),bT['crossVectors'](bY,bZ),bT['normalize']();}if(bT!==undefined)for(let c0=0x0;c0<0x5;c0++){bW[bX]=bT['x'],bX++,bW[bX]=bT['y'],bX++,bW[bX]=bT['z'],bX++;}if(a['Shader']['positionAttributeLocation']>=0x0){const c1=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c1),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bU),d['STATIC_DRAW']);const c2=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c2),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],c1),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],c2),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0)),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4),d['deleteBuffer'](c1),d['deleteBuffer'](c2);}}this['Util_DrawRectangle3D']=function(bP,bQ,bR,bS,bT){be(bP,bQ,bR,bS,bT);},this['Util_DrawCylinder3D']=function(bP,bQ,bR){bb(bP,bQ,bR);},this['Util_DrawCone3D']=function(bP,bQ,bR){bc(bP,bQ,bR);},this['Util_DrawCircle3D']=function(bP,bQ,bR){ba(bP,bQ,bR);},this['Util_DrawSphere3D']=function(bP,bQ){bd(bP,bQ);};function bf(){if(!a['Configuration']['Render']['CoordinateAxis']['Visible'])return;const bP=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']);bP['setPosition'](new b['Vector3']());let bQ=new b['Vector2'](0.05,0.05);bQ['x']=d['canvas']['clientWidth']*bQ['x'],bQ['y']=d['canvas']['clientHeight']-d['canvas']['clientWidth']*bQ['y'];const bR=d['canvas']['clientWidth']*0.035;let bS=new b['Vector3'](bQ['x'],bQ['y'],0x0),bT=new b['Vector3'](0x1,0x0,0x0);bT=bT['applyMatrix4'](bP),bT['y']*=-0x1;let bU=new b['Vector3'](0x0,0x1,0x0);bU=bU['applyMatrix4'](bP),bU['y']*=-0x1;let bV=new b['Vector3'](0x0,0x0,0x1);bV=bV['applyMatrix4'](bP),bV['y']*=-0x1;let bW,bX,bY;bW=new b['Vector3']()['copy'](bS);let bZ=bR,c0=bR/0x8,c1=bR*1.2,c2=bR/0x10;a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PHONGUTIL']),d['enable'](d['DEPTH_TEST']),a['Shader']['SetGLDefaultLight'](),a['Shader']['SetClipping'](undefined),a['Shader']['SetMatrix'](a['Camera']['screenProjectionMatrix'],new b['Matrix4']());{let c5=new b['Color'](0xff,0x0,0x0,0xff),c6=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bT)['multiplyScalar'](bZ)),c7=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bT)['multiplyScalar'](c1)),c8=c5['glColor']();a['Shader']['SetGLColor'](c8['r'],c8['g'],c8['b'],c8['a']),bb(bW,c6,c2),bc(c6,c7,c0);let c9=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bT)['multiplyScalar'](c1+0xa));aB('X',c9,c5);}{let ca=new b['Color'](0x0,0xff,0x0,0xff),cb=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bU)['multiplyScalar'](bZ)),cc=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bU)['multiplyScalar'](c1)),cd=ca['glColor']();a['Shader']['SetGLColor'](cd['r'],cd['g'],cd['b'],cd['a']),bb(bW,cb,c2),bc(cb,cc,c0);let ce=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bU)['multiplyScalar'](c1+0xa));aB('Y',ce,ca);}{let cf=new b['Color'](0x64,0x64,0xff,0xff),cg=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bV)['multiplyScalar'](bZ)),ch=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bV)['multiplyScalar'](c1)),ci=cf['glColor']();a['Shader']['SetGLColor'](ci['r'],ci['g'],ci['b'],ci['a']),bb(bW,cg,c2),bc(cg,ch,c0);let cj=new b['Vector3']()['addVectors'](bW,new b['Vector3']()['copy'](bV)['multiplyScalar'](c1+0x8));aB('Z',cj,cf);}let c3=new b['Color'](0x7f,0x7f,0x7f,0xff),c4=c3['glColor']();a['Shader']['SetGLColor'](c4['r'],c4['g'],c4['b'],c4['a']),bd(bW,c2*2.5),a['Shader']['EndShader']();}function bg(){if(a['MeshBlock']['DownloadDataNum']()<=0x0)return;if(a['MeshBlock']['DownloadCount']()===0x0)return;let bP=new b['Vector2'](0.95,0.05);bP['x']=d['canvas']['clientWidth']*bP['x'],bP['y']=d['canvas']['clientHeight']-d['canvas']['clientHeight']*bP['y'];let bQ=d['canvas']['clientWidth']*0.003,bR=d['canvas']['clientWidth']*0.035;bQ=Math['max'](bQ,0x3),bR=Math['max'](bR,0x1);let bS=bR*((a['MeshBlock']['DownloadCount']()-a['MeshBlock']['DownloadDataNum']())/a['MeshBlock']['DownloadCount']()),bT=new b['Vector3'](bP['x'],bP['y'],0x0),bU=new b['Vector3'](bP['x']+bR,bP['y']+bQ,0x0),bV=new b['Vector3'](bP['x']+bS,bP['y']+bQ,0x0);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),d['disable'](d['DEPTH_TEST']),a['Shader']['SetMatrix'](a['Camera']['screenProjectionMatrix'],undefined);let bW=new b['Color'](0x0,0x0,0x0,0xff),bX=new b['Color'](0xc8,0xc8,0xc8,0xff),bY=new b['Color'](0x14,0xff,0x14,0xff);b8(bT,bU,bX),b8(bT,bV,bY),b9(bT,bU,bW),a['Shader']['EndShader']();}function bh(bP){d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bQ=0x3,bR=d['FLOAT'],bS=![],bT=0x0,bU=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bQ,bR,bS,bT,bU),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],bQ,bR,bS,bT,bU),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);let bV=bP['tag'][0x0],bW=bV['color'];a['Shader']['SetGLColor'](bW['R']/0xff,bW['G']/0xff,bW['B']/0xff,bW['A']/0xff),d['drawElements'](d['TRIANGLES'],bP['numElements'],d['UNSIGNED_SHORT'],0x0);}function bi(){d['viewport'](0x0,0x0,d['canvas']['width'],d['canvas']['height']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']),d['enable'](d['DEPTH_TEST']);let bP=a['Data']['ObjectsUpdateLength'];for(let bQ=0x0;bQ<bP;bQ++){let bR=Y['get'](a['Data']['Objects'][bQ]['uuid']);if(bR['listProcess']['length']<=0x0)return;d['bindBuffer'](d['ARRAY_BUFFER'],a['Data']['Objects'][bQ]['attribs']['a_position']['buffer']);let bS=0x3,bT=d['FLOAT'],bU=![],bV=0x0,bW=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bS,bT,bU,bV,bW),d['bindBuffer'](d['ARRAY_BUFFER'],a['Data']['Objects'][bQ]['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],bS,d['UNSIGNED_BYTE'],bU,bV,bW),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],a['Data']['Objects'][bQ]['attribs']['a_index']['buffer']);{const bY=new b['Matrix4']();bY['copy'](a['Camera']['cameraMatrix']);const bZ=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bY);a['Shader']['SetMatrix'](bZ,bY);}let bX=new b['Matrix4']();for(let c0=0x0;c0<bR['listProcess']['length'];c0++){let c1=bR['listProcess'][c0];if(!bX['equals'](c1['action']['transform'])){bX['copy'](c1['action']['transform']);const c2=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bX),c3=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c2);a['Shader']['SetMatrix'](c3,c2);}d['drawElements'](d['TRIANGLES'],c1['length'],d['UNSIGNED_SHORT'],c1['start']*0x2);}}a['Shader']['EndShader']();}let bj=function(bP,bQ){if(bP['flag']['sequence']>bQ['flag']['sequence'])return 0x1;else{if(bP['flag']['sequence']<bQ['flag']['sequence'])return-0x1;}return 0x0;},bk=function(bP,bQ){return bP['link']<bQ['link']?0x1:bP['link']>bQ['link']?-0x1:0x0;};function bl(){for(let bP=0x0;bP<a['Data']['ObjectsUpdateLength'];bP++){let bQ=a['Data']['AreaSequenceMap']['get'](a['Data']['Objects'][bP]['link']);bQ!==undefined?a['Data']['Objects'][bP]['flag']['sequence']=bQ:a['Data']['Objects'][bP]['flag']['sequence']=a['Data']['ObjectsUpdateLength'];}a['Data']['Objects']['sort'](bj);}function bm(){a['Shader']['CreateShaderData'](),a['Mode']['Camera'](a['CameraIndex']);let bP=h['glColor']();d['clearColor'](bP['r'],bP['g'],bP['b'],bP['a']),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a2();const bQ=c['mainFramebufferClear'];let bR=a['Data']['ObjectsUpdateLength'];if(c['enableRenderLimit']){if(c['enableRenderLimitRate']<0x0){if(bR>c['enableRenderLimitCnt'])bR=c['enableRenderLimitCnt'];}else{let bU=Math['floor'](bR*c['enableRenderLimitRate']);bU=Math['max'](bU,0x1);if(bR>bU)bR=bU;}}if(bQ){f['count']=0x0;for(let bV=0x0;bV<bR;bV++){a['Data']['Objects'][bV]['attribs']['a_index']['buffer']!==null&&(a['Data']['Objects'][bV]['flag']['renderEnable']=!![]);}a['CustomObject']['BenginRenderObject']();}bn(bR),bo(bQ,bR),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['MAIN']);bQ&&(d['clearColor'](bP['r'],bP['g'],bP['b'],bP['a']),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),ae());if(L){if(a['Grid']!==undefined)a['Grid']['Render'](d,e,bQ);else{if(bQ)bK();}}if(bQ)bM();if(a['useWebGL2']===![])a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PHONG']);else a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PBR']);a['Shader']['SetGLLight'](!![]),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);const bS=new b['Matrix4']();bS['copy'](a['Camera']['cameraMatrix']);const bT=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bS);a['Shader']['SetMatrix'](bT,bS);if(C){if(a['Camera']['matShadowMV']!==undefined&&a['Camera']['matShadowProjection']!==undefined){let bW=new b['Matrix4']()['copy'](a['Camera']['matShadowMV']);const bX=new b['Matrix4']()['multiplyMatrices'](a['Camera']['matShadowProjection'],bW);a['Shader']['SetCustomMatrix']('u_MVPShadowMatrix',bX);let bY=a['Shader']['GetDepthTexture'](0xa);a['Shader']['SetCurrentTexture']('uShadowPositionTexture',d['TEXTURE_2D'],bY['texture']);let bZ=d['getUniformLocation'](a['Shader']['currentProgram'],'uBias');bZ&&d['uniform1f'](bZ,-0.008);}}a['Shader']['SetClipping'](bS);if(!w){d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);for(let c0=0x0;c0<bR;c0++){a['RenderWGL']['UpdateRenderProcessByObject_v2'](a['Data']['Objects'][c0],![]);}d['enable'](d['DEPTH_TEST']),d['depthMask'](!![]),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);for(let c1=0x0;c1<bR;c1++){a['RenderWGL']['UpdateRenderProcessByObject_v2'](a['Data']['Objects'][c1],!![]);}}a['Shader']['EndShader'](),d['disable'](d['BLEND']),d['depthMask'](!![]);{a['CustomObject']['Render'](),a['CustomObject']['AnimationRender']();}bQ&&a['Pick']['RenderPreselectEdge']();if(bQ&&a['Configuration']['Model']['Selection']['Mode']===b['Enum']['SelectionVisibleMode']['BOUNDBOX']){let c2=!![],c3=new b['BBox'](),c4=a['Data']['GetSelection']();if(c4['length']>0x0){if(c2){let c6=a['Tree']['GetBodies'](c4);c3=a['Data']['GetBBox'](c6),c2=![];}}let c5=a['CustomObject']['GetSelection']();if(c5['length']>0x0){if(c2)c3=a['CustomObject']['GetBoundBox'](c5);else{let c7=a['CustomObject']['GetBoundBox'](c5);c3['min']['min'](c7['min']),c3['max']['min'](c7['max']),c3['update']();}}if(c3['radius']>0x0){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);const c8=new b['Matrix4']()['copy'](a['Camera']['matMV']),c9=new b['Matrix4']()['copy'](a['Camera']['matMVP']);a['Shader']['SetGLLight'](),a['Shader']['SetClipping'](undefined),a['Shader']['SetMatrix'](c9,c8);let ca=new b['Color']()['copy'](a['Configuration']['Model']['Selection']['Color']),cb=ca['glColor']();a['Shader']['SetGLColor'](cb['r'],cb['g'],cb['b'],cb['a']);let cc=a['Util']['GetBBox2Vertex'](c3),cd=[[0x0,0x4,0x4,0x5,0x5,0x1,0x1,0x0],[0x2,0x6,0x6,0x7,0x7,0x3,0x3,0x2],[0x0,0x2],[0x4,0x6],[0x1,0x3],[0x5,0x7]],ce=a['gl']['createBuffer'](),cf=[];a['gl']['bindBuffer'](a['gl']['ARRAY_BUFFER'],ce),a['gl']['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,a['gl']['FLOAT'],![],0x0,0x0);let cg=0x0;for(let ch=0x0;ch<cd['length'];ch++){for(let ci=0x0;ci<cd[ch]['length'];ci+=0x2){let cj=a['Util']['Get2DLineFromWidth'](cc[cd[ch][ci]],cc[cd[ch][ci+0x1]],a['Configuration']['Model']['Selection']['Width']);for(let ck=0x0;ck<cj['length']-0x2;ck++){cf[cg]=cj[ck]['x'],cg++,cf[cg]=cj[ck]['y'],cg++,cf[cg]=cj[ck]['z'],cg++,cf[cg]=cj[ck+0x1]['x'],cg++,cf[cg]=cj[ck+0x1]['y'],cg++,cf[cg]=cj[ck+0x1]['z'],cg++,cf[cg]=cj[ck+0x2]['x'],cg++,cf[cg]=cj[ck+0x2]['y'],cg++,cf[cg]=cj[ck+0x2]['z'],cg++;}}}a['gl']['bufferData'](a['gl']['ARRAY_BUFFER'],new Float32Array(cf),a['gl']['STATIC_DRAW']),a['gl']['drawArrays'](d['TRIANGLES'],0x0,cf['length']),a['gl']['deleteBuffer'](ce),a['Shader']['EndShader']();}}a['Avatar']['Render'](),a['Shader']['EndFramebuffer'](),a['Avatar']['GLSLPreprocessing'](bQ,bR),d['disable'](d['DEPTH_TEST']);{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['MODELAFTER']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),![]&&(a['Shader']['EndFramebuffer'](),a['Shader']['CopyFBDepthBuffer'](b['Enum']['FB_RENDER_TYPES']['MODELAFTER'],b['Enum']['FB_RENDER_TYPES']['MAIN']),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['MODELAFTER']),a['CustomObject']['AnimationRender'](),a['Avatar']['Render']()),d['clear'](d['DEPTH_BUFFER_BIT']),a['Control']['Render'](),a['Shader']['EndFramebuffer']();}a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['EndFramebuffer']();if(bR<=0x0){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['CopyFBColorBuffer'](b['Enum']['FB_RENDER_TYPES']['END'],b['Enum']['FB_RENDER_TYPES']['MAIN']),a['Shader']['EndFramebuffer'](),bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['END']);return;}if(n||l||w){{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);{let cl=a['Shader']['GetColorIDTexture'](0x0);bF(b['Enum']['SHADER_TYPES']['EDGE'],cl['texture'],cl['width'],cl['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(w)bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],x);else bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],p);a['Shader']['EndFramebuffer']();}if(![]){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);{let cm=a['Shader']['GetColorIDTexture'](0x1);bF(b['Enum']['SHADER_TYPES']['EDGE'],cm['texture'],cm['width'],cm['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(w)bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],x);else bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],q);a['Shader']['EndFramebuffer']();}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}if(o){{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);{let cn=a['Shader']['GetColorIDTexture'](0x1);bF(b['Enum']['SHADER_TYPES']['EDGE'],cn['texture'],cn['width'],cn['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']);if(w)bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],x);else bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],q);a['Shader']['EndFramebuffer']();}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}if(s){{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);let co=a['Shader']['GetColorIDTexture'](0x2);co!==undefined&&bF(b['Enum']['SHADER_TYPES']['EDGE'],co['texture'],co['width'],co['height'],new b['Color'](0xff,0xff,0xff,0xff)),a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],u),a['Shader']['EndFramebuffer']();}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}{F&&(a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),bE(b['Enum']['SHADER_TYPES']['EDGE'],b['Enum']['FB_RENDER_TYPES']['SELECTED'],new b['Color'](0xff,0xff,0xff,0xff)),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],G),a['Shader']['EndFramebuffer'](),d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']));}{let cp=a['Shader']['GetItemFramebuffer'](b['Enum']['FB_RENDER_TYPES']['MAIN']);a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']);if(cp['msaa'])a['Shader']['EndFramebuffer'](),a['Shader']['CopyFBColorBuffer'](b['Enum']['FB_RENDER_TYPES']['END'],b['Enum']['FB_RENDER_TYPES']['MAIN']),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);else{if(a['CameraIndex']===0x0)bE(b['Enum']['SHADER_TYPES']['FXAA'],b['Enum']['FB_RENDER_TYPES']['MAIN']);else bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['MAIN']);}if(y&&a['useWebGL2']){a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM2']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),d['enable'](d['BLEND']),bI(b['Enum']['SHADER_TYPES']['SSAO'],z),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),d['enable'](d['BLEND']);{let cq=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOM2']);bG(b['Enum']['SHADER_TYPES']['BLUR'],cq['texture'],cq['width'],cq['height'],0x1,new b['Vector2'](0x1,0x0),0x1,new b['Color'](0xff,0xff,0xff,0xff),![]);}a['Shader']['EndFramebuffer']();{a['Shader']['CopyFBColorBuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM'],b['Enum']['FB_RENDER_TYPES']['MAIN']);let cr=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),cs=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOM2']);a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']),d['disable'](d['DEPTH_TEST']),d['enable'](d['BLEND']),bH(b['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],cr['texture'],cs['texture'],![]);}}{bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['AFTEREFFECT']),bE(b['Enum']['SHADER_TYPES']['FXAA'],b['Enum']['FB_RENDER_TYPES']['MODELAFTER']);}if(n&&r){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']);{let ct=a['Shader']['GetColorIDTexture'](0x0);bF(b['Enum']['SHADER_TYPES']['EDGE'],ct['texture'],ct['width'],ct['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);{let cu=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);bD(0x0,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cu['texture'],cu['width'],cu['height'],new b['Color'](0xff,0xff,0xff,0xff));}}if(o&&r){{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);{let cv=a['Shader']['GetColorIDTexture'](0x1);bF(b['Enum']['SHADER_TYPES']['EDGE'],cv['texture'],cv['width'],cv['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);{let cw=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);bD(0x1,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cw['texture'],cw['width'],cw['height'],new b['Color'](0xff,0xff,0xff,0xff));}}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}if(s&&v){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']),d['disable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['EDGE']);{let cx=a['Shader']['GetColorIDTexture'](0x2);bF(b['Enum']['SHADER_TYPES']['EDGE'],cx['texture'],cx['width'],cx['height'],new b['Color'](0xff,0xff,0xff,0xff));}a['Shader']['EndShader'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);{let cy=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);bD(0x0,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cy['texture'],cy['width'],cy['height'],new b['Color'](0xff,0xff,0xff,0xff));}d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}if(y&&B&&a['useWebGL2']){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),bI(b['Enum']['SHADER_TYPES']['SSAO'],z),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);{let cz=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']);bD(0x0,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cz['texture'],cz['width'],cz['height'],new b['Color'](0xff,0xff,0xff,0xff));}{let cA=a['Shader']['GetNormalTexture']();bD(0x1,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cA['texture'],cA['width'],cA['height'],undefined,0x0);}}if(E){{let cB=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['PRESELECT']);bD(0x0,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cB['texture'],cB['width'],cB['height'],new b['Color'](0xff,0xff,0xff,0xff));}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['clearColor'](0x1,0x1,0x1,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),a['Pick']['RenderPreselectEdge'](),a['Shader']['EndFramebuffer'](),a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['END']);let cC=a['Shader']['GetFrameBufferTexture'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']);bD(0x1,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cC['texture'],cC['width'],cC['height'],new b['Color'](0xff,0xff,0xff,0xff));}}if(C&&D&&a['useWebGL2']){let cD=a['Shader']['GetDepthTexture'](0xa);bD(0x1,b['Enum']['SHADER_TYPES']['TEXTURE2D'],cD['texture'],cD['width'],cD['height'],undefined,0x0);}{}d['disable'](d['BLEND']),a['Shader']['EndFramebuffer'](),bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['END']);}bL(),ak();c['enableDrawCall']&&as();c['enableTimePanel']&&at();d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['UI']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),bN(),bf(),a['ViewCube']['Render'](),bg(),a['Shader']['EndFramebuffer']();}d['disable'](d['DEPTH_TEST']);{bE(b['Enum']['SHADER_TYPES']['TEXTURE2D'],b['Enum']['FB_RENDER_TYPES']['UI']);}if(c['RenderPivot']){d['enable'](d['DEPTH_TEST']);let cE=0xa;{let cH=new b['Matrix4']()['copy'](a['Camera']['matMVP']),cI=new b['Vector3']()['copy'](a['Camera']['pivot']),cJ=a['Camera']['world2ScreenWithMatrix'](cH,cI),cK=cJ['add'](new b['Vector3'](cE,0x0,0x0));cI=a['Camera']['screen2WorldWithMatrix'](cH,cK),cE=new b['Vector3']()['subVectors'](a['Camera']['pivot'],cI)['length']();}let cF=a['Configuration']['Render']['Pivot']['Color'],cG=cF['glColor']();a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PHONG']),a['Shader']['SetGLDefaultLight'](),a['Shader']['SetClipping'](undefined),a['Shader']['SetMatrix'](a['Camera']['matMVP'],a['Camera']['matMV']),a['Shader']['SetGLColor'](cG['r'],cG['g'],cG['b'],cG['a']),c['Util_DrawSphere3D'](a['Camera']['pivot'],cE),a['Shader']['EndShader'](),d['disable'](d['DEPTH_TEST']),d['disable'](d['BLEND']);}}function bn(bP){f['occlusionCullingCount']=0x0;if(c['enableOcclusion']===![])return;if(a['useWebGL2']===![]){for(let bR=0x0;bR<bP;bR++){let bS=a['RenderWGL']['InitRenderPipeline'](obj);bS['renderEnableOcclusion']=!![];}return;}d['colorMask'](![],![],![],![]),d['depthMask'](![]),d['enable'](d['DEPTH_TEST']);let bQ=new b['Color'](0xff,0xff,0xff,0xff);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']);for(let bT=0x0;bT<bP;bT++){if(c['occlusionProcessMax']>0x0){if(c['occlusionProcessCount']>c['occlusionProcessMax'])break;}a['RenderWGL']['UpdateRenderProcessByObjectOcclusion_v2'](a['Data']['Objects'][bT],bQ);}a['Shader']['EndShader'](),d['colorMask'](!![],!![],!![],!![]),d['depthMask'](!![]),d['disable'](d['DEPTH_TEST']);}function bo(bP,bQ){if(bQ<=0x0)return;if(a['useWebGL2']){{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let bR=0x0;bR<bQ;bR++){a['RenderWGL']['UpdateRenderProcessByPickObject_v2'](a['Data']['Objects'][bR]);}a['Shader']['EndShader']();}{a['CustomObject']['PickRender'](b['Enum']['SHADER_TYPES']['PICKING']);}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PRESELECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']);{a['Pick']['RenderPreselectEdgeColor']();}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['SELECTED']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let bS=0x0;bS<bQ;bS++){a['RenderWGL']['UpdateRenderProcessBySelectObject_v2'](a['Data']['Objects'][bS]);}a['Shader']['EndShader']();{a['CustomObject']['SelectedRender'](b['Enum']['SHADER_TYPES']['PICKING']);}}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PREPROCESSING']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PREPROCESSING']);for(let bT=0x0;bT<bQ;bT++){a['RenderWGL']['UpdateRenderProcessByColorID_v2'](a['Data']['Objects'][bT]);}a['Shader']['EndShader']();}{a['CustomObject']['ColorIDRender'](b['Enum']['SHADER_TYPES']['PREPROCESSING']);}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['COLOROBJECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let bU=0x0;bU<bQ;bU++){a['RenderWGL']['UpdateRenderProcessByColorID_v2'](a['Data']['Objects'][bU]);}a['Shader']['EndShader']();}{let bV=new b['Color'](0x0,0x0,0x0,0xff);a['CustomObject']['OneColorRender'](b['Enum']['SHADER_TYPES']['BASIC2D'],bV);}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{let bW=new b['Color'](0x0,0x0,0x0,0xff);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']);for(let bX=0x0;bX<bQ;bX++){a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](a['Data']['Objects'][bX],bW);}a['Shader']['EndShader']();}{a['CustomObject']['ColorIDRender'](b['Enum']['SHADER_TYPES']['PICKING']);}a['Shader']['EndFramebuffer']();}if(C){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);if(bP){d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']);let bY=a['Camera']['GetCameraData']();if(![]){let bZ=![];if(a['Shader']['ViewLightAsRotate'])bZ=!![];let c0=new b['Vector3'](),c1=a['Data']['GetBBox'](),c2=new b['Vector3']()['copy'](c1['center']),c3=new b['Matrix4']()['copy'](a['Camera']['matMV']);c3['setPosition'](new b['Vector3']());let c4=new b['Vector3']()['copy'](c2)['applyMatrix4'](new b['Matrix4']()['copy'](a['Camera']['matMV'])),c5=new b['Vector3']()['copy'](a['Shader']['GetLightDirection']()),c6,c7,c8;c8=new b['Vector3']()['copy'](c5);!bZ&&(c8=c8['applyMatrix4'](c3));c7=new b['Vector3'](0x0,0x1,0x0);!bZ&&(c7=c7['applyMatrix4'](c3));c6=new b['Vector3']()['crossVectors'](c7,c8),c6['normalize'](),c7=new b['Vector3']()['crossVectors'](c8,c6),c7['normalize'](),c0=new b['Vector3']()['copy'](c4);let c9=new b['Matrix4']()['lookAt'](c0,new b['Vector3']()['addVectors'](c0,c8),c7),ca=new b['Matrix4']()['getInverse'](c9);a['Camera']['matShadowMV']=new b['Matrix4']()['multiplyMatrices'](ca,new b['Matrix4']()['copy'](a['Camera']['matMV']));{let cb=0.7,cc=c1['radius']*cb,cd=c1['radius']*cb,ce=-cc/0x2,cf=cc/0x2,cg=-cd/0x2,ch=cd/0x2,ci=c1['radius']*-cb,cj=c1['radius']*cb,ck=new b['Matrix4']()['orthographic'](ce,cf,cg,ch,ci,cj);a['Camera']['matShadowProjection']=new b['Matrix4'](),a['Camera']['matShadowProjection']['elements']=ck;}}{let cl=![];if(a['Shader']['ViewLightAsRotate'])cl=!![];let cm=new b['Vector3'](),cn=a['Data']['GetBBox'](),co=new b['Vector3']()['copy'](cn['center']),cp=new b['Matrix4']()['copy'](a['Camera']['matMV']);cp['setPosition'](new b['Vector3']());let cq=new b['Vector3']()['copy'](co)['applyMatrix4'](new b['Matrix4']()['copy'](a['Camera']['matMV'])),cr=new b['Vector3']()['copy'](a['Shader']['GetLightDirection']()),cs,ct,cu;cu=new b['Vector3']()['copy'](cr);!cl&&(cu=cu['applyMatrix4'](cp));ct=new b['Vector3'](0x0,0x1,0x0);!cl&&(ct=ct['applyMatrix4'](cp));cs=new b['Vector3']()['crossVectors'](ct,cu),cs['normalize'](),ct=new b['Vector3']()['crossVectors'](cu,cs),ct['normalize'](),cm=new b['Vector3']()['copy'](cq);let cv=new b['Matrix4']()['lookAt'](cm,new b['Vector3']()['addVectors'](cm,cu),ct),cw=new b['Matrix4']()['getInverse'](cv);a['Camera']['matShadowMV']=new b['Matrix4']()['multiplyMatrices'](cw,new b['Matrix4']()['copy'](a['Camera']['matMV']));{let cx=0x1,cy=cn['radius']*cx,cz=cn['radius']*cx,cA=-cy/0x2,cB=cy/0x2,cC=-cz/0x2,cD=cz/0x2,cE=cn['radius']*-cx,cF=cn['radius']*cx,cG=new b['Matrix4']()['orthographic'](cA,cB,cC,cD,cE,cF);a['Camera']['matShadowProjection']=new b['Matrix4'](),a['Camera']['matShadowProjection']['elements']=cG;}}a['Camera']['CameraUpdateWithCameraData'](bY);}if(a['Camera']['matShadowMV']!==undefined){let cH=new b['Matrix4']()['copy'](a['Camera']['matShadowMV']),cI=c['enableOcclusion'];c['enableOcclusion']=![],a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PREPROCESSING']);for(let cJ=0x0;cJ<bQ;cJ++){a['RenderWGL']['UpdateRenderProcessByColorIDByMatrix_v2'](a['Data']['Objects'][cJ],a['Camera']['matShadowProjection'],cH);}a['Shader']['EndShader'](),c['enableOcclusion']=cI;}{a['CustomObject']['ColorIDRender']();}a['Shader']['EndFramebuffer']();}}else{{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['DEPTH']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['DEPTH']),a['Shader']['SetGLCameraData']();for(let cK=0x0;cK<bQ;cK++){a['RenderWGL']['UpdateRenderProcessByPickObject_v2'](a['Data']['Objects'][cK]);}a['Shader']['EndShader']();}a['Shader']['EndFramebuffer'](),d['disable'](d['BLEND']),d['disable'](d['DEPTH_TEST']);}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let cL=0x0;cL<bQ;cL++){a['RenderWGL']['UpdateRenderProcessByPickObject_v2'](a['Data']['Objects'][cL]);}a['Shader']['EndShader']();}{a['CustomObject']['PickRender'](b['Enum']['SHADER_TYPES']['PICKING']);}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PRESELECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']),d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']);if(![]){let cM=new b['Color'](0x0,0x0,0x0,0x0);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']);for(let cN=0x0;cN<bQ;cN++){a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](a['Data']['Objects'][cN],cM);}a['Shader']['EndShader'](),a['CustomObject']['OneColorRender'](b['Enum']['SHADER_TYPES']['BASIC2D'],cM);}{a['Pick']['RenderPreselectEdgeColor']();}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['SELECTED']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let cO=0x0;cO<bQ;cO++){a['RenderWGL']['UpdateRenderProcessBySelectObject_v2'](a['Data']['Objects'][cO]);}a['Shader']['EndShader']();{a['CustomObject']['SelectedRender'](b['Enum']['SHADER_TYPES']['PICKING']);}}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['COLOROBJECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PICKING']);for(let cP=0x0;cP<bQ;cP++){a['RenderWGL']['UpdateRenderProcessByColorID_v2'](a['Data']['Objects'][cP]);}a['Shader']['EndShader']();}{let cQ=new b['Color'](0x0,0x0,0x0,0xff);a['CustomObject']['OneColorRender'](b['Enum']['SHADER_TYPES']['BASIC2D'],cQ);}a['Shader']['EndFramebuffer']();}{a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{let cR=new b['Color'](0x0,0x0,0x0,0xff);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']);for(let cS=0x0;cS<bQ;cS++){a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](a['Data']['Objects'][cS],cR);}a['Shader']['EndShader']();}{a['CustomObject']['ColorIDRender'](b['Enum']['SHADER_TYPES']['PICKING']);}a['Shader']['EndFramebuffer']();}if(0x0){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['NORMAL']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['NORMAL']);for(let cT=0x0;cT<bQ;cT++){a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](a['Data']['Objects'][cT]);}a['Shader']['EndShader']();}{}a['Shader']['EndFramebuffer']();}if(0x0){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['POSITION']),d['disable'](d['BLEND']),d['enable'](d['DEPTH_TEST']);bP&&(d['clearColor'](0x0,0x0,0x0,0x0),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']));{a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['POSITION']);for(let cU=0x0;cU<bQ;cU++){a['RenderWGL']['UpdateRenderProcessByObjectOneColor_v2'](a['Data']['Objects'][cU]);}a['Shader']['EndShader']();}{}a['Shader']['EndFramebuffer']();}}}function bp(){let bP=a['Data']['ObjectsUpdateLength'];for(let bQ=0x0;bQ<bP;bQ++){a['Data']['Objects'][bQ]['flag']['renderEnable']=![];let bR=a['RenderWGL']['GetPipeline'](a['Data']['Objects'][bQ]['uuid']);if(bR!==undefined)bR['renderEnableOcclusion']=![];!a['Data']['Objects'][bQ]['flag']['renderEnable']&&!a['Data']['Objects'][bQ]['flag']['cache']&&(bR!==undefined&&bR['queryInProgress']===![])&&a['Renderer']['ReleaseDataByCache'](a['Data']['Objects'][bQ]);}}function bq(){let bP=a['Data']['ObjectsUpdateLength'];for(let bQ=0x0;bQ<bP;bQ++){a['Data']['Objects'][bQ]['flag']['renderEnable']=![];let bR=a['RenderWGL']['GetPipeline'](a['Data']['Objects'][bQ]['uuid']);if(bR!==undefined)bR['renderEnableOcclusion']=![];}}this['IsRenderUpdate']=function(){if(c['RenderEvent'])return!![];if(c['enableOcclusion']){if(c['occlusionProcessCount']>0x0)return!![];}return![];};function br(bP,bQ){let bR=Y['get'](bP['uuid']);if(bR===undefined)return;if(bR['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(c['enableOcclusion']){if(bR['occluded'])return;if(!bR['renderEnableOcclusion'])return;}else{if(!bP['flag']['renderEnable'])return;}d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bS=0x3,bT=d['FLOAT'],bU=![],bV=0x0,bW=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bS,bT,bU,bV,bW),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],bS,bT,bU,bV,bW);a['UV_DEBUG']&&(a['Shader']['uvAttributeLocation']>=0x0&&(bP['attribs']['a_uv']['buffer']!==null?(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_uv']['buffer']),d['enableVertexAttribArray'](a['Shader']['uvAttributeLocation']),d['vertexAttribPointer'](a['Shader']['uvAttributeLocation'],0x2,d['FLOAT'],![],0x0,0x0)):d['disableVertexAttribArray'](a['Shader']['uvAttributeLocation'])));if(!I)d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);else d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['sub']['a_wireframe']['buffer']);let bX=bP['tag'][0x0],bY=bX['color'];{a['Shader']['SetMatrix'](a['Camera']['matMVP'],a['Camera']['matMV']);}let bZ=new b['Matrix4']();for(let c0=0x0;c0<bR['listProcess']['length'];c0++){let c1=bR['listProcess'][c0];if(I&&c1['processKind']===0x0)continue;if(!I&&c1['processKind']===0x1)continue;let c2=bY;c1['action']['color']!==undefined&&(c2=c1['action']['color']);if(c1['action']['selection']&&a['Configuration']['Model']['Selection']['Mode']===b['Enum']['SelectionVisibleMode']['SHADED'])c2=a['Configuration']['Model']['Selection']['Color'],a['Shader']['SetGLMaterial'](-0x1);else{if(c1['action']['customColor'])c1['action']['color']!==undefined&&(c2=c1['action']['color']);else{a['Shader']['SetGLMaterial'](c1['action']['material']);if(c1['action']['material']>=0x0){let c4=a['Material']['GetMaterial'](c1['action']['material']);if(c4!==undefined)c2=c4['color'];}l&&(c2=m);}}if(bQ&&c2['a']===0xff)continue;if(!bQ&&c2['a']!==0xff)continue;let c3=c2['glColor']();a['Shader']['SetGLColor'](c3['r'],c3['g'],c3['b'],c3['a']);if(a['Shader']['GetUseUpdateMatrixManager']()&&c1['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c1['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1,-0x1);if(!bZ['equals'](c1['action']['transform'])){bZ['copy'](c1['action']['transform']);const c5=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bZ),c6=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c5);a['Shader']['SetMatrix'](c6,c5);}}if(!I)d['drawElements'](d['TRIANGLES'],c1['length'],d['UNSIGNED_SHORT'],c1['start']*0x2);else d['drawElements'](d['LINES'],c1['length'],d['UNSIGNED_SHORT'],c1['start']*0x2);c['AddDrawCount']();}}function bs(bP,bQ){let bR=Y['get'](bP['uuid']);if(bR===undefined)return;if(bR['query']===undefined)return;if(bR['queryInProgress']&&d['getQueryParameter'](bR['query'],d['QUERY_RESULT_AVAILABLE'])){let bY=!d['getQueryParameter'](bR['query'],d['QUERY_RESULT']);bY!=bR['occluded']&&(bR['renderEnableOcclusion']=!bY),bR['occluded']=bY,bR['queryInProgress']=![],c['occlusionProcessCount']--;}if(bR['occluded'])c['AddOcclusionCullingCount']();if(bR['queryInProgress']){bR['renderEnableOcclusion']=!bR['occluded'];return;}if(!bP['flag']['renderEnable'])return;if(bR['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(bR['queryInProgress'])return;d['beginQuery'](d['ANY_SAMPLES_PASSED_CONSERVATIVE'],bR['query']),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bS=0x3,bT=d['FLOAT'],bU=![],bV=0x0,bW=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bS,bT,bU,bV,bW);bP['attribs']['a_normal']['buffer']!==null&&a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],bS,bT,bU,bV,bW));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{a['Shader']['SetMatrix'](a['Camera']['matMVP'],a['Camera']['matMV']);let bZ=bQ===undefined?new b['Color'](0x0,0x0,0x0,0xff):bQ,c0=bZ['glColor']();a['Shader']['SetGLColor'](c0['r'],c0['g'],c0['b'],c0['a']);}let bX=new b['Matrix4']();for(let c1=0x0;c1<bR['listProcess']['length'];c1++){let c2=bR['listProcess'][c1];if(c2['processKind']===0x1)continue;if(a['Shader']['GetUseUpdateMatrixManager']()&&c2['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c2['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1,-0x1);if(!bX['equals'](c2['action']['transform'])){bX['copy'](c2['action']['transform']);const c3=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bX),c4=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c3);a['Shader']['SetMatrix'](c4,c3);}}d['drawElements'](d['TRIANGLES'],c2['length'],d['UNSIGNED_SHORT'],c2['start']*0x2);}d['endQuery'](d['ANY_SAMPLES_PASSED_CONSERVATIVE']),bR['queryInProgress']=!![],c['occlusionProcessCount']++,bR['renderEnableOcclusion']=!bR['occluded'];}function bt(bP,bQ){let bR=Y['get'](bP['uuid']);if(bR===undefined)return;if(bR['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(!bP['flag']['renderEnable'])return;if(c['enableOcclusion']){if(bR['occluded'])return;}d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bS=0x3,bT=d['FLOAT'],bU=![],bV=0x0,bW=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bS,bT,bU,bV,bW);bP['attribs']['a_normal']['buffer']!==null&&a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],bS,bT,bU,bV,bW));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{a['Shader']['SetMatrix'](a['Camera']['matMVP'],a['Camera']['matMV']);let bY=bQ===undefined?new b['Color'](0x0,0x0,0x0,0xff):bQ,bZ=bY['glColor']();a['Shader']['SetGLColor'](bZ['r'],bZ['g'],bZ['b'],bZ['a']);}let bX=new b['Matrix4']();for(let c0=0x0;c0<bR['listProcess']['length'];c0++){let c1=bR['listProcess'][c0];if(c1['processKind']===0x1)continue;if(a['Shader']['GetUseUpdateMatrixManager']()&&c1['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c1['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1,-0x1);if(!bX['equals'](c1['action']['transform'])){bX['copy'](c1['action']['transform']);const c2=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bX),c3=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c2);a['Shader']['SetMatrix'](c3,c2);}}d['drawElements'](d['TRIANGLES'],c1['length'],d['UNSIGNED_SHORT'],c1['start']*0x2);}}function bu(bP){let bQ=Y['get'](bP['uuid']);if(bQ===undefined)return;if(bQ['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(!bP['flag']['renderEnable'])return;if(c['enableOcclusion']){if(bQ['occluded'])return;}d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bR=0x3,bS=d['FLOAT'],bT=![],bU=0x0,bV=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bR,bS,bT,bU,bV);a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],bT,bU,bV));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bZ=new b['Matrix4']();bZ['copy'](a['Camera']['cameraMatrix']);const c0=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bZ);a['Shader']['SetMatrix'](c0,bZ),a['Shader']['SetClipping'](bZ);}let bW=bP['tag'][0x0],bX=bW['color'],bY=new b['Matrix4']();for(let c1=0x0;c1<bQ['listProcess']['length'];c1++){let c2=bQ['listProcess'][c1];if(c2['processKind']!==0x0)continue;if(a['Configuration']['Model']['Selection']['Kind']===b['Enum']['SelectionObject3DTypes']['OPAQUE_OBJECT3D']){let c3=bX;if(c2['action']['color']!==undefined)c3=c2['action']['color'];else{if(c2['action']['customColor'])c2['action']['color']!==undefined&&(c3=c2['action']['color']);else{if(c2['action']['material']>=0x0){let c4=a['Material']['GetMaterial'](c2['action']['material']);if(c4!==undefined)c3=c4['color'];}l&&(c3=m);}}if(c3['a']<0xff)continue;}if(a['Shader']['GetUseUpdateMatrixManager']()&&c2['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c2['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1);if(!bY['equals'](c2['action']['transform'])){bY['copy'](c2['action']['transform']);const c5=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bY),c6=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c5);a['Shader']['SetMatrix'](c6,c5);}}d['drawElements'](d['TRIANGLES'],c2['length'],d['UNSIGNED_SHORT'],c2['start']*0x2);}}function bv(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),a['Shader']['BindTargetTexture']();const bR=bP,bS=d['canvas']['height']-bQ,bT=new Uint8Array(0x4);d['readPixels'](bR,bS,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],bT);const bU=bT[0x0]+(bT[0x1]<<0x8)+(bT[0x2]<<0x10)+bT[0x3]*0x1000000;a['Shader']['EndFramebuffer']();if(bU===0x0)return undefined;let bV=a['Data']['GetBodyByColorIdx'](bU);return bV;}function bw(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),a['Shader']['BindTargetTexture']();const bR=bP,bS=d['canvas']['height']-bQ,bT=new Uint8Array(0x4);d['readPixels'](bR,bS,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],bT);const bU=bT[0x0]+(bT[0x1]<<0x8)+(bT[0x2]<<0x10)+bT[0x3]*0x1000000;a['Shader']['EndFramebuffer']();if(bU===0x0)return undefined;let bV=a['CustomObject']['GetObjectByColorIdx'](bU);if(bV===undefined)return undefined;return bV[0x1];}function bx(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PICK']),a['Shader']['BindTargetTexture']();const bR=bP,bS=d['canvas']['height']-bQ,bT=new Uint8Array(0x4);d['readPixels'](bR,bS,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],bT);const bU=bT[0x0]+(bT[0x1]<<0x8)+(bT[0x2]<<0x10)+bT[0x3]*0x1000000;a['Shader']['EndFramebuffer']();if(bU===0x0)return undefined;let bV=a['CustomObject']['GetObjectByColorIdx'](bU);return bV;}function by(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['PRESELECT']),a['Shader']['BindTargetTexture']();let bR=0x9,bS=Math['floor'](bR*0.5);const bT=bP,bU=d['canvas']['height']-bQ,bV=bT-bS,bW=bU-bS;if(!![]){let bY=undefined,bZ=bR*bR;const c0=new Uint8Array(bZ*0x4);d['readPixels'](bV,bW,bR,bR,d['RGBA'],d['UNSIGNED_BYTE'],c0),a['Shader']['EndFramebuffer']();for(let c1=0x0;c1<bZ;c1++){const c2=c0[c1*0x4+0x0]+(c0[c1*0x4+0x1]<<0x8)+(c0[c1*0x4+0x2]<<0x10)+c0[c1*0x4+0x3]*0x1000000;if(c2===0x0)continue;if(bY!==undefined){if(bY['id']===c2)continue;}let c3=a['Pick']['GetPreselectDataByID'](c2);if(bY===undefined)bY=c3;}return bY;}let bX=undefined;for(let c4=0x0;c4<=bS;c4++){for(let c5=0x0;c5<=bS;c5++){const c6=new Uint8Array(0x4);d['readPixels'](bV+c4,bW+c5,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],c6);const c7=c6[0x0]+(c6[0x1]<<0x8)+(c6[0x2]<<0x10)+c6[0x3]*0x1000000;if(c7===0x0)continue;if(bX!==undefined){if(bX['id']===c7)continue;}let c8=a['Pick']['GetPreselectDataByID'](c7);if(bX===undefined)bX=c8;else bX['pickKind']!==c8['pickKind']&&((bX['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['EDGE']||bX['pickKind']===b['Enum']['PRESELECT_PICK_KIND']['CIRCLE'])&&((c8['pickKind']!==b['Enum']['PRESELECT_PICK_KIND']['EDGE']||c8['pickKind']!==b['Enum']['PRESELECT_PICK_KIND']['CIRCLE'])&&(bX=c8)));}}return a['Shader']['EndFramebuffer'](),bX;}function bz(bP,bQ){a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['DEPTH']),a['Shader']['BindTargetTexture']();const bR=bP,bS=d['canvas']['height']-bQ,bT=new Uint8Array(0x4);d['readPixels'](bR,bS,0x1,0x1,d['RGBA'],d['UNSIGNED_BYTE'],bT),a['Shader']['EndFramebuffer']();if(bT[0x0]===0x0&&bT[0x1]===0x0&&bT[0x2]===0x0&&bT[0x3]===0x0)return undefined;let bU=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],a['Camera']['cameraMatrix']),bV=new b['Vector3'](),bW=bT[0x0]+bT[0x1]*0x100+bT[0x2]*0x10000;bV['x']=bP,bV['y']=bQ;const bX=0xffffff;if(a['Camera']['perspectiveView'])bV['z']=bW/bX;else bV['z']=bW/bX*0x2-0x1;let bY=a['Camera']['screen2WorldWithMatrix'](bU,bV);return bY;}function bA(bP){let bQ=Y['get'](bP['uuid']);if(bQ===undefined)return;if(bQ['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(!bP['flag']['renderEnable'])return;if(c['enableOcclusion']){if(bQ['occluded'])return;}d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bR=0x3,bS=d['FLOAT'],bT=![],bU=0x0,bV=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bR,bS,bT,bU,bV);bP['attribs']['a_normal']['buffer']!==null&&a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0));a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],bT,bU,bV));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bX=new b['Matrix4']()['copy'](a['Camera']['matMV']),bY=new b['Matrix4']()['copy'](a['Camera']['matMVP']);a['Shader']['SetMatrix'](bY,bX),a['Shader']['SetClipping'](bX);}let bW=new b['Matrix4']();for(let bZ=0x0;bZ<bQ['listProcess']['length'];bZ++){let c0=bQ['listProcess'][bZ];if(c0['processKind']!==0x0)continue;if(a['Shader']['GetUseUpdateMatrixManager']()&&c0['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c0['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1);if(!bW['equals'](c0['action']['transform'])){bW['copy'](c0['action']['transform']);const c1=new b['Matrix4']()['multiplyMatrices'](a['Camera']['matMV'],bW),c2=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c1);a['Shader']['SetMatrix'](c2,c1);}}d['drawElements'](d['TRIANGLES'],c0['length'],d['UNSIGNED_SHORT'],c0['start']*0x2);}}function bB(bP,bQ,bR){if(!bP['flag']['renderEnable'])return;let bS=Y['get'](bP['uuid']);if(bS===undefined)return;if(bS['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bT=0x3,bU=d['FLOAT'],bV=![],bW=0x0,bX=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bT,bU,bV,bW,bX);bP['attribs']['a_normal']['buffer']!==null&&a['Shader']['normalAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['vertexAttribPointer'](a['Shader']['normalAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0));a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],bV,bW,bX));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bZ=new b['Matrix4']()['copy'](bR),c0=new b['Matrix4']()['multiplyMatrices'](bQ,bR);a['Shader']['SetMatrix'](c0,bZ),a['Shader']['SetClipping'](bZ);}let bY=new b['Matrix4']();for(let c1=0x0;c1<bS['listProcess']['length'];c1++){let c2=bS['listProcess'][c1];if(c2['processKind']!==0x0)continue;if(a['Shader']['GetUseUpdateMatrixManager']()&&c2['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c2['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1);if(!bY['equals'](c2['action']['transform'])){bY['copy'](c2['action']['transform']);const c3=new b['Matrix4']()['multiplyMatrices'](bR,bY),c4=new b['Matrix4']()['multiplyMatrices'](bQ,c3);a['Shader']['SetMatrix'](c4,c3);}}d['drawElements'](d['TRIANGLES'],c2['length'],d['UNSIGNED_SHORT'],c2['start']*0x2);}}function bC(bP){let bQ=Y['get'](bP['uuid']);if(bQ===undefined)return;if(bQ['listProcess']['length']<=0x0)return;if(bP['attribs']['a_index']['buffer']===null)return;if(!bP['flag']['renderEnable'])return;if(c['enableOcclusion']){if(bQ['occluded'])return;}d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']);let bR=0x3,bS=d['FLOAT'],bT=![],bU=0x0,bV=0x0;d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],bR,bS,bT,bU,bV);a['Shader']['colorAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['vertexAttribPointer'](a['Shader']['colorAttributeLocation'],0x4,d['UNSIGNED_BYTE'],bT,bU,bV));d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']);{const bX=new b['Matrix4']();bX['copy'](a['Camera']['cameraMatrix']);const bY=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bX);a['Shader']['SetMatrix'](bY,bX),a['Shader']['SetClipping'](bX);}let bW=new b['Matrix4']();for(let bZ=0x0;bZ<bQ['listProcess']['length'];bZ++){let c0=bQ['listProcess'][bZ];if(!c0['action']['selection'])continue;if(c0['processKind']!==0x0)continue;if(a['Shader']['GetUseUpdateMatrixManager']()&&c0['action']['transformIdx']>0x0)a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],c0['action']['transformIdx']),bP['attribs']['a_matrixIndex']['buffer']!==null&&a['Shader']['updateMatrixAttributeLocation']>=0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']),d['vertexAttribPointer'](a['Shader']['updateMatrixAttributeLocation'],0x3,d['UNSIGNED_SHORT'],![],0x0,0x0));else{a['Shader']['SetUpdateModelMatrixData'](bP['uuid'],-0x1);if(!bW['equals'](c0['action']['transform'])){bW['copy'](c0['action']['transform']);const c1=new b['Matrix4']()['multiplyMatrices'](a['Camera']['cameraMatrix'],bW),c2=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],c1);a['Shader']['SetMatrix'](c2,c1);}}d['drawElements'](d['TRIANGLES'],c0['length'],d['UNSIGNED_SHORT'],c0['start']*0x2);}}function bD(bP,bQ,bR,bS,bT,bU,bV){a['Shader']['BeginShader'](bQ);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined);if(bU===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let c3=bU['glColor']();a['Shader']['SetGLColor'](c3['r'],c3['g'],c3['b'],c3['a']);}if(bV===undefined)bV=0x0;let bW;if(bP===0x0)bW=[0.25,0.35,0.5,0.75,0.35,0.5,0.25,0.85,0.5,0.75,0.85,0.5];else{if(bP===0x1)bW=[0.25,-0.225,0.5,0.75,-0.225,0.5,0.25,0.225,0.5,0.75,0.225,0.5];else bP===0x2&&(bW=[0.25,-0.85,0.5,0.75,-0.85,0.5,0.25,-0.35,0.5,0.75,-0.35,0.5]);}let bX=[0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1],bY=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bY),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bW),d['STATIC_DRAW']);let bZ=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bZ),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bX),d['STATIC_DRAW']),a['Shader']['SetCurrentTexture']('u_Texture',d['TEXTURE_2D'],bR);let c0=d['getUniformLocation'](a['Shader']['currentProgram'],'uTexScale');c0&&d['uniform2f'](c0,bS,bT);let c1=d['getUniformLocation'](a['Shader']['currentProgram'],'uSigma');c1&&d['uniform1f'](c1,0x1);let c2=d['getUniformLocation'](a['Shader']['currentProgram'],'uLevel');c2&&d['uniform1f'](c2,bV),d['bindBuffer'](d['ARRAY_BUFFER'],bY),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ARRAY_BUFFER'],bZ),d['vertexAttribPointer'](a['Shader']['uvAttributeLocation'],0x2,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4),d['deleteBuffer'](bY),d['deleteBuffer'](bZ),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bE(bP,bQ,bR,bS,bT){let bU=a['Shader']['GetItemFramebuffer'](bQ);bF(bP,bU['targetTexture'][0x0],bU['width'],bU['height'],bR,bS,bT);}function bF(bP,bQ,bR,bS,bT,bU,bV){a['Shader']['BeginShader'](bP);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined);if(bT===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let bZ=bT['glColor']();a['Shader']['SetGLColor'](bZ['r'],bZ['g'],bZ['b'],bZ['a']);}if(bU===undefined)bU=0x0;a['Shader']['SetCurrentTexture']('u_Texture',d['TEXTURE_2D'],bQ);let bW=d['getUniformLocation'](a['Shader']['currentProgram'],'uTexScale');bW&&d['uniform2f'](bW,bR,bS);let bX=d['getUniformLocation'](a['Shader']['currentProgram'],'uSigma');bX&&d['uniform1f'](bX,0x1);let bY=d['getUniformLocation'](a['Shader']['currentProgram'],'uLevel');bY&&d['uniform1f'](bY,bU),a['RenderWGL']['Util_RenderQuad'](bV),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bG(bP,bQ,bR,bS,bT,bU,bV,bW,bX){a['Shader']['BeginShader'](bP);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined);if(bW===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let c2=bW['glColor']();a['Shader']['SetGLColor'](c2['r'],c2['g'],c2['b'],c2['a']);}a['Shader']['SetCurrentTexture']('u_Texture',d['TEXTURE_2D'],bQ);let bY=d['getUniformLocation'](a['Shader']['currentProgram'],'uTexScale');bY&&d['uniform2f'](bY,bR,bS);let bZ=d['getUniformLocation'](a['Shader']['currentProgram'],'uDirection');bZ&&d['uniform2f'](bZ,bU['x'],bU['y']);let c0=d['getUniformLocation'](a['Shader']['currentProgram'],'uSigma');c0&&d['uniform1f'](c0,bV);let c1=d['getUniformLocation'](a['Shader']['currentProgram'],'uBlurType');c1&&d['uniform1i'](c1,bT),a['RenderWGL']['Util_RenderQuad'](bX),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bH(bP,bQ,bR,bS){a['Shader']['BeginShader'](bP);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined),a['Shader']['SetCurrentTexture']('u_Texture',d['TEXTURE_2D'],bQ);let bT=d['getUniformLocation'](a['Shader']['currentProgram'],'uTexScale');bT&&d['uniform2f'](bT,trgWidth,trgHeight),a['Shader']['SetCurrentTexture']('u_subTexture',d['TEXTURE_2D'],bR),a['RenderWGL']['Util_RenderQuad'](bS),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bI(bP,bQ,bR,bS){a['Shader']['BeginShader'](bP);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined),a['Shader']['SetGLCameraData']();let bT=a['Shader']['GetPositionTexture'](),bU=a['Shader']['GetNormalTexture']();a['Shader']['SetCurrentTexture']('u_PositionTexture',d['TEXTURE_2D'],bT['texture']),a['Shader']['SetCurrentTexture']('u_NormalTexture',d['TEXTURE_2D'],bU['texture']),a['Shader']['SetGLNoiseData']();let bV=d['getUniformLocation'](a['Shader']['currentProgram'],'uBias');bV&&d['uniform1f'](bV,0.025);let bW=d['getUniformLocation'](a['Shader']['currentProgram'],'uSigma');bW&&d['uniform1f'](bW,0x10);let bX=d['getUniformLocation'](a['Shader']['currentProgram'],'uLevel');bX&&d['uniform1f'](bX,bR),a['RenderWGL']['Util_RenderQuad'](bS),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bJ(bP,bQ){a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['FRAMEBUFFERMARGE']);{a['Shader']['SetMatrix'](new b['Matrix4'](),undefined);let bR=[-0x1,-0x1,0.5,0x1,-0x1,0.5,-0x1,0x1,0.5,0x1,0x1,0.5],bS=[0x0,0x0,0x1,0x0,0x0,0x1,0x1,0x1],bT=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bT),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bR),d['STATIC_DRAW']);let bU=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bU),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bS),d['STATIC_DRAW']);let bV=d['getUniformLocation'](a['Shader']['currentProgram'],'u_Texture');a['Shader']['BindTargetTextureByType'](bP),d['uniform1i'](bV,0x0);let bW=d['getUniformLocation'](a['Shader']['currentProgram'],'u_DepthTexture');a['Shader']['BindTargetDepthByType'](bP),d['uniform1i'](bW,0x1);let bX=d['getUniformLocation'](a['Shader']['currentProgram'],'u_margeTexture');a['Shader']['BindTargetTextureByType'](bQ),d['uniform1i'](bX,0x2);let bY=d['getUniformLocation'](a['Shader']['currentProgram'],'u_margeDepthTexture');a['Shader']['BindTargetDepthByType'](bQ),d['uniform1i'](bY,0x3),d['bindBuffer'](d['ARRAY_BUFFER'],bT),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['bindBuffer'](d['ARRAY_BUFFER'],bU),d['vertexAttribPointer'](a['Shader']['uvAttributeLocation'],0x2,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4),d['deleteBuffer'](bT),d['deleteBuffer'](bU),d['bindTexture'](d['TEXTURE_2D'],null);}a['Shader']['EndShader']();}function bK(){if(a['Data']['ObjectsBBox']===undefined)return;U=[],U[0x0]=[],U[0x1]=[];let bP=0x0,bQ=0x0;d['disable'](d['DEPTH_TEST']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);const bR=new b['Matrix4']()['copy'](a['Camera']['matMV']),bS=new b['Matrix4']()['copy'](a['Camera']['matMVP']);let bT=new b['Vector3'](a['Data']['ObjectsBBox']['min']['x'],a['Data']['ObjectsBBox']['min']['y'],a['Data']['ObjectsBBox']['min']['z']),bU=new b['Vector3'](a['Data']['ObjectsBBox']['max']['x'],a['Data']['ObjectsBBox']['max']['y'],a['Data']['ObjectsBBox']['min']['z']),bV=new b['Vector3']((bT['x']+bU['x'])/0x2,(bT['y']+bU['y'])/0x2,(bT['z']+bU['z'])/0x2),bW=new b['Vector3']()['copy'](bV)['sub'](bT)['length']();bW*=N;let bX=0x0,bY=0x0,bZ=new b['Vector3'](bT['x']-bW*M,bT['y']-bW*M,bT['z']),c0=new b['Vector3'](bU['x']+bW*M,bU['y']+bW*M,bT['z']);{d['cullFace'](d['FRONT']),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](bS,bR),a['Shader']['SetGLLight'](),a['Shader']['SetClipping'](undefined);if(O===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let c3=O['glColor']();a['Shader']['SetGLColor'](c3['r'],c3['g'],c3['b'],c3['a']);}let c1=[bZ['x'],bZ['y'],bZ['z']-bX,c0['x'],bZ['y'],bZ['z']-bX,bZ['x'],c0['y'],bZ['z']-bX,c0['x'],c0['y'],bZ['z']-bX],c2=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c2),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c1),d['STATIC_DRAW']),d['bindBuffer'](d['ARRAY_BUFFER'],c2),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4),d['deleteBuffer'](c2),a['Shader']['EndShader'](),d['cullFace'](d['FRONT_AND_BACK']);}{let c4=P;if(!Q){let ce=new b['Matrix4']()['copy'](a['Camera']['projectionMatrix']),cf=a['Camera']['world2ScreenWithMatrix'](ce,new b['Vector3']()['copy'](bV)),cg=a['Camera']['screen2WorldWithMatrix'](ce,new b['Vector3']()['copy'](cf)),ch=a['Camera']['screen2WorldWithMatrix'](ce,new b['Vector3'](cf['x']+R,cf['y'],cf['z'])),ci=new b['Vector3']()['copy'](ch)['sub'](cg)['length'](),cj=Math['floor'](ci)-Math['floor'](ci)%P;c4=Math['max'](c4,cj);}a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](bS,bR),a['Shader']['SetClipping'](undefined);if(O===undefined)a['Shader']['SetGLColor'](0x1,0x1,0x1,0x1);else{let ck=S['glColor']();a['Shader']['SetGLColor'](ck['r'],ck['g'],ck['b'],ck['a']);}let c5=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],c5),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0);let c6=0x7530,c7=0x0,c8=[],c9=Math['floor'](Math['floor'](bZ['x'])/c4);c9++;let ca=Math['floor'](Math['floor'](c0['x'])/c4),cb=ca-c9;for(let cl=c9;cl<=ca;cl++){c8[c7+0x0]=cl*c4,c8[c7+0x1]=bZ['y'],c8[c7+0x2]=bZ['z']-bY,c7+=0x3,c8[c7+0x0]=cl*c4,c8[c7+0x1]=c0['y'],c8[c7+0x2]=c0['z']-bY,c7+=0x3;{U[0x0][bP+0x0]=new b['Vector3'](c8[c7-0x6],c8[c7-0x5],c8[c7-0x4]),U[0x0][bP+0x1]=new b['Vector3'](c8[c7-0x3],c8[c7-0x2],c8[c7-0x1]);}bP+=0x2,c7+0x6>c6&&(d['bindBuffer'](d['ARRAY_BUFFER'],c5),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c8),d['STATIC_DRAW']),d['drawArrays'](d['LINES'],0x0,c7/0x3),c7=0x0);}c7>0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],c5),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c8),d['STATIC_DRAW']),d['drawArrays'](d['LINES'],0x0,c7/0x3));c7=0x0,c8=[];let cc=Math['floor'](Math['floor'](bZ['y'])/c4);cc++;let cd=Math['floor'](Math['floor'](c0['y'])/c4);for(let cm=cc;cm<=cd;cm++){c8[c7+0x0]=bZ['x'],c8[c7+0x1]=cm*c4,c8[c7+0x2]=bZ['z']-bY,c7+=0x3,c8[c7+0x0]=c0['x'],c8[c7+0x1]=cm*c4,c8[c7+0x2]=c0['z']-bY,c7+=0x3;{U[0x1][bQ+0x0]=new b['Vector3'](c8[c7-0x6],c8[c7-0x5],c8[c7-0x4]),U[0x1][bQ+0x1]=new b['Vector3'](c8[c7-0x3],c8[c7-0x2],c8[c7-0x1]);}bQ+=0x2,c7+0x6>c6&&(d['bindBuffer'](d['ARRAY_BUFFER'],c5),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c8),d['STATIC_DRAW']),d['drawArrays'](d['LINES'],0x0,c7/0x3),c7=0x0);}c7>0x0&&(d['bindBuffer'](d['ARRAY_BUFFER'],c5),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(c8),d['STATIC_DRAW']),d['drawArrays'](d['LINES'],0x0,c7/0x3)),d['deleteBuffer'](c5),a['Shader']['EndShader']();}}function bL(){if(!L||!T)return;let bP=new b['Matrix4']()['copy'](a['Camera']['matMVP']),bQ=0xa,bR=0x2;e['font']=bQ+'pt\x20Arial',e['fillStyle']='rgba(0,\x200,\x200,\x201.0)';for(let bS=0x0;bS<0x2;bS++){for(let bT=0x0;bT<U[bS]['length'];bT+=0x2){let bU,bV,bW,bX;bU=new b['Vector3']()['copy'](U[bS][bT+0x0]),bV=new b['Vector3']()['copy'](U[bS][bT+0x1]);if(aj(bV,V))continue;bW=au(bP,bU),bX=au(bP,bV);let bY=new b['Vector2']()['subVectors'](bX,bW);bY['normalize']();let bZ='';if(bS===0x0)bZ+=U[bS][bT+0x0]['x'];else{if(bS===0x1)bZ+=U[bS][bT+0x0]['y'];}const c0=b6(bZ,bQ);let c1=c0['width']+bR*0x2,c2=c0['height']+bR*0x2,c3=new b['Vector2']()['addVectors'](bX,new b['Vector2']()['copy'](bY)['multiplyScalar'](c1));e['fillText'](bZ,c3['x'],c3['y']+(c0['ascent']*0x0+c0['ascent']+bR*0x0));}}}function bM(){d['disable'](d['DEPTH_TEST']),d['enable'](d['BLEND']),d['blendFunc'](d['SRC_ALPHA'],d['ONE_MINUS_SRC_ALPHA']);if(!a['Clipping']['IsClipping']())return;let bP=a['Clipping']['Get']();if(!bP['visible'])return;const bQ=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bQ);a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['BASIC2D']),a['Shader']['SetMatrix'](bR,undefined);for(let bS=0x0;bS<bP['planes']['length'];bS++){let bT=bP['planes'][bS]['style']['color']['glColor']();a['Shader']['SetGLColor'](bT['r'],bT['g'],bT['b'],bT['a']);if(bP['planes'][bS]['vertex']['length']<0x3)continue;let bU=[bP['planes'][bS]['vertex'][0x0]['x'],bP['planes'][bS]['vertex'][0x0]['y'],bP['planes'][bS]['vertex'][0x0]['z'],bP['planes'][bS]['vertex'][0x1]['x'],bP['planes'][bS]['vertex'][0x1]['y'],bP['planes'][bS]['vertex'][0x1]['z'],bP['planes'][bS]['vertex'][0x2]['x'],bP['planes'][bS]['vertex'][0x2]['y'],bP['planes'][bS]['vertex'][0x2]['z'],bP['planes'][bS]['vertex'][0x3]['x'],bP['planes'][bS]['vertex'][0x3]['y'],bP['planes'][bS]['vertex'][0x3]['z']],bV=d['createBuffer']();d['bindBuffer'](d['ARRAY_BUFFER'],bV),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bU),d['STATIC_DRAW']),d['vertexAttribPointer'](a['Shader']['positionAttributeLocation'],0x3,d['FLOAT'],![],0x0,0x0),d['drawArrays'](d['TRIANGLE_STRIP'],0x0,0x4);let bW=d['createBuffer']();{let bX=[0x0,0x1,0x3,0x2,0x0];bT=bP['planes'][bS]['style']['lineColor']['glColor'](),a['Shader']['SetGLColor'](bT['r'],bT['g'],bT['b'],bT['a']),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bW),d['bufferData'](d['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bX),d['STATIC_DRAW']),d['drawElements'](d['LINE_STRIP'],bX['length'],d['UNSIGNED_SHORT'],0x0);}d['deleteBuffer'](bV),d['deleteBuffer'](bW);}a['Shader']['EndShader']();}function bN(){d['enable'](d['DEPTH_TEST']),d['enable'](d['BLEND']),a['Handle']['Render']();return;let bP=a['Handle']['Handler']();if(a['Control']['GetMode']()!==b['Enum']['CONTROL_STATE']['NORMAL'])return;if(bP['length']<=0x0)return;let bQ=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']);const bR=new b['Matrix4']()['multiplyMatrices'](a['Camera']['projectionMatrix'],bQ);bQ['setPosition'](new b['Vector3']()),a['Shader']['BeginShader'](b['Enum']['SHADER_TYPES']['PHONG']),d['enable'](d['DEPTH_TEST']),d['enable'](d['BLEND']),a['Shader']['SetGLLight'](),a['Shader']['SetClipping'](undefined),a['Shader']['SetMatrix'](a['Camera']['screenProjectionMatrix'],new b['Matrix4']());for(let bS=0x0;bS<bP['length'];bS++){const bT=bP[bS];if(!bT['enable'])continue;if(!bT['visible'])continue;if(bT['object']===undefined)continue;let bU=new b['Vector3']()['copy'](bT['center']);bU=a['Camera']['world2ScreenWithMatrix'](bR,bU);let bV=new b['Vector3']()['copy'](bT['axis']['x']['normal']);bV=bV['applyMatrix4'](bQ),bV['y']*=-0x1;let bW=new b['Vector3']()['copy'](bT['axis']['y']['normal']);bW=bW['applyMatrix4'](bQ),bW['y']*=-0x1;let bX=new b['Vector3']()['copy'](bT['axis']['z']['normal']);bX=bX['applyMatrix4'](bQ),bX['y']*=-0x1;const bY=bT['style']['length'],bZ=bT['style']['length']*1.2,c0=bT['style']['radius'],c1=bT['style']['radius']*1.4,c2=bT['style']['radius']*2.5;{if(bT['axis']['x']['enable']){let c3=new b['Color'](0xff,0x0,0x0,0xff),c4=c3['glColor']();a['Shader']['SetGLColor'](c4['r'],c4['g'],c4['b'],c4['a']);let c5=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bV)['multiplyScalar'](bY)),c6=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bV)['multiplyScalar'](bZ));bb(bU,c5,c0),bc(c5,c6,c1);}if(bT['axis']['y']['enable']){let c7=new b['Color'](0x0,0xff,0x0,0xff),c8=c7['glColor']();a['Shader']['SetGLColor'](c8['r'],c8['g'],c8['b'],c8['a']);let c9=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bW)['multiplyScalar'](bY)),ca=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bW)['multiplyScalar'](bZ));bb(bU,c9,c0),bc(c9,ca,c1);}if(bT['axis']['z']['enable']){let cb=new b['Color'](0x64,0x64,0xff,0xff),cc=cb['glColor']();a['Shader']['SetGLColor'](cc['r'],cc['g'],cc['b'],cc['a']);let cd=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bX)['multiplyScalar'](bY)),ce=new b['Vector3']()['addVectors'](bU,new b['Vector3']()['copy'](bX)['multiplyScalar'](bZ));bb(bU,cd,c0),bc(cd,ce,c1);}}{if(bT['panel']['xy']['enable']){}if(bT['panel']['yz']['enable']){}if(bT['panel']['zx']['enable']){}}{if(bT['rotate']['x']['enable']){}if(bT['rotate']['y']['enable']){}if(bT['rotate']['z']['enable']){}}if(bT['axis']['x']['enable']&&bT['axis']['y']['enable']&&bT['axis']['z']['enable']){let cf=new b['Color'](0x7f,0x7f,0x7f,0xff),cg=cf['glColor']();a['Shader']['SetGLColor'](cg['r'],cg['g'],cg['b'],cg['a']),bd(bU,c2);}}a['Shader']['EndShader']();}this['SetData']=function(){let bP=a['Data']['ObjectsUpdateLength'],bQ=a['Data']['Objects']['length'];for(let bR=bP;bR<bQ;++bR){a['Renderer']['SetDataByObject'](a['Data']['Objects'][bR]);}a['Renderer']['Render'](),a['Data']['ObjectsUpdateLength']=a['Data']['Objects']['length'];},this['SetDataCache']=function(){if(!a['useFramebuffer'])return;let bP=a['RenderMeshBlockCacheNum'],bQ=0x0,bR=function(bS,bT,bU){if(bQ>=bP)for(let bV=0x0;bV<bS['length'];bV++){bS[bV]['flag']['cache']=![];}else return!![];bQ++;};a['Data']['ObjectMap']['forEach'](bR);},this['SetDataByObject']=function(bP){let bQ=bP['tag'][0x0],bR=bQ['color'],bS=![];bP['attribs']['a_index']['buffer']===null&&bP['attribs']['a_index']['array']['length']>0x0&&(bP['attribs']['a_index']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ELEMENT_ARRAY_BUFFER'],bP['attribs']['a_index']['buffer']),d['bufferData'](d['ELEMENT_ARRAY_BUFFER'],new Uint16Array(bP['attribs']['a_index']['array']),d['STATIC_DRAW']),bS=!![]);bP['attribs']['a_position']['buffer']===null&&bP['attribs']['a_position']['array']['length']>0x0&&(bP['attribs']['a_position']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_position']['buffer']),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bP['attribs']['a_position']['array']),d['STATIC_DRAW']),bS=!![]);bP['attribs']['a_normal']['buffer']===null&&bP['attribs']['a_normal']['array']['length']>0x0&&(bP['attribs']['a_normal']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_normal']['buffer']),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bP['attribs']['a_normal']['array']),d['STATIC_DRAW']),bS=!![]);if(a['UV_DEBUG'])bP['attribs']['a_uv']['buffer']===null&&bP['attribs']['a_uv']['array']['length']>0x0&&(bP['attribs']['a_uv']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_uv']['buffer']),d['bufferData'](d['ARRAY_BUFFER'],new Float32Array(bP['attribs']['a_uv']['array']),d['STATIC_DRAW']),bS=!![]);bP['attribs']['a_color']['buffer']===null&&bP['attribs']['a_color']['array']['length']>0x0&&(bP['attribs']['a_color']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_color']['buffer']),d['bufferData'](d['ARRAY_BUFFER'],new Uint8Array(bP['attribs']['a_color']['array']),d['STATIC_DRAW']),bS=!![]);if(bP['attribs']['a_matrixIndex']!==undefined){if(bP['attribs']['a_matrixIndex']['buffer']===null&&bP['attribs']['a_position']['array']['length']>0x0&&(bP['attribs']['a_matrixIndex']['array']['length']>0x0||a['DemoType']===0x2)){bP['attribs']['a_matrixIndex']['buffer']=d['createBuffer'](),d['bindBuffer'](d['ARRAY_BUFFER'],bP['attribs']['a_matrixIndex']['buffer']);if(a['DemoType']===0x2){bP['attribs']['a_matrixIndex']['array']=new Uint16Array(bP['attribs']['a_position']['array']['length']);let bT=new b['Matrix4']();for(let bU=0x0;bU<bP['tag']['length'];bU++){let bV=-0x1;a['Shader']['HasObjectMatrix'](bP['tag'][bU]['bodyId'])&&(bV=a['Shader']['GetObjectMatrixIndex'](bP['tag'][bU]['bodyId']));if(bV<0x0){bV=a['Shader']['AddUpdateMatrixDataByIndex'](bP['uuid']),a['Shader']['SetObjectMatrixIndex'](bP['tag'][bU]['bodyId'],bV);if(bP['tag'][bU]['action']['instance']['equals'](bT)===![])a['Shader']['ChangeUpdateMatrixData'](bP['uuid'],bV,bP['tag'][bU]['action']['instance']);}bV===0x0&&a['Shader']['ChangeUpdateMatrixData'](bP['uuid'],bV,bT);let bW=bP['tag'][bU]['m_triIdx']+bP['tag'][bU]['m_nTris'];for(let bX=bP['tag'][bU]['m_triIdx'];bX<bW;bX++){let bY=bP['attribs']['a_index']['array'][bX];bP['attribs']['a_matrixIndex']['array'][bY*0x3+0x0]=bV;}bP['tag'][bU]['action']['transformIdx']=bV;}}d['bufferData'](d['ARRAY_BUFFER'],new Uint16Array(bP['attribs']['a_matrixIndex']['array']),d['STATIC_DRAW']),bS=!![];}}bS&&(bP['flag']['updateProcess']=!![]);},this['ReleaseDataByCache']=function(bP){if(bP['flag']['cache'])return;a['RenderWGL']['ReleaseDataByObject'](bP);return;bP['attribs']['a_index']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['a_index']['buffer']),bP['attribs']['a_index']['buffer']=null,bP['attribs']['a_index']['array']=[]);bP['attribs']['a_position']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['a_position']['buffer']),bP['attribs']['a_position']['buffer']=null,bP['attribs']['a_position']['array']=[]);bP['attribs']['a_normal']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['a_normal']['buffer']),bP['attribs']['a_normal']['buffer']=null,bP['attribs']['a_normal']['array']=[]);if(a['UV_DEBUG'])bP['attribs']['a_uv']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['a_uv']['buffe']),bP['attribs']['a_uv']['buffer']=null,bP['attribs']['a_uv']['array']=[]);bP['attribs']['a_color']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['a_color']['buffer']),bP['attribs']['a_color']['buffer']=null,bP['attribs']['a_color']['array']=[]),bP['attribs']['a_matrixIndex']!==undefined&&(bP['attribs']['a_matrixIndex']['buffer']===null&&(d['deleteBuffer'](bP['attribs']['a_matrixIndex']['buffer']),bP['attribs']['a_matrixIndex']['buffer']=null,bP['attribs']['a_matrixIndex']['array']=[])),bP['attribs']['sub']['a_wireframe']['buffer']!==null&&(d['deleteBuffer'](bP['attribs']['sub']['a_wireframe']['buffer']),bP['attribs']['sub']['a_wireframe']['buffer']=null);},this['Render']=function(){c['RenderEvent']=!![];},this['Renderer']=function(){c['RenderEvent']&&(ah(),c['RenderEvent']=![]);},this['InitRenderProcess']=function(){a2();},this['RemoveGLBuffer']=function(bP){c['RenderEvent']=![];let bQ=a['Data']['ObjectsUpdateLength'];for(let bR=0x0;bR<bQ;bR++){let bS=a['Data']['Objects'][bR],bT=a['RenderWGL']['GetPipeline'](bS['uuid']);bT!==undefined&&bT['query']!==undefined&&d['deleteQuery'](bT['query']);if(!bS['flag']['cache'])continue;a['RenderWGL']['RemoveGLBuffer'](bS);if(!bP||bS['attribs']['a_index']['array']['length']<=0x0)continue;c['SetDataByObject'](bS);}},this['PickingCallback']=function(bP,bQ,bR,bS,bT){if(a['useFramebuffer']){if(bS!==undefined){let bU=bv(bP,bQ);if(bU!==undefined)return bS(bR,bU),!![];}if(bT!==undefined){let bV=bx(bP,bQ);if(bV!==undefined)return bT(bR,bV[0x0],bV[0x1]),!![];}}else{if(bS!==undefined){let bW=ai(bP,bQ);if(bW!==undefined)return bS(bR,bW),!![];}}return![];},this['Picking']=function(bP,bQ){if(a['useFramebuffer'])return bv(bP,bQ);else return ai(bP,bQ);},this['PickingByCustomObject']=function(bP,bQ){if(a['useFramebuffer'])return bx(bP,bQ);else return undefined;},this['PickingPreselectData']=function(bP,bQ){return by(bP,bQ);},this['PickPositionObject']=function(bP,bQ){return bz(bP,bQ);},this['Resize']=function(){W(d['canvas']),W(e['canvas']),d['viewport'](0x0,0x0,d['canvas']['width'],d['canvas']['height']),e['clearRect'](0x0,0x0,e['canvas']['width'],e['canvas']['height']);},this['GetSizeWidth']=function(){return d['canvas']['width'];},this['GetSizeHeight']=function(){return d['canvas']['height'];},this['MainFBClear']=function(bP){if(bP===undefined||bP===!![])a['MeshBlock']['Crash']();c['mainFramebufferClear']=!![];},this['SetXrayMode']=function(bP){if(l===bP)return;l=bP,a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetXrayMode']=function(){return l;},this['GetXrayModeColor']=function(){return m;},this['SetHiddenLineMode']=function(bP){if(w===bP)return;w=bP,a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['SetGraySacleMode']=function(bP){if(H===bP)return;H=bP,a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetGraySacleMode']=function(){return H;},this['SetWireframeMode']=function(bP){if(I===bP)return;I=bP;for(let bQ=0x0;bQ<a['Data']['ObjectsUpdateLength'];bQ++){let bR=a['Data']['Objects'][bQ];bR['flag']['updateProcess']=!![];}a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetWireframeMode']=function(){return I;},this['SetEnvironmentMode']=function(bP,bQ){if(K===bP)return;K=bP,a['Shader']['UpdateShader'](),(bQ===undefined||bQ)&&(a['MeshBlock']['Reset'](),a['Renderer']['Render']());},this['GetEnvironmentMode']=function(){return K;},this['UseSkyTexture']=function(){if(K)return!![];if(J)return!![];return![];},this['SetHDR']=function(bP){if(a['Shader']['UseHDR']===bP)return;a['Shader']['UseHDR']=bP,a['Shader']['UpdateShader'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetHDR']=function(){return a['Shader']['UseHDR'];},this['SetShadowMode']=function(bP){if(C===bP)return;C=bP,a['Shader']['UpdateShader'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetShadowMode']=function(){return C;},this['SetSSAOEffect']=function(bP,bQ){bQ!==undefined&&(z=bQ);if(y===bP)return;y=bP,y&&bQ===undefined&&(z=0x10),a['Renderer']['Render']();},this['GetSSAOEffect']=function(){return y;},this['SetUseEdgeEffect']=function(bP){n=bP,a['Renderer']['Render']();},this['GetUseEdgeEffect']=function(){return n;},this['SetUseSelectModelEdgeEffect']=function(bP){F=bP,a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['SetAvatarEdgeEffect']=function(bP,bQ){s=bP;if(bP&&bQ!==undefined)t=bQ;a['Renderer']['Render']();},this['GetAvatarEdgeEffect']=function(){return s;},this['GetAvatarEdgeTypeEffect']=function(){return t;},this['SetGroundPlane']=function(bP){if(L===bP)return;L=bP,a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetGroundPlane']=function(){return L;},this['SetEnableSkyBox']=function(bP){J=bP,a['Shader']['UpdateShader'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['Lock']=function(){k++;},this['Unlock']=function(bP){bP===undefined?k--:k=bP;if(k<0x0)k=0x0;},this['ClearProcess']=function(bP){if(bP===undefined){c['RenderEvent']=![];let bQ=function(bS,bT,bU){if(bS['query']!==undefined)d['deleteQuery'](bS['query']);};Y['forEach'](bQ),Y['clear'](),c['occlusionProcessCount']=0x0;let bR=a['Data']['ObjectsUpdateLength'];for(let bS=bR-0x1;bS>=0x0;bS--){let bT=a['Data']['Objects'][bS];if(!bT['flag']['cache'])continue;bT['flag']['cache']=![],a['Renderer']['ReleaseDataByCache'](bT);}a['Renderer']['MainFBClear'](),a['Renderer']['Render']();}else{c['RenderEvent']=![];let bU;for(let bV=0x0;bV<bP['length'];bV++){bU=a['Data']['ObjectMap']['get'](bP[bV]);if(bU!==undefined)for(let bW=0x0;bW<bU['length'];bW++){let bX=bU[bW];if(a['useFramebufferCache']){if(bX['flag']['cache']){a['CurrentRenderMeshBlockCacheNum']--;if(a['CurrentRenderMeshBlockCacheNum']<0x0)a['CurrentRenderMeshBlockCacheNum']=0x0;}}bX['flag']['cache']=![],Y['delete'](bX['uuid']),a['RenderWGL']['DeletePipeline'](bX['uuid']),a['Renderer']['ReleaseDataByCache'](bX);}}a['Renderer']['MainFBClear'](),a['Renderer']['Render']();}},this['Sort']=function(){bl();},this['UpdateCache']=function(){if(!a['Configuration']['Render']['Cache']['Enable'])return;let bP=a['Data']['ObjectsUpdateLength'],bQ=a['Configuration']['Render']['Cache']['LimitCount']*0x1,bR=0x0;for(let bS=0x0;bS<bP;bS++){if(a['Data']['Objects'][bS]['flag']['cache']){let bT=a['Data']['AreaListMap']['get'](a['Data']['Objects'][bS]['link']);if(bT!==undefined){if(bR<bQ){for(let bU=0x0;bU<bT['length'];bU++){bR+=bT[bU]['tri_num'];}continue;}a['Data']['Objects'][bS]['flag']['cache']=![],a['Renderer']['ReleaseDataByCache'](a['Data']['Objects'][bS]);}}}},this['SetBackColor']=function(bP,bQ){i=bP,j=bQ,c['Render']();},this['SetEdgeEffectColor']=function(bP){p=bP,c['Render']();},this['SetOcclusionCulling']=function(bP){if(a['useWebGL2']===![])return;c['enableOcclusion']=bP;},this['GetScreenPos']=function(bP,bQ){return au(bP,bQ);};function bO(bP,bQ,bR){a['Shader']['BeginFramebuffer'](bP),a['Shader']['BindTargetTexture']();let bS=a['Shader']['GetItemFramebuffer'](bP),bT=a['Shader']['GetItemFramebuffer'](bP),bU=new Uint8Array(bT['width']*bT['height']*0x4);d['readPixels'](0x0,0x0,bT['width'],bT['height'],d['RGBA'],d['UNSIGNED_BYTE'],bU);let bV=document['createElement']('canvasBuffer');bV['width']=bQ,bV['height']=bR;let bW=bV['getContext']('2d'),bX=bW['createImageData'](bQ,bR);bX['data']['set'](bU),context['putImageData'](bX,0x0,0x0);let bY=new Image();return bY['src']=bV['toDataURL'](),bY;}this['SaveImageFromBuffer']=function(bP){let bQ=new b['Color'](0xff,0xff,0xff,0xff);a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),bE(b['Enum']['SHADER_TYPES']['FXAA'],bP,bQ,0x0,!![]),a['Shader']['BindTargetTexture']();let bR=a['Shader']['GetItemFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),bS=new Uint8Array(bR['width']*bR['height']*0x4);d['readPixels'](0x0,0x0,bR['width'],bR['height'],d['RGBA'],d['UNSIGNED_BYTE'],bS),a['Shader']['EndFramebuffer'](),a['Util']['SaveImageData'](bS,bR['width'],bR['height']);},this['GetImageDataFromBuffer']=function(bP){let bQ=new b['Color'](0xff,0xff,0xff,0xff);a['Shader']['BeginFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),d['clearColor'](0x0,0x0,0x0,0x1),d['clear'](d['COLOR_BUFFER_BIT']|d['DEPTH_BUFFER_BIT']),bE(b['Enum']['SHADER_TYPES']['FXAA'],bP,bQ,0x0,!![]),a['Shader']['BindTargetTexture']();let bR=a['Shader']['GetItemFramebuffer'](b['Enum']['FB_RENDER_TYPES']['CUSTOM']),bS=new Uint8Array(bR['width']*bR['height']*0x4);return d['readPixels'](0x0,0x0,bR['width'],bR['height'],d['RGBA'],d['UNSIGNED_BYTE'],bS),a['Shader']['EndFramebuffer'](),{'data':bS,'width':bR['width'],'height':bR['height']};};};export default Renderer;