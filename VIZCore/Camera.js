let Camera=function(a,b){let c=this;this['projectionMatrixSrc']=undefined,this['projectionMatrix']=undefined,this['viewMatrix']=undefined,this['cameraMatrix']=undefined,this['cameraPosition']=undefined,this['cameraTarget']=undefined,this['cameraUp']=undefined,this['perspectiveView']=undefined,this['cameraZoomRatio']=undefined,this['cameraZoom']=undefined,this['fieldOfView']=undefined,this['viewDistance']=undefined,this['near']=undefined,this['nearZoom']=undefined,this['far']=undefined,this['AutoNearFarPlane']=!![],this['CustomNearPlaneDist']=0xa,this['CustomFarPlaneDist']=0x186a0,this['FixWorldAxis']=![],this['WorldAxis']=new b['Vector3'](0x0,0x0,0x1),this['useYUp']=![],this['useUpVectorFixRotateVAngleRange']=!![];let d=0x0,e=0x5a;this['useCameraUpVectorMinPosition']=![];let f=0xa;this['matModel']=undefined,this['matMV']=undefined,this['matMVP']=undefined,this['matShadowMV']=undefined,this['matShadowProjection']=undefined,this['viewDistanceFactor']=0x1,this['pivot']=undefined;let g=new Map(),h=b['Enum']['VIEW_MODES']['PlusISO'],i=new b['Matrix4']();this['screenProjectionMatrix']=undefined;let j=0.1,k=0.5;this['cameraAnimation']=![];let l=!![];m();function m(){c['perspectiveView']=!![],c['cameraZoom']=0x1,c['near']=0.1,c['nearZoom']=0.1,c['far']=0x64,c['cameraZoomRatio']=0.15,c['fieldOfView']=0x3c,c['cameraMatrix']=new b['Matrix4'](),c['viewMatrix']=new b['Matrix4'](),c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']=new b['Matrix4'](),c['matModel']=new b['Matrix4'](),c['matMV']=new b['Matrix4'](),c['matMVP']=new b['Matrix4']();}function n(){let v=a['Data']['GetBBox'](),w=v['center'],x=v['radius'];c['cameraMatrix']=new b['Matrix4']();let y=new b['Vector3']()['copy'](w)['multiplyScalar'](-0x1);c['cameraMatrix']['setPosition'](y),c['cameraPosition']=new b['Vector3'](),c['cameraTarget']=new b['Vector3'](),c['cameraUp']=new b['Vector3'](),c['viewDistance']=x*1.5,c['cameraTarget']['set'](0x0,0x0,-0x1),c['cameraUp']['set'](0x0,0x1,0x0),c['cameraPosition']=new b['Vector3']()['copy'](y);let z=new b['Vector3']()['copy'](c['cameraTarget']);c['cameraPosition']['add'](z['multiplyScalar'](x)),c['cameraZoom']=0x1,c['pivot']=w;if(a['Renderer']!==null)a['Renderer']['MainFBClear']();}this['ResetGLWindow']=function(){n();},this['ClearGLWindow']=function(){m();};function o(){if(a['CAMERADEBUG'])return p();let v=!![],w=new b['Matrix4']()['copy'](c['projectionMatrixSrc']),x=a['Data']['GetBBox'](),y=x['center'],z=x['radius'],A=x['radius'];a['DemoType']===0x6&&(A*=0x5);if(z<=0x0)return![];let B=a['gl'];const C=B['canvas']['clientWidth']/B['canvas']['clientHeight'];if(c['perspectiveView']){const D=a['Util']['DegToRad'](c['fieldOfView']);c['near']=c['CustomNearPlaneDist'],c['far']=c['CustomFarPlaneDist'],c['cameraPosition']['set'](0x0,0x0,c['viewDistance']),c['cameraTarget']['set'](0x0,0x0,0x0),c['cameraUp']['set'](0x0,0x1,0x0);let E=new b['Vector3']();E['copy'](c['cameraPosition']);let F=[new b['Vector3'](x['min']['x'],x['min']['y'],x['min']['z']),new b['Vector3'](x['min']['x'],x['min']['y'],x['max']['z']),new b['Vector3'](x['min']['x'],x['max']['y'],x['min']['z']),new b['Vector3'](x['min']['x'],x['max']['y'],x['max']['z']),new b['Vector3'](x['max']['x'],x['min']['y'],x['min']['z']),new b['Vector3'](x['max']['x'],x['min']['y'],x['max']['z']),new b['Vector3'](x['max']['x'],x['max']['y'],x['min']['z']),new b['Vector3'](x['max']['x'],x['max']['y'],x['max']['z'])],G=0x0;{let K=Math['min'](Math['max'](c['viewDistance']/a['Data']['GetUnitValue'](0x3e8),z/a['Data']['GetUnitValue'](0x3e8)),a['Data']['GetUnitValue'](0x64));c['nearZoom']=K;let L=Math['min'](Math['max'](c['viewDistance']/a['Data']['GetUnitValue'](0x3e8),A/a['Data']['GetUnitValue'](0x3e8)),a['Data']['GetUnitValue'](0x64));G=L;let M=new b['Vector3']()['copy'](y);M['applyMatrix4'](c['cameraMatrix']);let N=new b['Vector3']()['subVectors'](c['cameraTarget'],E);N['normalize']();let O=new b['Vector3']()['subVectors'](M,E);O['normalize']();let P=new b['Vector3']()['subVectors'](M,E)['length'](),Q=N['dot'](O);P=P*Q,L=Math['max'](L,P-A),c['near']=L;}{let R=A,S=new b['Vector3']()['copy'](E),T=new b['Vector3']()['subVectors'](c['cameraTarget'],S);T['normalize']();for(let U=0x0;U<0x8;++U){F[U]['applyMatrix4'](c['cameraMatrix']);let V=new b['Vector3']()['subVectors'](F[U],S)['length'](),W=new b['Vector3']()['subVectors'](F[U],S);W['normalize']();let X=T['dot'](W);V=V*Math['abs'](X),R=Math['max'](R,V);}c['far']=A/a['Data']['GetUnitValue'](0x64)+R;}!c['AutoNearFarPlane']&&(c['near']=c['CustomNearPlaneDist'],c['far']=c['CustomFarPlaneDist']);if(a['Avatar']['ShowAvatar']){let Y=a['Control']['GetMode']();Y===b['Enum']['CONTROL_STATE']['WALKTHROUGH']&&(c['near']=Math['min'](c['near'],G));}let H=new b['Matrix4']()['perspective'](D,C,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=H,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']);let I=new b['Vector3']()['copy'](y)['multiplyScalar'](-0x1),J=new b['Matrix4']()['lookAt'](E,c['cameraTarget'],c['cameraUp']);c['viewMatrix']=new b['Matrix4']()['getInverse'](J),c['projectionMatrix']['multiply'](c['viewMatrix']);}else{let Z=c['cameraZoom'],a0=z*c['viewDistanceFactor']*Z,a1=z*c['viewDistanceFactor']*Z;C>0x1?a0*=C:a1/=C;let a2=-a0/0x2,a3=a0/0x2,a4=-a1/0x2,a5=a1/0x2;c['near']=-A*0x5,c['far']=A*0x5;let a6=new b['Matrix4']()['orthographic'](a2,a3,a4,a5,c['near'],c['far']);c['projectionMatrixSrc']=new b['Matrix4'](),c['projectionMatrixSrc']['elements']=a6,c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['copy'](c['projectionMatrixSrc']),c['viewMatrix']=new b['Matrix4'](),c['viewMatrix']['copy'](c['cameraMatrix']);}if(x['radius']===0x0)c['cameraMatrix']['identity']();c['UpdateGLWindow'](undefined),q();if(c['projectionMatrixSrc']['equals'](w))v=![];return v;};function p(){let v=!![],w=new b['Matrix4']()['copy'](c['matMVP']),x=a['Data']['GetBBox'](),y=x['center'],z=x['radius'];if(z<=0x0)return![];let A=a['gl'];const B=A['canvas']['clientWidth']/A['canvas']['clientHeight'];if(c['perspectiveView']){const C=a['Util']['DegToRad'](c['fieldOfView']);c['near']=0x1,c['far']=0x30d40;let D=new b['Vector3']()['copy'](c['cameraPosition']);D['applyMatrix4'](c['matMV']);let E=[new b['Vector3'](x['min']['x'],x['min']['y'],x['min']['z']),new b['Vector3'](x['min']['x'],x['min']['y'],x['max']['z']),new b['Vector3'](x['min']['x'],x['max']['y'],x['min']['z']),new b['Vector3'](x['min']['x'],x['max']['y'],x['max']['z']),new b['Vector3'](x['max']['x'],x['min']['y'],x['min']['z']),new b['Vector3'](x['max']['x'],x['min']['y'],x['max']['z']),new b['Vector3'](x['max']['x'],x['max']['y'],x['min']['z']),new b['Vector3'](x['max']['x'],x['max']['y'],x['max']['z'])];{let H=Math['min'](Math['max'](c['viewDistance']/0x3e8,z/0x3e8),0x64),I=new b['Vector3']()['copy'](y);I['applyMatrix4'](c['matMV']);let J=new b['Vector3'](0x0,0x0,-0x1),K=new b['Vector3']()['subVectors'](I,D);K['normalize']();let L=new b['Vector3']()['subVectors'](I,D)['length'](),M=J['dot'](K);L=L*M,H=Math['max'](H,L-z),c['near']=H;}{let N=z;for(let O=0x0;O<0x8;++O){E[O]['applyMatrix4'](c['matMV']);let P=new b['Vector3']()['subVectors'](E[O],D)['length'](),Q=new b['Vector3'](0x0,0x0,-0x1),R=new b['Vector3']()['subVectors'](E[O],D);R['normalize']();let S=Q['dot'](R);P=P*Math['abs'](S),N=Math['max'](N,P);}c['far']=z/0x64+N;}let F=new b['Matrix4']()['perspective'](C,B,c['near'],c['far']);c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['elements']=F;let G=new b['Matrix4']()['lookAt'](c['cameraPosition'],new b['Vector3']()['addVectors'](c['cameraPosition'],c['cameraTarget']),c['cameraUp']);c['viewMatrix']['copy'](G);}else{let T=c['cameraZoom'],U=z*1.5*T,V=z*1.5*T;if(B>0x1)U*=B;else V/=B;let W=-U/0x2,X=U/0x2,Y=-V/0x2,Z=V/0x2;c['near']=-z*0x5,c['far']=z*0x5;let a0=new b['Matrix4']()['orthographic'](W,X,Y,Z,c['near'],c['far']);c['projectionMatrix']=new b['Matrix4'](),c['projectionMatrix']['elements']=a0;let a1=new b['Matrix4']()['lookAt'](c['cameraPosition'],new b['Vector3']()['addVectors'](c['cameraPosition'],c['cameraTarget']),c['cameraUp']);c['viewMatrix']['copy'](a1);}if(x['radius']===0x0)c['cameraMatrix']['identity']();c['UpdateGLWindow'](undefined),q();if(c['matMVP']['equals'](w))v=![];return v;}this['ResizeGLWindow']=function(){return o();},this['UpdateGLWindow']=function(v){a['CAMERADEBUG']?(v===undefined&&(v=new b['Matrix4']()),c['matModel']=new b['Matrix4']()['copy'](v),c['matMV']=new b['Matrix4']()['multiplyMatrices'](c['viewMatrix'],c['matModel']),c['matMVP']=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['matMV'])):(v===undefined&&(v=new b['Matrix4']()['copy'](c['cameraMatrix'])),c['matModel']=new b['Matrix4']()['copy'](v),c['matMV']=new b['Matrix4']()['copy'](v),c['matMVP']=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['matMV']));};function q(){let v=a['gl'],w=v['canvas']['clientWidth'],x=v['canvas']['clientHeight'],y=new b['Matrix4']()['orthographic'](0x0,w,x,0x0,-0x3e8,0x3e8);c['screenProjectionMatrix']=new b['Matrix4'](),c['screenProjectionMatrix']['elements']=y;}function r(v){let w=new b['Vector3']()['copy'](c['pivot']),x=new b['Vector3']()['copy'](w),y=new b['Matrix4']()['copy'](c['matMVP']),z=s(y,x);const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight']();if(z['x']<0x0||z['x']>A||z['y']<0x0||z['y']>B){let K=new b['Vector3'](A/0x2,B/0x2,z['z']);z['copy'](K);let L=t(y,K);w['copy'](L),c['pivot']['copy'](L);}c['cameraZoom']*=v;if(c['perspectiveView']){if(a['CAMERADEBUG']){let M=new b['Vector3'](0x0,0x0,-0x1);M['multiplyScalar'](c['viewDistance']*-(0x1-v)/0x2),c['cameraPosition']['add'](M);}else c['cameraMatrix']['translate'](0x0,0x0,c['viewDistance']*(0x1-v)/0x2);}let C=new b['Vector3']()['copy'](w);if(C['z']>=c['viewDistance']&&c['perspectiveView'])return;o();let D=new b['Vector3']()['copy'](w),E=s(c['matMVP'],D),F=new b['Vector3'](z['x'],z['y'],E['z']),G=new b['Vector3'](E['x'],E['y'],E['z']),H=t(c['projectionMatrix'],F),I=t(c['projectionMatrix'],G),J=new b['Vector3']()['subVectors'](H,I);if(a['CAMERADEBUG'])c['cameraPosition']['add'](J);else c['cameraMatrix']['translate'](J['x'],J['y'],J['z']);o();}this['MulViewDistance']=function(v){r(v);};let s=function(v,w){let x=a['gl'];w['applyMatrix4'](v);let y=new b['Vector3']();return y['x']=x['canvas']['clientWidth']*(w['x']+0x1)*0.5,y['y']=x['canvas']['clientHeight']*(0x1-(w['y']+0x1)*0.5),y['z']=w['z'],y;};this['world2ScreenWithMatrix']=function(v,w){return s(v,w);};let t=function(v,w){let x=a['gl'],y=new b['Vector3']();y['x']=w['x']/x['canvas']['clientWidth']*0x2-0x1,y['y']=-(w['y']/x['canvas']['clientHeight']*0x2-0x1),y['z']=w['z'];let z=new b['Matrix4']()['getInverse'](v);return y['applyMatrix4'](z),y;};this['screen2WorldWithMatrix']=function(v,w){return t(v,w);},this['SetPerspectiveView']=function(v){if(a['Camera']['perspectiveView']===v)return;a['Camera']['perspectiveView']=v,a['Camera']['ResizeGLWindow'](),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();},this['GetPerspectiveNeaPlane']=function(){let v=[0x1,0x0,0x0,0x0];{let w=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),x=new b['Matrix4']()['getInverse'](w),y=x['multiplyVector'](a['Camera']['cameraPosition']),z=x['multiplyVector'](a['Camera']['cameraTarget']),A=a['Camera']['near'],B=new b['Vector3']()['subVectors'](z,y);B['normalize'](),v[0x0]=B['x'],v[0x1]=B['y'],v[0x2]=B['z'];let C=new b['Vector3']()['addVectors'](y,B['multiplyScalar'](A));v[0x3]=-(v[0x0]*C['x']+v[0x1]*C['y']+v[0x2]*C['z']);}return v;},this['ViewTopPlan']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n();let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewBottomPlan']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n();let y=new b['Matrix4']()['makeRotationX'](3.141592654);y['multiply'](c['cameraMatrix']),c['cameraMatrix']['copy'](y);let z=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-z['x'],w['y']-z['y'],w['z']-z['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let A=c['GetCameraData']();u(v,A,k);}},this['ViewFrontSection']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewBackSection']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewRightElevation']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewLeftElevation']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISOPlus']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):(c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0));let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISOMinus']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4*0x5,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewCustom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());if(![]){let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n();c['useYUp']?(c['cameraMatrix']['rotate'](0x0,3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x2),c['cameraMatrix']['rotate'](0x0,0x0,-3.141592654/0x4),c['cameraMatrix']['rotate'](+3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](+3.141592654/0xb4*0x1e,0x0,0x0)):c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x2d,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']);let z=new b['Vector3'](0x0,0x118c30,0x0),A=new b['Matrix4']();A['makeTranslation'](z['x'],z['y'],z['z']);let B=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']);a['Camera']['cameraMatrix']['multiplyMatrices'](A,B);}else{if(a['DemoType']===0x6){let C=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),D=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](3.141592654*0.25,0x0,0x0);let E=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=D,c['cameraMatrix']['translate'](C['x']-E['x'],C['y']-E['y'],C['z']-E['z']);}else{let F=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),G=c['cameraZoom'];n();let H=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=G,c['cameraMatrix']['translate'](F['x']-H['x'],F['y']-H['y'],F['z']-H['z']);}}o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let I=c['GetCameraData']();u(v,I,k);}},this['ViewISOLeftFrontBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISOLeftFrontTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISOLeftBackBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISOLeftBackTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISORightFrontBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISORightFrontTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](+3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISORightBackBottom']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0x1e,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewISORightBackTop']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0xb4*0xf,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewLeftFrontSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewLeftBackSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewLeftBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewLeftTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewRightFrontSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x4,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewRightBackSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x4,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewRightBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewRightTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,3.141592654/0x2,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewFrontBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewFrontTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](0x0,-3.141592654,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewBackBottomSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](-3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['ViewBackTopSide']=function(){let v;c['cameraAnimation']&&(v=c['GetCameraData']());let w=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']),x=c['cameraZoom'];n(),c['cameraMatrix']['rotate'](0x0,0x0,3.141592654),c['cameraMatrix']['rotate'](-3.141592654/0x2,0x0,0x0),c['cameraMatrix']['rotate'](3.141592654/0x4,0x0,0x0);let y=new b['Matrix4']()['copy'](c['cameraMatrix'])['multiplyVector'](c['pivot']);c['cameraZoom']=x,c['cameraMatrix']['translate'](w['x']-y['x'],w['y']-y['y'],w['z']-y['z']),o(),a['Renderer']['MainFBClear'](),a['Renderer']['Render']();if(a['useFramebuffer'])a['MeshBlock']['Reset']();if(c['cameraAnimation']){let z=c['GetCameraData']();u(v,z,k);}},this['CameraRotate']=function(v,w){let x=new b['Matrix4']()['makeRotationX'](v['x']),y=new b['Matrix4']()['makeRotationY'](v['y']),z=new b['Matrix4']()['makeRotationZ'](v['z']);if(w===undefined)w=new b['Vector3']()['copy'](c['pivot']);if(a['FixZAxis']){if(c['useYUp']){let A=new b['Matrix4']()['copy'](c['matMV']);{let D=new b['Matrix4']()['copy'](A);D['setPosition'](new b['Vector3'](0x0,0x0,0x0));let E=new b['Vector3'](0x0,0x0,0x1),F=new b['Vector3'](0x0,0x0,0x0);E['applyMatrix4'](D),F['applyMatrix4'](D);if(E['y']<F['y'])z=new b['Matrix4']()['makeRotationZ'](-v['z']);}let B=new b['Matrix4'](),C=new b['Matrix4']();{let G=new b['Vector3']()['copy'](w);G['applyMatrix4'](A);let H=new b['Matrix4'](),I=new b['Vector3']()['copy'](G)['multiplyScalar'](-0x1);H['setPosition'](I);let J=new b['Matrix4']()['copy'](x),K=new b['Matrix4']()['setPosition'](G),L=new b['Matrix4']()['multiplyMatrices'](J,H);B=new b['Matrix4']()['multiplyMatrices'](K,L);}{let M=new b['Vector3']()['copy'](w),N=new b['Matrix4'](),O=new b['Vector3']()['copy'](M)['multiplyScalar'](-0x1);N['setPosition'](O);let P=new b['Matrix4']()['copy'](y),Q=new b['Matrix4']()['setPosition'](M),R=new b['Matrix4']()['multiplyMatrices'](P,N);C=new b['Matrix4']()['multiplyMatrices'](Q,R);}if(c['useUpVectorFixRotateVAngleRange']){let S=new b['Matrix4']()['multiplyMatrices'](A,C),T=new b['Matrix4']()['multiplyMatrices'](B,S),U=new b['Vector3'](0x0,0x1,0x0),V=new b['Matrix4']()['copy'](T);V['setPosition'](new b['Vector3'](0x0,0x0,0x0)),U['applyMatrix4'](V);let W=Math['acos'](U['y']),X=d*Math['PI']/0xb4,Y=e*Math['PI']/0xb4;if(U['z']<0x0)W*=-0x1;if(W<X){v['x']=X-W+v['x'],c['CameraRotate'](v);return;}if(W>Y){v['x']=Y-W+v['x'],c['CameraRotate'](v);return;}}if(!a['CAMERADEBUG']){let Z=new b['Matrix4']()['multiplyMatrices'](c['cameraMatrix'],C);c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](B,Z);}else{let a0=new b['Matrix4']()['multiplyMatrices'](A,C),a1=new b['Matrix4']()['multiplyMatrices'](B,a0);c['cameraPosition']['applyMatrix4'](a1),c['cameraTarget']['applyMatrix4'](a1),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](a1),c['cameraUp']['normalize']();}}else{let a2=new b['Matrix4']()['copy'](c['matMV']);{let a5=new b['Matrix4']()['copy'](a2);a5['setPosition'](new b['Vector3'](0x0,0x0,0x0));let a6=new b['Vector3'](0x0,0x0,0x1),a7=new b['Vector3'](0x0,0x0,0x0);a6['applyMatrix4'](a5),a7['applyMatrix4'](a5);if(a6['y']<a7['y'])z=new b['Matrix4']()['makeRotationZ'](-v['z']);if(![]){let a8=Math['acos'](a6['y']),a9=d*Math['PI']/0xb4,aa=e*Math['PI']/0xb4;if(a6['z']<0x0)a8*=-0x1;a8-v['x']<a9&&(v['x']=a9+v['x']-a8),a8-v['x']>aa&&(v['x']=aa-a8+v['x']),x=new b['Matrix4']()['makeRotationX'](v['x']);}}let a3=new b['Matrix4'](),a4=new b['Matrix4']();{let ab=new b['Vector3']()['copy'](w);ab['applyMatrix4'](a2);let ac=new b['Matrix4'](),ad=new b['Vector3']()['copy'](ab)['multiplyScalar'](-0x1);ac['setPosition'](ad);let ae=new b['Matrix4']()['copy'](x),af=new b['Matrix4']()['setPosition'](ab),ag=new b['Matrix4']()['multiplyMatrices'](ae,ac);a3=new b['Matrix4']()['multiplyMatrices'](af,ag);}{let ah=new b['Vector3']()['copy'](w),ai=new b['Matrix4'](),aj=new b['Vector3']()['copy'](ah)['multiplyScalar'](-0x1);ai['setPosition'](aj);let ak=new b['Matrix4']()['copy'](z),al=new b['Matrix4']()['setPosition'](ah),am=new b['Matrix4']()['multiplyMatrices'](ak,ai);a4=new b['Matrix4']()['multiplyMatrices'](al,am);}if(c['useUpVectorFixRotateVAngleRange']){let an=new b['Matrix4']()['multiplyMatrices'](a2,a4),ao=new b['Matrix4']()['multiplyMatrices'](a3,an),ap=new b['Vector3'](0x0,0x0,0x1),aq=new b['Matrix4']()['copy'](ao);aq['setPosition'](new b['Vector3'](0x0,0x0,0x0)),ap['applyMatrix4'](aq);let ar=Math['acos'](ap['y']),as=d*Math['PI']/0xb4,at=e*Math['PI']/0xb4;if(ap['z']<0x0)ar*=-0x1;if(ar<as){v['x']=as-ar+v['x'],c['CameraRotate'](v);return;}if(ar>at){v['x']=at-ar+v['x'],c['CameraRotate'](v);return;}}if(!a['CAMERADEBUG']){let au=new b['Matrix4']()['multiplyMatrices'](c['cameraMatrix'],a4);c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](a3,au);}else{let av=new b['Matrix4']()['multiplyMatrices'](a2,a4),aw=new b['Matrix4']()['multiplyMatrices'](a3,av);c['cameraPosition']['applyMatrix4'](aw),c['cameraTarget']['applyMatrix4'](aw),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](aw),c['cameraUp']['normalize']();}}}else{if(c['FixWorldAxis']){c['CameraRotateByWorldAxis'](c['WorldAxis'],v);return;}else{let ax=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['multiplyMatrices'](x,y),z);c['CameraRotateByMatrix'](ax,w);}}},this['CameraRotateByWorldAxis']=function(v,w){let x=new b['Matrix4']()['copy'](c['matMV']);x['setPosition'](new b['Vector3'](0x0,0x0,0x0));v===undefined&&(v=c['WorldAxis']);let y=new b['Vector3']()['copy'](v),z=new b['Vector3'](0x0,0x0,0x0);y['applyMatrix4'](x),z['applyMatrix4'](x);let A=new b['Vector3']()['subVectors'](y,z);A['normalize']();let B=A['dot'](w),C=new b['Matrix4']()['makeRotationAxis'](A,B);c['CameraRotateByMatrix'](C);},this['CameraRotateByMatrix']=function(v,w){if(w===undefined)w=a['Camera']['pivot'];let x=new b['Vector3']()['copy'](w);x['applyMatrix4'](c['matMV']);let y=new b['Matrix4']()['setPosition'](x),z=new b['Vector3']()['copy'](x)['multiplyScalar'](-0x1),A=new b['Matrix4']()['setPosition'](z),B=new b['Matrix4']()['multiplyMatrices'](v,A),C=new b['Matrix4']()['multiplyMatrices'](y,B);c['cameraPosition']['applyMatrix4'](C),c['cameraTarget']['applyMatrix4'](v),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](v),c['cameraUp']['normalize'](),!a['CAMERADEBUG']&&(c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](C,a['Camera']['cameraMatrix']));},this['CameraRotateWithMV']=function(v,w){c['cameraPosition']['applyMatrix4'](v),c['cameraTarget']['applyMatrix4'](v),c['cameraTarget']['normalize'](),c['cameraUp']['applyMatrix4'](v),c['cameraUp']['normalize']();},this['CameraOrbit']=function(v){},this['CameraTranslate']=function(v){if(a['CAMERADEBUG'])c['cameraPosition']['add'](v);else{let w=new b['Matrix4']();w['makeTranslation'](v['x'],v['y'],v['z']);if(a['FixZAxis']&&c['useCameraUpVectorMinPosition']&&c['perspectiveView']){let x=new b['Matrix4']()['copy'](c['cameraMatrix']);x['multiplyMatrices'](w,x);let y=new b['Matrix4']()['getInverse'](x),z=y['multiplyVector'](c['cameraPosition']);z['z']<f&&w['makeTranslation'](v['x'],v['y']-(f-z['z']),v['z']);}c['CameraTranslateByMatrix'](w);}},this['CameraTranslateByMatrix']=function(v){if(a['CAMERADEBUG']){}else{let w=new b['Matrix4']()['copy'](c['cameraMatrix']);c['cameraMatrix']['multiplyMatrices'](v,w);}},this['SetPivot']=function(v){c['pivot']['copy'](v);},this['ViewBoxZoom']=function(v,w,x,y){if(v===x||w===y)return;let z;c['cameraAnimation']&&(z=c['GetCameraData']());const A=a['Renderer']['GetSizeWidth'](),B=a['Renderer']['GetSizeHeight'](),C=(x-v)/A,D=(y-w)/B,E=Math['max'](C,D);if(c['perspectiveView']){let F=a['Renderer']['PickPositionObject']((x-v)/0x2,(y-w)/0x2);F!==undefined&&c['SetPivot'](F);let G=new b['Vector3']()['copy'](c['pivot']),H=s(c['matMVP'],new b['Vector3']()['copy'](G)),I=new b['Vector3']()['copy'](H);I['x']=A/0x2,I['y']=B/0x2,H['x']=(v+x)/0x2,H['y']=(w+y)/0x2;let J=t(c['matMVP'],H),K=new b['Vector3']()['copy'](J)['applyMatrix4'](c['cameraMatrix']),L=c['viewDistance']-K['z'];const M=L,N=L*E,O=M-N;c['cameraMatrix']['translate'](0x0,0x0,O),o();{let P=s(c['matMVP'],new b['Vector3']()['copy'](G)),Q,R,S,T;Q=new b['Vector3'](I['x'],I['y'],P['z']),R=new b['Vector3'](P['x'],P['y'],P['z']),S=t(c['projectionMatrix'],Q),T=t(c['projectionMatrix'],R);let U=new b['Vector3']()['subVectors'](T,S);if(P['z']>0x1)U=U['multiplyScalar'](-0x1);c['cameraMatrix']['translate'](-U['x'],-U['y'],-U['z']),o();}}else{let V,W,X,Y,Z;V=s(c['matMVP'],new b['Vector3']()),W=new b['Vector3'](A/0x2,B/0x2,V['z']),X=new b['Vector3']((v+x)/0x2,(w+y)/0x2,V['z']),Y=t(c['projectionMatrix'],W),Z=t(c['projectionMatrix'],X);const a0=new b['Vector3']()['subVectors'](Z,Y);c['cameraMatrix']['translate'](a0['x'],a0['y'],a0['z']),c['MulViewDistance'](E),o();}if(c['cameraAnimation']){let a1=c['GetCameraData']();u(z,a1,k);}},this['FocusViewBoxZoom']=function(v,w,x,y,z){let A;c['cameraAnimation']&&(A=c['GetCameraData']());let B=c['cameraAnimation'];c['cameraAnimation']=![],c['ViewBoxZoom'](v,w,x,y),c['FocusPivot'](z),c['cameraAnimation']=B;if(c['cameraAnimation']){let C=c['GetCameraData']();u(A,C,k);}},this['FocusObject']=function(v,w){if(v['length']<=0x0)return;let x;c['cameraAnimation']&&(x=c['GetCameraData']());let y,z;if(a['useTree'])for(let D=0x0;D<v['length'];D++){let E=v[D],F=a['Tree']['GetBodyId'](E);for(let G=0x0;G<F['length'];G++){let H=a['Tree']['GetNodeInfo'](F[G]),I=H['bbox'];if(I===undefined){const J=a['Data']['GetNodeData'](F[G]);I=a['Data']['GetBBox'](J);}D===0x0&&G===0x0?(y=new b['Vector3']()['copy'](I['min']),z=new b['Vector3']()['copy'](I['max'])):(y['min'](I['min']),z['max'](I['max']));}}else for(let K=0x0;K<v['length'];K++){const L=a['Data']['GetNodeData'](v[K]),M=a['Data']['GetBBox'](L);K===0x0?(y=new b['Vector3']()['copy'](M['min']),z=new b['Vector3']()['copy'](M['max'])):(y['min'](M['min']),z['max'](M['max']));}if(y===undefined||z===undefined)return;let A=a['Data']['BBox']([y['x'],y['y'],y['z'],z['x'],z['y'],z['z']]);A=a['Clipping']['RebuildClippingBoundBox'](A);if(A===undefined)return;w!==undefined&&(A['min']['x']-=w,A['min']['y']-=w,A['min']['z']-=w,A['max']['x']+=w,A['max']['y']+=w,A['max']['z']+=w,A['update']());let B=A['radius']<0.000001?![]:!![],C=c['cameraAnimation'];c['cameraAnimation']=![];if(c['perspectiveView'])c['PerspectiveFocusCenter'](A),c['SetPivot'](A['center']);else{if(B){const N=a['Renderer']['GetSizeWidth'](),O=a['Renderer']['GetSizeHeight']();let P=a['Util']['GetBBox2Vertex'](A),Q,R;for(let W=0x0;W<0x8;W++){P[W]=s(c['matMVP'],new b['Vector3']()['copy'](P[W])),W===0x0?(Q=new b['Vector3']()['copy'](P[W]),R=new b['Vector3']()['copy'](P[W])):(Q['min'](P[W]),R['max'](P[W]));}const S=j,T=0x0;let U=(R['x']-Q['x'])*S+T,V=(R['y']-Q['y'])*S+T;c['ViewBoxZoom'](Q['x']-U,Q['y']-V,R['x']+U,R['y']+V);}c['FocusPivot'](A['center']);}c['cameraAnimation']=C;if(c['cameraAnimation']){let X=c['GetCameraData']();u(x,X,k);}else a['Renderer']['MainFBClear'](),a['Renderer']['Render'](),a['MeshBlock']['Reset']();},this['FocusBBox']=function(v){if(v===undefined)return;let w;c['cameraAnimation']&&(w=c['GetCameraData']());let x=v['radius']<0.000001?![]:!![],y=c['cameraAnimation'];c['cameraAnimation']=![];if(c['perspectiveView'])c['PerspectiveFocusCenter'](v),c['SetPivot'](v['center']);else{if(x){const z=a['Renderer']['GetSizeWidth'](),A=a['Renderer']['GetSizeHeight']();let B=a['Util']['GetBBox2Vertex'](v),C,D;for(let I=0x0;I<0x8;I++){B[I]=s(c['matMVP'],new b['Vector3']()['copy'](B[I])),I===0x0?(C=new b['Vector3']()['copy'](B[I]),D=new b['Vector3']()['copy'](B[I])):(C['min'](B[I]),D['max'](B[I]));}const E=j,F=0x0;let G=(D['x']-C['x'])*E+F,H=(D['y']-C['y'])*E+F;c['ViewBoxZoom'](C['x']-G,C['y']-H,D['x']+G,D['y']+H);}c['FocusPivot'](v['center']);}c['cameraAnimation']=y;if(c['cameraAnimation']){let J=c['GetCameraData']();u(w,J,k);}else a['Renderer']['MainFBClear'](),a['Renderer']['Render'](),a['MeshBlock']['Reset']();},this['FocusPivot']=function(v){if(v!==undefined)c['pivot']=v;let w;c['cameraAnimation']&&(w=c['GetCameraData']());const x=a['Renderer']['GetSizeWidth'](),y=a['Renderer']['GetSizeHeight']();let z,A,B,C,D;z=s(c['matMVP'],new b['Vector3']()['copy'](c['pivot'])),A=new b['Vector3']()['copy'](z),B=new b['Vector3'](x/0x2,y/0x2,z['z']),C=t(c['projectionMatrix'],A),D=t(c['projectionMatrix'],B);const E=new b['Vector3']()['subVectors'](D,C);c['cameraMatrix']['translate'](E['x'],E['y'],E['z']),o();if(c['cameraAnimation']){let F=c['GetCameraData']();u(w,F,k);}},this['FitAll']=function(){c['ResetGLWindow']();if(c['perspectiveView']&&a['Configuration']['Camera']['usePerspectiveScreenFit'])c['FocusBBox'](a['Data']['ObjectsBBox']);c['ResizeGLWindow']();},this['ResetView']=function(){c['ResetGLWindow'](),c['InitDirection'](),c['ResizeGLWindow']();};function u(v,w,x){let y=![],z;c['CameraUpdateWithCameraData'](v),0x1,a['Camera']['ResizeGLWindow']();let A=new Date()['getTime'](),B=function(){let C=new Date()['getTime']()-A,D=C/0x3e8/x;if(D>=0x1){D=0x1,y=!![],c['CameraUpdateWithCameraData'](w),a['Camera']['ResizeGLWindow'](),clearInterval(z);return;}{let E=a['Util']['QuaternionInterpolation'](v['matrix_camera'],w['matrix_camera'],D);a['Camera']['cameraMatrix']['copy'](E);}{let F=v['distance']*(0x1-D),G=w['distance']*D;a['Camera']['viewDistance']=F+G;}{let H=v['zoom']*(0x1-D),I=w['zoom']*D;a['Camera']['cameraZoom']=H+I;}a['Camera']['ResizeGLWindow']();};z=setInterval(function(){B(),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},0xf);};this['SetZAxis2Up']=function(){const v=a['Renderer']['GetSizeWidth'](),w=a['Renderer']['GetSizeHeight']();let x=new b['Vector3'](0x0,0x1,0x0),y=new b['Vector3'](0x0,0x0,0x1),z=new b['Matrix4']()['copy'](c['cameraMatrix']);z['setPosition'](new b['Vector3']()),y['applyMatrix4'](z),y['normalize']();let A=x['dot'](y),B=Math['acos'](A),C=new b['Vector3']()['crossVectors'](y,x);C['multiplyScalar'](B);let D=C['x'],E=C['y'],F=C['z'],G=new b['Matrix4']()['makeRotationX'](D),H=new b['Matrix4']()['makeRotationY'](E),I=new b['Matrix4']()['makeRotationZ'](F),J=new b['Matrix4']();{let K=new b['Matrix4']()['copy'](c['cameraMatrix']),L=new b['Vector3']()['copy'](c['pivot']);L['applyMatrix4'](K);let M=new b['Matrix4'](),N=new b['Vector3']()['copy'](L)['multiplyScalar'](-0x1);M['setPosition'](N);let O=new b['Matrix4']()['multiplyMatrices'](G,H);O=new b['Matrix4']()['multiplyMatrices'](new b['Matrix4']()['copy'](O),I);let P=new b['Matrix4']()['setPosition'](L),Q=new b['Matrix4']()['multiplyMatrices'](O,M);J=new b['Matrix4']()['multiplyMatrices'](P,Q);}c['cameraMatrix']=new b['Matrix4']()['multiplyMatrices'](J,c['cameraMatrix']),c['ResizeGLWindow']();},this['GetCameraData']=function(){let v=a['Data']['CameraDataItem']();return v['matrix_view']['copy'](c['viewMatrix']),v['matrix_camera']['copy'](c['cameraMatrix']),v['position']['copy'](c['cameraPosition']),v['up']['copy'](c['cameraUp']),v['target']['copy'](c['cameraTarget']),v['zoom']=c['cameraZoom'],v['distance']=c['viewDistance'],v;},this['CameraUpdateWithCameraData']=function(v){c['viewMatrix']=new b['Matrix4']()['copy'](v['matrix_view']),c['cameraMatrix']=new b['Matrix4']()['copy'](v['matrix_camera']),c['cameraPosition']=new b['Vector3']()['copy'](v['position']),c['cameraUp']=new b['Vector3']()['copy'](v['up']),c['cameraTarget']=new b['Vector3']()['copy'](v['target']),c['cameraZoom']=v['zoom'],c['viewDistance']=v['distance'];},this['Backup']=function(){let v=c['GetCameraData']();return g['set'](v['id'],v),v['id'];},this['GetBackupData']=function(v){if(g['has'](v))return g['get'](v);return undefined;},this['DeleteBackupData']=function(v){g['has'](v)&&g['delete'](v);},this['Rollback']=function(v){if(g['has'](v)){let w=g['get'](v);c['CameraUpdateWithCameraData'](w),c['ResizeGLWindow'](),a['MeshBlock']['Reset'](),a['Renderer']['Render']();}},this['GetSnapshotParam']=function(v){if(g['has'](v)){let w=g['get'](v),x='';x+=w['id'],x+='↕';for(let y=0x0;y<w['viewMatrix']['elements']['length'];y++){x+=y===0x0?'':'§'+w['viewMatrix']['elements'][y];}x+='↕';for(let z=0x0;z<w['cameraMatrix']['elements']['length'];z++){x+=z===0x0?'':'§'+w['cameraMatrix']['elements'][z];}return x+='↕',x+=w['cameraPosition']['x'],x+='§'+w['cameraPosition']['y'],x+='§'+w['cameraPosition']['z'],x+='↕',x+=w['cameraUp']['x'],x+='§'+w['cameraUp']['y'],x+='§'+w['cameraUp']['z'],x+='↕',x+=w['cameraTarget']['x'],x+='§'+w['cameraTarget']['y'],x+='§'+w['cameraTarget']['z'],x+='↕',x+=w['cameraZoom'],x+='↕',x+=w['viewDistance'],x;}else return'';},this['SetSnapshotParam']=function(v){let w={'id':a['Data']['UUIDv4'](),'matrix_view':new b['Matrix4']()['copy'](c['viewMatrix']),'matrix_camera':new b['Matrix4']()['copy'](c['cameraMatrix']),'position':new b['Vector3']()['copy'](c['cameraPosition']),'up':new b['Vector3']()['copy'](c['cameraUp']),'target':new b['Vector3']()['copy'](c['cameraTarget']),'zoom':c['cameraZoom'],'distance':c['viewDistance']};if(g['has'](w['id'])){let x=g['get'](w['id']),y='';for(let z=0x0;z<x['viewMatrix']['elements']['length'];z++){y+=z===0x0?'':'§'+x['viewMatrix']['elements'][z];}y+='↕';for(let A=0x0;A<x['cameraMatrix']['elements']['length'];A++){y+=A===0x0?'':'§'+x['cameraMatrix']['elements'][A];}return y+='↕',y+=x['cameraPosition']['x'],y+='§'+x['cameraPosition']['y'],y+='§'+x['cameraPosition']['z'],y+='↕',y+=x['cameraUp']['x'],y+='§'+x['cameraUp']['y'],y+='§'+x['cameraUp']['z'],y+='↕',y+=x['cameraTarget']['x'],y+='§'+x['cameraTarget']['y'],y+='§'+x['cameraTarget']['z'],y+='↕',y+=x['cameraZoom'],y+='↕',y+=x['viewDistance'],y;}else return'';},this['SetBaseDirection']=function(v,w){h=v;if(w!==undefined)i['copy'](w);},this['InitDirection']=function(){let v=c['cameraAnimation'];c['cameraAnimation']=![];switch(h){case b['Enum']['VIEW_MODES']['PlusX']:c['ViewRightElevation']();break;case b['Enum']['VIEW_MODES']['MinusX']:c['ViewLeftElevation']();break;case b['Enum']['VIEW_MODES']['PlusY']:c['ViewBackSection']();break;case b['Enum']['VIEW_MODES']['MinusY']:c['ViewFrontSection']();break;case b['Enum']['VIEW_MODES']['PlusZ']:c['ViewTopPlan']();break;case b['Enum']['VIEW_MODES']['MinusZ']:c['ViewBottomPlan']();break;case b['Enum']['VIEW_MODES']['PlusISO']:c['ViewISOPlus']();break;case b['Enum']['VIEW_MODES']['MinusISO']:c['ViewISOMinus']();break;case b['Enum']['VIEW_MODES']['CustomView']:c['ViewCustom']();break;default:c['ViewISOPlus']();break;}c['cameraAnimation']=v;if(c['perspectiveView']&&a['Configuration']['Camera']['usePerspectiveScreenFit'])c['FocusBBox'](a['Data']['ObjectsBBox']);},this['GetCameraPos']=function(){if(c['perspectiveView']){let v=new b['Matrix4']()['multiplyMatrices'](c['viewMatrix'],c['cameraMatrix']);const w=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),x=new b['Matrix4']()['getInverse'](w);return x['multiplyVector'](new b['Vector3'](0x0,0x0,0x0));}else{let y=new b['Matrix4']()['copy'](c['cameraMatrix']);const z=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),A=new b['Matrix4']()['getInverse'](z);return A['multiplyVector'](new b['Vector3'](0x0,0x0,-0x1));}},this['GetViewDirection']=function(){const v=new b['Matrix4']()['multiplyMatrices'](c['projectionMatrix'],c['cameraMatrix']),w=new b['Matrix4']()['getInverse'](v);let x=w['multiplyVector'](new b['Vector3'](0x0,0x0,0x0)),y=w['multiplyVector'](new b['Vector3'](0x0,0x0,0x1)),z=new b['Vector3']()['subVectors'](y,x);return z['normalize']();},this['GetSnapshotInfo']=function(){let v={'matrix_camera':new b['Matrix4']()['copy'](this['cameraMatrix']),'zoom':this['cameraZoom']};},this['SetSnapshotInfo']=function(v){let w;c['cameraAnimation']&&(w=c['GetCameraData']());this['cameraMatrix']['copy'](v['matrix_camera']),this['cameraZoom']=v['zoom'],this['ResizeGLWindow']();if(c['cameraAnimation']){let x=c['GetCameraData']();u(w,x,k);}else a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['GetCameraDirVector']=function(){let v=a['gl'],w=v['canvas']['clientWidth'],x=v['canvas']['clientHeight'],y=t(c['matMVP'],new b['Vector3'](w/0x2,x/0x2,0.5)),z=t(c['matMVP'],new b['Vector3'](w/0x2,x/0x2,0.4)),A=new b['Vector3']()['subVectors'](z,y);return A['normalize'](),A;},this['GetCameraUpVector']=function(){let v=a['gl'],w=v['canvas']['clientWidth'],x=v['canvas']['clientHeight'],y=t(c['matMVP'],new b['Vector3'](w/0x2,x/0x2,0.5)),z=t(c['matMVP'],new b['Vector3'](w/0x2,x/0x2-0xa,0.5)),A=new b['Vector3']()['subVectors'](z,y);return A['normalize'](),A;},this['PerspectiveFocusCenter']=function(v){let w=[];w['push'](v['min']),w['push'](v['max']);let x=c['GetCameraDirVector']()['multiplyScalar'](-0x1),y=c['GetCameraUpVector'](),z=a['Util']['DegToRad'](c['fieldOfView']),A=a['gl'],B=A['canvas']['clientWidth']/A['canvas']['clientHeight'],C=-0.8;if(a['DemoType']===0x6)C=0.1;z=z/B;let D=c['GetPerspectiveFitCamPos'](x,y,z,B,C,w['length']/0x2,w),E=c['GetPerspectiveEyePos'](),F=new b['Vector3']()['subVectors'](D,E),G=new b['Vector3']()['copy'](F)['normalize']();G=new b['Matrix4']()['copy'](c['cameraMatrix'])['transNormal'](G),F=new b['Vector3']()['copy'](G)['multiplyScalar'](F['length']()),c['cameraMatrix']['translate'](-F['x'],-F['y'],-F['z']),o(),a['Renderer']['Render']();},this['GetPerspectiveEyePos']=function(){let v=new b['Matrix4']()['copy'](a['Camera']['cameraMatrix']),w=new b['Matrix4']()['getInverse'](v),x=w['multiplyVector'](a['Camera']['cameraPosition']);return x;},this['GetPerspectiveFitCamPos']=function(v,w,x,y,z,A,B){let C=new b['Vector3'](),D=new b['Vector3']()['copy'](v),E=new b['Vector3']()['copy'](w),F=new b['Vector3']()['crossVectors'](D,E),G=x,H=x;{let R=0x1/Math['tan'](x/0x2),S=Math['atan'](y/R);H=S*0x2;}H=H*(0x1-z),G=G*(0x1-z);let I=[],J=[new b['Vector3']()['copy'](F)['multiplyScalar'](-0x1),F,new b['Vector3']()['copy'](E)['multiplyScalar'](-0x1),E];{let T=new b['Matrix4']();T['makeRotationAxis2'](E,-H/0x2),J[0x0]=T['multiplyVector'](J[0x0]),T['makeRotationAxis2'](E,H/0x2),J[0x1]=T['multiplyVector'](J[0x1]),T['makeRotationAxis2'](F,G/0x2),J[0x2]=T['multiplyVector'](J[0x2]),T['makeRotationAxis2'](F,-G/0x2),J[0x3]=T['multiplyVector'](J[0x3]);for(let U=0x0;U<0x4;U++)I[U]=new b['Plane']()['setFromNormalAndCoplanarPoint'](J[U],new b['Vector3']());}let K=new b['Vector3'](),L=new b['Vector3'](),M=!![];{for(let V=0x0;V<0x4;V++){let W=0x2540be400,X=-0x2540be400;for(let Y=0x0;Y<A;Y++){let Z=B[Y*0x2+0x0],a0=B[Y*0x2+0x1],a1=[];a1['push'](new b['Vector3'](Z['x'],Z['y'],Z['z'])),a1['push'](new b['Vector3'](a0['x'],Z['y'],Z['z'])),a1['push'](new b['Vector3'](a0['x'],a0['y'],Z['z'])),a1['push'](new b['Vector3'](Z['x'],a0['y'],Z['z'])),a1['push'](new b['Vector3'](Z['x'],Z['y'],a0['z'])),a1['push'](new b['Vector3'](a0['x'],Z['y'],a0['z'])),a1['push'](new b['Vector3'](a0['x'],a0['y'],a0['z'])),a1['push'](new b['Vector3'](Z['x'],a0['y'],a0['z']));for(let a2=0x0;a2<0x8;a2++){let a3=I[V]['distanceToPoint'](a1[a2]);W=Math['min'](W,a3),X=Math['max'](X,a3),M?(M=![],K=new b['Vector3']()['copy'](a1[a2]),L=new b['Vector3']()['copy'](a1[a2])):(K['min'](a1[a2]),L['max'](a1[a2]));}}I[V]=new b['Plane']()['setFromNormalAndCoplanarPoint'](J[V],new b['Vector3']()['copy'](J[V])['multiplyScalar'](X));}}let N=new b['Vector3']()['addVectors'](K,L)['divideScalar'](0x2),O=new b['Vector3']()['subVectors'](L,K)['length']()/0x2,P=[],Q=0.0001;{let a4=new b['Vector3']()['copy'](E),a5=new b['Plane']()['setFromNormalAndCoplanarPoint'](a4,new b['Vector3']()),a6=new b['Vector3'](),a7=I[0x0]['projectPoint'](N,a6),a8=I[0x0]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N)),a9=I[0x1]['projectPoint'](N),aa=I[0x1]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N));a7=a5['projectPoint'](a7),a8=a5['projectPoint'](a8),a9=a5['projectPoint'](a9),aa=a5['projectPoint'](aa);let ab=new b['Vector3']()['subVectors'](a8,a7)['normalize'](),ac=new b['Vector3']()['subVectors'](aa,a9)['normalize'](),ad=new b['Vector3'](),ae=ad['toArray'](),af=a['Util']['GetVectorCrossPos'](a7['toArray'](),ab['toArray'](),a9['toArray'](),ac['toArray'](),ae,Q);if(!af)return N;P[0x0]=new b['Vector3']()['fromArray'](ae);}{let ag=new b['Vector3']()['copy'](F),ah=new b['Plane']()['setFromNormalAndCoplanarPoint'](ag,new b['Vector3']()),ai=I[0x2]['projectPoint'](N),aj=I[0x2]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N)),ak=I[0x3]['projectPoint'](N),al=I[0x3]['projectPoint'](new b['Vector3']()['copy'](D)['multiplyScalar'](O)['add'](N));ai=ah['projectPoint'](ai),aj=ah['projectPoint'](aj),ak=ah['projectPoint'](ak),al=ah['projectPoint'](al);let am=new b['Vector3']()['subVectors'](aj,ai)['normalize'](),an=new b['Vector3']()['subVectors'](al,ak)['normalize'](),ao=new b['Vector3'](),ap=ao['toArray'](),aq=a['Util']['GetVectorCrossPos'](ai['toArray'](),am['toArray'](),ak['toArray'](),an['toArray'](),ap,Q);if(!aq)return N;P[0x1]=new b['Vector3']()['fromArray'](ap);}{let ar=new b['Vector3']()['copy'](D)['dot'](P[0x0]),as=new b['Vector3']()['copy'](D)['dot'](P[0x1]),at=new b['Plane']();if(ar<as)at=new b['Plane']()['setFromNormalAndCoplanarPoint'](D,P[0x0]);else at=new b['Plane']()['setFromNormalAndCoplanarPoint'](D,P[0x1]);let au=at['projectPoint'](P[0x0]),av=at['projectPoint'](new b['Vector3']()['copy'](E)['multiplyScalar'](O)['add'](P[0x0])),aw=at['projectPoint'](P[0x1]),ax=at['projectPoint'](new b['Vector3']()['copy'](F)['multiplyScalar'](O)['add'](P[0x1])),ay=new b['Vector3']()['subVectors'](av,au)['normalize'](),az=new b['Vector3']()['subVectors'](ax,aw)['normalize'](),aA=new b['Vector3'](),aB=aA['toArray'](),aC=a['Util']['GetVectorCrossPos'](au['toArray'](),ay['toArray'](),aw['toArray'](),az['toArray'](),aB,Q);if(!aC)return N;C=new b['Vector3']()['fromArray'](aB);;}return C;},this['SetLockCameraUpAngle']=function(v){c['useUpVectorFixRotateVAngleRange']=v;},this['GetLockCameraUpAngle']=function(){return c['useUpVectorFixRotateVAngleRange'];},this['SetLockCameraUpAngleMinMax']=function(v,w){d=v,e=w;},this['GetScreen1PixcelLength']=function(v){let w=c['GetViewDirection'](),x=new b['Vector3'](0x0,0x1,0x0);(w['y']<-0.9||w['y']>0.9)&&(x=new b['Vector3'](0x1,0x0,0x0));x['cross'](w),x['normalize']();let y=new b['Matrix4']()['copy'](c['matMVP']),z=new b['Vector3']()['copy'](v),A=new b['Vector3']()['addVectors'](v,new b['Vector3']()['copy'](x)['multiplyScalar'](0x64)),B=s(y,z),C=s(y,A),D=new b['Vector3']()['subVectors'](B,C)['length2D'](),E=0x64/D;return E;};};export default Camera;