import a from'./ShaderGLSL.js';import b from'./ShaderTexture.js';let Shader=function(c,d){const e=['VERTEX_SHADER','FRAGMENT_SHADER'];let f=this,g;this['DefaultTexture']=undefined;let h=new Map();this['currentProgram']=undefined,this['currentShaderType']=undefined;let i=[];this['currentMaterial']=undefined;let j=new Map(),k=[];this['currentFramebufferType']=undefined;let l=![];this['positionAttributeLocation']=undefined,this['normalAttributeLocation']=undefined,this['colorAttributeLocation']=undefined,this['uvAttributeLocation']=undefined,this['updateMatrixAttributeLocation']=undefined,this['subBipedIdxAttributeLocation']=undefined,this['subBipedWeightAttributeLocation']=undefined;let m=0x2,n=0x4,o=!![],p=[null,null,null,null,null],q=null,r=null,s=null,t=-0x1,u='',v=[],w=![];this['UseHDR']=!![];let x=![],y=new Map(),z=undefined,A=new Map(),B=0x0,C=0x0,D,E=-0x1,F='',G=undefined,H=0x80,I=undefined,J=[],K=undefined,L=null,M=new d['Color'](0xff,0xff,0xff,0xff),N=new d['Color'](0x50,0x50,0x50,0xff);this['ViewLightAsRotate']=!![];let O=new d['Vector3'](0x0,0x0,0x1),P=new d['Color'](0xff,0xff,0xea,0xff),Q=new d['Vector3'](0x0,0x0,0x1),R=new d['Color'](0xff,0xff,0xea,0xff),S=[];V();function T(a5,a6,a7){if(a7['sizeLock'])return;let a8=a7['multiplier']||0x1;const a9=a5*a8|0x0,aa=a6*a8|0x0;if(a7['width']!==a9||a7['height']!==aa){a7['msaa']?a7['targetDepth']!==null&&(g['bindRenderbuffer'](g['RENDERBUFFER'],a7['targetBuffer']),g['renderbufferStorageMultisample'](g['RENDERBUFFER'],n,g['RGBA8'],a9,aa)):a7['targetBuffer']!==null&&(g['bindRenderbuffer'](g['RENDERBUFFER'],a7['targetBuffer']),g['renderbufferStorage'](g['RENDERBUFFER'],g['RGBA8'],a9,aa));for(let ab=0x0;ab<a7['targetTexture']['length'];ab++){g['bindTexture'](g['TEXTURE_2D'],a7['targetTexture'][ab]);if(a7['texStorageType'][ab]===g['RGBA'])g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA'],a9,aa,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);else{if(a7['texStorageType'][ab]===g['RGBA8'])g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA8'],a9,aa,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);else{if(a7['texStorageType'][ab]===g['RGBA16F'])g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA16F'],a9,aa,0x0,g['RGBA'],g['FLOAT'],null);else{if(a7['texStorageType'][ab]===g['RGBA32F'])g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA32F'],a9,aa,0x0,g['RGBA'],g['FLOAT'],null);else a7['texStorageType'][ab]===g['SRGB8_ALPHA8']&&g['texImage2D'](g['TEXTURE_2D'],0x0,g['SRGB8_ALPHA8'],a9,aa,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);}}}}return a7['msaa']?a7['targetDepth']!==null&&(g['bindRenderbuffer'](g['RENDERBUFFER'],a7['targetDepth']),g['renderbufferStorageMultisample'](g['RENDERBUFFER'],n,g['DEPTH24_STENCIL8'],a9,aa)):(a7['targetDepth']!==null&&(g['bindRenderbuffer'](g['RENDERBUFFER'],a7['targetDepth']),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],a9,aa)),a7['targetDepthTexture']!==null&&(g['bindTexture'](g['TEXTURE_2D'],a7['targetDepthTexture']),g['texImage2D'](g['TEXTURE_2D'],0x0,g['DEPTH_COMPONENT16'],a9,aa,0x0,g['DEPTH_COMPONENT'],g['UNSIGNED_SHORT'],null))),g['bindTexture'](g['TEXTURE_2D'],null),g['bindRenderbuffer'](g['RENDERBUFFER'],null),a7['width']=a9,a7['height']=aa,!![];}return![];}function U(a5,a6){a6=a6||0x1;const a7=a5['clientWidth']*a6|0x0,a8=a5['clientHeight']*a6|0x0;if(a5['width']!==a7||a5['height']!==a8){let a9=function(aa,ab,ac){if(aa['sizeLock'])return;T(a7,a8,aa);};return j['forEach'](a9),!![];}return![];}function V(){let a5=new d['Vector3'](0xc8,-0xc8,-0x1f4);O['copy'](a5)['normalize'](),Q['copy'](O);if(c['DemoType']===0x6){let aa=c['Data']['LightItem']();aa['Position']['set'](-0x5dc,0x9c4,0x5dc),aa['Color']['set'](0xff,0xff,0xff,0xff),aa['Power']=0xfa0;let ab=c['Data']['LightItem']();ab['Position']['set'](0x5dc,0x9c4,0x5dc),ab['Color']['set'](0xff,0xff,0xff,0xff),ab['Power']=0xfa0;let ac=c['Data']['LightItem']();ac['Position']['set'](-0x5dc,0x9c4,-0x5dc),ac['Color']['set'](0xff,0xff,0xff,0xff),ac['Power']=0xfa0;let ad=c['Data']['LightItem']();ad['Position']['set'](0x5dc,0x9c4,-0x5dc),ad['Color']['set'](0xff,0xff,0xff,0xff),ad['Power']=0xfa0,S['push'](aa),S['push'](ab),S['push'](ac),S['push'](ad),P['set'](0x0,0x0,0x0,0xff);}else{let ae=c['Data']['LightItem']();ae['Color']['set'](0x0,0x0,0x0,0xff),ae['Power']=0x0;let af=c['Data']['LightItem']();af['Color']['set'](0x0,0x0,0x0,0xff),af['Power']=0x0;let ag=c['Data']['LightItem']();ag['Color']['set'](0x0,0x0,0x0,0xff),ag['Power']=0x0;let ah=c['Data']['LightItem']();ah['Color']['set'](0x0,0x0,0x0,0xff),ah['Power']=0x0;}c['DemoType']===0x7&&(P['set'](0x212,0x212,0x212,0xff),M['set'](0x78,0x78,0x78,0xff));f['DefaultTexture']=new b();if(c['DemoType']===0x2)x=!![];if(c['DemoType']===0x3)w=!![];if(g!==undefined){for(let ai=0x0;ai<p['length'];ai++){g['deleteTexture'](p[ai]),p[ai]=null;}q!==null&&(g['deleteTexture'](q),q=null),r!==null&&(g['deleteTexture'](r),r=null),s!==null&&(g['deleteTexture'](s),s=null),W();}let a6=c['MultiCamera']['length'];for(let aj=0x0;aj<a6;aj++){k['push'](new Map());}g=c['gl'],B=g['getParameter'](g['MAX_VERTEX_UNIFORM_VECTORS']);if(l){let ak=g['getExtension']('WEBGL_depth_texture');if(ak===undefined)l=![];console['log'](ak);}if(c['useWebGL2']){let al=g['getExtension']('EXT_color_buffer_float');al===null&&console['log']('FLOAT\x20color\x20buffer\x20not\x20available!');}v=[g['TEXTURE_CUBE_MAP_POSITIVE_X'],g['TEXTURE_CUBE_MAP_NEGATIVE_X'],g['TEXTURE_CUBE_MAP_POSITIVE_Y'],g['TEXTURE_CUBE_MAP_NEGATIVE_Y'],g['TEXTURE_CUBE_MAP_POSITIVE_Z'],g['TEXTURE_CUBE_MAP_NEGATIVE_Z']],X();function a7(am,an,ao,ap,aq,ar){const as=ao*aq,at=ap*aq,au=am['createTexture']();am['bindTexture'](am['TEXTURE_2D'],au);an===d['Enum']['FB_RENDER_TYPES']['PICK']||an===d['Enum']['FB_RENDER_TYPES']['DEPTH']||an===d['Enum']['FB_RENDER_TYPES']['NORMAL']||an===d['Enum']['FB_RENDER_TYPES']['POSITION']||an===d['Enum']['FB_RENDER_TYPES']['PRESELECT']?(am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE'])):(am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['LINEAR']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['LINEAR']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE']));am['texImage2D'](am['TEXTURE_2D'],0x0,am['RGBA'],as,at,0x0,am['RGBA'],am['UNSIGNED_BYTE'],null);const av=am['createRenderbuffer']();am['bindRenderbuffer'](am['RENDERBUFFER'],av),am['renderbufferStorage'](am['RENDERBUFFER'],am['DEPTH_COMPONENT16'],as,at);const aw=am['createFramebuffer']();am['bindFramebuffer'](am['FRAMEBUFFER'],aw);let ax=null;l?(ax=am['createTexture'](),am['bindTexture'](am['TEXTURE_2D'],ax),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE']),am['texImage2D'](am['TEXTURE_2D'],0x0,am['DEPTH_COMPONENT'],am['canvas']['width'],am['canvas']['height'],0x0,am['DEPTH_COMPONENT'],am['UNSIGNED_SHORT'],null),am['framebufferTexture2D'](am['FRAMEBUFFER'],am['COLOR_ATTACHMENT0'],am['TEXTURE_2D'],au,0x0),am['framebufferTexture2D'](am['FRAMEBUFFER'],am['DEPTH_ATTACHMENT'],am['TEXTURE_2D'],ax,0x0)):(am['framebufferTexture2D'](am['FRAMEBUFFER'],am['COLOR_ATTACHMENT0'],am['TEXTURE_2D'],au,0x0),am['framebufferRenderbuffer'](am['FRAMEBUFFER'],am['DEPTH_ATTACHMENT'],am['RENDERBUFFER'],av));let ay=am['checkFramebufferStatus'](am['FRAMEBUFFER']);am['bindFramebuffer'](am['FRAMEBUFFER'],null);let az=c['Data']['FrameBufferDataItem']();az['itemType']=an,az['framebufferID']=aw,az['targetTexture']['push'](au),az['targetDepth']=av,az['targetDepthTexture']=ax,az['width']=as,az['height']=at,az['multiplier']=aq,az['sizeLock']=ar,az['texStorageType']=[am['RGBA']],j['set'](an,az);}function a8(am,an,ao,ap,aq){const ar=am['createFramebuffer']();am['bindFramebuffer'](am['FRAMEBUFFER'],ar);const as=ao*aq,at=ap*aq;let au=n,av=am['createRenderbuffer']();am['bindRenderbuffer'](am['RENDERBUFFER'],av),am['renderbufferStorageMultisample'](am['RENDERBUFFER'],au,am['RGBA8'],as,at),am['bindRenderbuffer'](am['RENDERBUFFER'],null);let aw=am['createRenderbuffer'](),ax=null;am['bindRenderbuffer'](am['RENDERBUFFER'],aw),am['renderbufferStorageMultisample'](am['RENDERBUFFER'],au,am['DEPTH24_STENCIL8'],as,at),am['framebufferRenderbuffer'](am['FRAMEBUFFER'],am['COLOR_ATTACHMENT0'],am['RENDERBUFFER'],av),am['framebufferRenderbuffer'](am['FRAMEBUFFER'],am['DEPTH_ATTACHMENT'],am['RENDERBUFFER'],aw);let ay=am['checkFramebufferStatus'](am['FRAMEBUFFER']);ay!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');am['bindFramebuffer'](am['FRAMEBUFFER'],null);let az=c['Data']['FrameBufferDataItem']();az['itemType']=an,az['framebufferID']=ar,az['targetBuffer']=av,az['targetDepth']=aw,az['targetDepthTexture']=ax,az['width']=as,az['height']=at,az['multiplier']=aq,az['sizeLock']=![],az['texStorageType']=[am['RGBA8']],az['msaa']=!![],j['set'](an,az);}function a9(am,an,ao,ap,aq,ar,as,at){let au=0x0;const av=am['createFramebuffer']();am['bindFramebuffer'](am['FRAMEBUFFER'],av);const aw=ao*aq,ax=ap*aq;if(at===undefined){at=[];for(let aE=0x0;aE<ar;aE++){at[aE]=am['RGBA'];}}let ay=[];for(let aF=0x0;aF<ar;aF++){const aG=am['createTexture']();am['bindTexture'](am['TEXTURE_2D'],aG);if(at[aF]===am['RGBA'])am['texImage2D'](am['TEXTURE_2D'],0x0,am['RGBA'],aw,ax,0x0,am['RGBA'],am['UNSIGNED_BYTE'],null);else{if(at[aF]===am['RGBA8'])am['texImage2D'](am['TEXTURE_2D'],0x0,am['RGBA8'],aw,ax,0x0,am['RGBA'],am['UNSIGNED_BYTE'],null);else{if(at[aF]===am['RGBA16F'])am['texImage2D'](am['TEXTURE_2D'],0x0,am['RGBA16F'],aw,ax,0x0,am['RGBA'],am['FLOAT'],null);else{if(at[aF]===am['RGBA32F'])am['texImage2D'](am['TEXTURE_2D'],0x0,am['RGBA32F'],ao,ap,0x0,am['RGBA'],am['FLOAT'],null);else at[aF]===am['SRGB8_ALPHA8']&&am['texImage2D'](am['TEXTURE_2D'],0x0,am['SRGB8_ALPHA8'],ao,ap,0x0,am['RGBA'],am['UNSIGNED_BYTE'],null);}}}an===d['Enum']['FB_RENDER_TYPES']['PICK']||an===d['Enum']['FB_RENDER_TYPES']['DEPTH']||an===d['Enum']['FB_RENDER_TYPES']['NORMAL']||an===d['Enum']['FB_RENDER_TYPES']['POSITION']||an===d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']||an===d['Enum']['FB_RENDER_TYPES']['PRESELECT']?(am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE'])):(am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['LINEAR']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['LINEAR']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE'])),ay['push'](aG);}let az=![],aA=null,aB=null;if(az){aB=am['createTexture'](),am['bindTexture'](am['TEXTURE_2D'],aB),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MIN_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_MAG_FILTER'],am['NEAREST']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_S'],am['CLAMP_TO_EDGE']),am['texParameteri'](am['TEXTURE_2D'],am['TEXTURE_WRAP_T'],am['CLAMP_TO_EDGE']),am['texImage2D'](am['TEXTURE_2D'],0x0,am['DEPTH_COMPONENT16'],aw,ax,0x0,am['DEPTH_COMPONENT'],am['UNSIGNED_SHORT'],null);let aH=[];for(let aI=0x0;aI<ar;aI++){aH[aI]=am['COLOR_ATTACHMENT0']+aI,am['framebufferTexture2D'](am['FRAMEBUFFER'],aH[aI],am['TEXTURE_2D'],ay[aI],0x0);}am['drawBuffers'](aH),am['framebufferTexture2D'](am['FRAMEBUFFER'],am['DEPTH_ATTACHMENT'],am['TEXTURE_2D'],aB,0x0);}else{aA=am['createRenderbuffer'](),am['bindRenderbuffer'](am['RENDERBUFFER'],aA),am['renderbufferStorage'](am['RENDERBUFFER'],am['DEPTH_COMPONENT16'],aw,ax);let aJ=[];for(let aK=0x0;aK<ar;aK++){aJ[aK]=am['COLOR_ATTACHMENT0']+aK,am['framebufferTexture2D'](am['FRAMEBUFFER'],aJ[aK],am['TEXTURE_2D'],ay[aK],0x0);}am['drawBuffers'](aJ),am['framebufferRenderbuffer'](am['FRAMEBUFFER'],am['DEPTH_ATTACHMENT'],am['RENDERBUFFER'],aA);}let aC=am['checkFramebufferStatus'](am['FRAMEBUFFER']);aC!==0x8cd5&&console['log']('[VIZCore]\x20Buffer\x20Create\x20Failed.');am['bindFramebuffer'](am['FRAMEBUFFER'],null);let aD=c['Data']['FrameBufferDataItem']();aD['itemType']=an,aD['framebufferID']=av,aD['targetTexture']=ay,aD['targetDepth']=aA,aD['targetDepthTexture']=aB,aD['width']=aw,aD['height']=ax,aD['multiplier']=aq,aD['sizeLock']=as,aD['texStorageType']=at,j['set'](an,aD);}for(let am=0x0;am<k['length'];am++){j=k[am],a7(g,d['Enum']['FB_RENDER_TYPES']['UI'],g['canvas']['width'],g['canvas']['height'],m,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['SELECTED'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['AFTEREFFECT'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['MODELAFTER'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['SSAO'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['PICK'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['PRESELECT'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['COLOROBJECT'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT'],g['canvas']['width'],g['canvas']['height'],0x1,![]),c['useWebGL2']?(a7(g,d['Enum']['FB_RENDER_TYPES']['DEPTH'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a9(g,d['Enum']['FB_RENDER_TYPES']['PREPROCESSING'],g['canvas']['width'],g['canvas']['height'],0x1,0x4,![],[g['RGBA8'],g['RGBA32F'],g['RGBA16F'],g['RGBA16F']]),a9(g,d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW'],0x1000,0x1000,0x1,0x4,!![],[g['RGBA8'],g['RGBA32F'],g['RGBA16F'],g['RGBA16F']]),a9(g,d['Enum']['FB_RENDER_TYPES']['CUSTOM'],g['canvas']['width'],g['canvas']['height'],0x1,0x1,![]),a9(g,d['Enum']['FB_RENDER_TYPES']['CUSTOM2'],g['canvas']['width'],g['canvas']['height'],0x1,0x1,![]),a9(g,d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],g['canvas']['width'],g['canvas']['height'],m,0x1,![]),o?a8(g,d['Enum']['FB_RENDER_TYPES']['MAIN'],g['canvas']['width'],g['canvas']['height'],0x1):a7(g,d['Enum']['FB_RENDER_TYPES']['MAIN'],g['canvas']['width'],g['canvas']['height'],m,![])):(a7(g,d['Enum']['FB_RENDER_TYPES']['MAIN'],g['canvas']['width'],g['canvas']['height'],m,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['DEPTH'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['NORMAL'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['POSITION'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['CUSTOM'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['CUSTOM2'],g['canvas']['width'],g['canvas']['height'],0x1,![]),a7(g,d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING'],g['canvas']['width'],g['canvas']['height'],m,![])),a7(g,d['Enum']['FB_RENDER_TYPES']['END'],g['canvas']['width'],g['canvas']['height'],0x1,![]);}j=k[0x0],g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']);}this['InitCanvas']=function(){V();},this['IsWebGLEXTDEPTH']=function(){return l;},this['ClearProcess']=function(){let a5=function(a6,a7,a8){g['bindFramebuffer'](g['FRAMEBUFFER'],a6['framebufferID']),g['clearColor'](0x0,0x0,0x0,0x0),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),g['bindFramebuffer'](g['FRAMEBUFFER'],null);};for(let a6=0x0;a6<k['length'];a6++){k[a6]['forEach'](a5);}},this['SetSkyCubeTextureType']=function(a5,a6){{for(let a7=0x0;a7<p['length'];a7++){g['deleteTexture'](p[a7]),p[a7]=null;}r!==null&&(g['deleteTexture'](r),r=null),s!==null&&(g['deleteTexture'](s),s=null);}t=a5;if(a5!==-0x1)a6='';if(u!==undefined)u=a6;else u='';},this['CreateShaderData']=function(){f['CreateBRDF']();if(L===null){L=g['createTexture'](),g['bindTexture'](g['TEXTURE_2D'],L);let a5=new Uint8Array(0x2*0x2*0x4);for(let a6=0x0;a6<a5['length'];a6++)a5[a6]=0x0;g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA'],0x2,0x2,0x0,g['RGBA'],g['UNSIGNED_BYTE'],a5),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MIN_FILTER'],g['NEAREST']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MAG_FILTER'],g['NEAREST']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_S'],g['REPEAT']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_T'],g['REPEAT']),g['bindTexture'](g['TEXTURE_2D'],null);}};function W(){h['forEach'](function(a5){g['deleteProgram'](a5);});}function X(){function a5(ac,ad,ae,af){const ag=ac['createShader'](ae);ac['shaderSource'](ag,ad),ac['compileShader'](ag);const ah=ac['getShaderParameter'](ag,ac['COMPILE_STATUS']);if(!ah){const ai=ac['getShaderInfoLog'](ag);return console['log']('***\x20Error\x20compiling\x20shader\x20\x27'+ag+'\x27:'+ai),ac['deleteShader'](ag),null;}return ag;}function a6(ac,ad,ae,af,ag){const ah=[];for(let ai=0x0;ai<ad['length'];++ai){ah['push'](a5(ac,ad[ai],ac[e[ai]],ag));}return a7(ac,ah,ae,af,ag);}function a7(ac,ad,ae,af,ag){const ah=ac['createProgram']();ad['forEach'](function(aj){ac['attachShader'](ah,aj);});ae&&ae['forEach'](function(aj,ak){ac['bindAttribLocation'](ah,af?af[ak]:ak,aj);});ac['linkProgram'](ah);const ai=ac['getProgramParameter'](ah,ac['LINK_STATUS']);if(!ai){const aj=ac['getProgramInfoLog'](ah);return ac['deleteProgram'](ah),null;}return ah;}function a8(ac,ad,ae){let af=[];for(let ag=0x0;ag<ac['length'];++ag){af[ag]=ac[ag];}if(ad!==undefined)for(let ah=0x0;ah<ac['length'];++ah){let ai='';for(let aj=0x0;aj<ad['length'];++aj){ai+='#define\x20'+ad[aj]+'\x20\x0a';}af[ah]=ai+af[ah];}if(ae!==undefined&&ae>0x0){let ak='#version\x20'+ae+'\x20es\x0a';for(let al=0x0;al<ac['length'];++al){af[al]=ak+af[al];}}return af;}let a9=[],aa=0x0;{c['useWebGL2']&&(aa=0x12c);if(c['Clipping']!==null)c['Clipping']['IsClipping']()&&a9['push']('CLIPPLANE_BOX');w&&a9['push']('SHADING_TRIPLANAR');f['UseHDR']&&a9['push']('SHADING_HDR');{let ac=B-0x80;ac=Math['floor'](ac/0x4);let ad=ac%0x4;ac=ac-ad,C=ac,a9['push']('MATRIXDATASCOUNT\x20'+C),x===!![]&&B-0x80>0x0&&(C>0x0&&a9['push']('UPDATEMATRIXMANAGER'));}c['Renderer']!==null&&(c['Renderer']['GetEnvironmentMode']()&&a9['push']('SHADING_ENVIRONMENT'),c['Renderer']['UseSkyTexture']()&&(s===null&&a4())),c['Renderer']!==null&&(c['Renderer']['GetShadowMode']()&&a9['push']('SHADING_SHADOW'));}let ab=new a(c);h['set'](d['Enum']['SHADER_TYPES']['PHONG'],a6(g,a8([ab['ShadingLanguage']['Basic']['vertex'],ab['ShadingLanguage']['Basic']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['PHONGUTIL'],a6(g,[ab['ShadingLanguage']['BasicUtil']['vertex'],ab['ShadingLanguage']['BasicUtil']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['PICKING'],a6(g,a8([ab['ShadingLanguage']['Picking']['vertex'],ab['ShadingLanguage']['Picking']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['BASIC2D'],a6(g,[ab['ShadingLanguage']['Basic2D']['vertex'],ab['ShadingLanguage']['Basic2D']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['FXAA'],a6(g,[ab['ShadingLanguage']['FXAA']['vertex'],ab['ShadingLanguage']['FXAA']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['EDGE'],a6(g,a8([ab['ShadingLanguage']['Edge']['vertex'],ab['ShadingLanguage']['Edge']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['BACKGROUND'],a6(g,[ab['ShadingLanguage']['Background']['vertex'],ab['ShadingLanguage']['Background']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['SKYBOX'],a6(g,a8([ab['ShadingLanguage']['SkyBox']['vertex'],ab['ShadingLanguage']['SkyBox']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT'],a6(g,[ab['ShadingLanguage']['PreFilteredEnvironment']['vertex'],ab['ShadingLanguage']['PreFilteredEnvironment']['fragment']])),c['useWebGL2']?(h['set'](d['Enum']['SHADER_TYPES']['PBR'],a6(g,a8([ab['ShadingLanguage']['PBR_v2']['vertex'],ab['ShadingLanguage']['PBR_v2']['fragment']],a9,aa))),h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'],a6(g,a8([ab['ShadingLanguage']['AnimationPBR']['vertex'],ab['ShadingLanguage']['AnimationPBR']['fragment']],a9,aa))),h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],a6(g,a8([ab['ShadingLanguage']['AnimationBasic2D']['vertex'],ab['ShadingLanguage']['AnimationBasic2D']['fragment']],a9,aa))),h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D'],a6(g,a8([ab['ShadingLanguage']['Texture2D']['vertex'],ab['ShadingLanguage']['Texture2D']['fragment']],undefined,aa))),h['set'](d['Enum']['SHADER_TYPES']['SSAO'],a6(g,a8([ab['ShadingLanguage']['SSAO_v3']['vertex'],ab['ShadingLanguage']['SSAO_v3']['fragment']],undefined,aa))),h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D_SSAO'],a6(g,a8([ab['ShadingLanguage']['Texture2D_SSAO']['vertex'],ab['ShadingLanguage']['Texture2D_SSAO']['fragment']],undefined,aa))),h['set'](d['Enum']['SHADER_TYPES']['BLUR'],a6(g,[ab['ShadingLanguage']['Blur']['vertex'],ab['ShadingLanguage']['Blur']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['BRDF'],a6(g,a8([ab['ShadingLanguage']['BRDF']['vertex'],ab['ShadingLanguage']['BRDF']['fragment']],undefined,aa))),h['set'](d['Enum']['SHADER_TYPES']['IRRADIANCEENVIRONMENT'],a6(g,a8([ab['ShadingLanguage']['IrradianceEnvironment']['vertex'],ab['ShadingLanguage']['IrradianceEnvironment']['fragment']],undefined,aa))),h['set'](d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX'],a6(g,a8([ab['ShadingLanguage']['EquirectangularSkyBox']['vertex'],ab['ShadingLanguage']['EquirectangularSkyBox']['fragment']],undefined,aa)))):(h['set'](d['Enum']['SHADER_TYPES']['PBR'],a6(g,a8([ab['ShadingLanguage']['PBR']['vertex'],ab['ShadingLanguage']['PBR']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'],a6(g,a8([ab['ShadingLanguage']['AnimationPBR']['vertex'],ab['ShadingLanguage']['AnimationPBR']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['ANIMATIONBASIC2D'],a6(g,a8([ab['ShadingLanguage']['AnimationBasic2D']['vertex'],ab['ShadingLanguage']['AnimationBasic2D']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['TEXTURE2D'],a6(g,[ab['ShadingLanguage']['Texture2D']['vertex'],ab['ShadingLanguage']['Texture2D']['fragment']]))),c['useWebGL2']?h['set'](d['Enum']['SHADER_TYPES']['PREPROCESSING'],a6(g,a8([ab['ShadingLanguage']['Preprocessing']['vertex'],ab['ShadingLanguage']['Preprocessing']['fragment']],a9,aa))):(h['set'](d['Enum']['SHADER_TYPES']['DEPTH'],a6(g,a8([ab['ShadingLanguage']['Depth']['vertex'],ab['ShadingLanguage']['Depth']['fragment']],a9))),h['set'](d['Enum']['SHADER_TYPES']['NORMAL'],a6(g,[ab['ShadingLanguage']['Normal']['vertex'],ab['ShadingLanguage']['Normal']['fragment']])),h['set'](d['Enum']['SHADER_TYPES']['POSITION'],a6(g,[ab['ShadingLanguage']['Position']['vertex'],ab['ShadingLanguage']['Position']['fragment']])));}this['UpdateShader']=function(){W(),X();},this['BeginShader']=function(a5){let a6=h['get'](a5);if(a6===undefined)return;f['currentShaderType']=a5,f['currentProgram']=a6,g['useProgram'](f['currentProgram']),f['positionAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_position');if(f['positionAttributeLocation']>=0x0)g['enableVertexAttribArray'](f['positionAttributeLocation']);f['normalAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_normal');if(f['normalAttributeLocation']>=0x0)g['enableVertexAttribArray'](f['normalAttributeLocation']);f['colorAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_color');if(f['colorAttributeLocation']>=0x0)g['enableVertexAttribArray'](f['colorAttributeLocation']);f['uvAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_uv');if(f['uvAttributeLocation']>=0x0)g['enableVertexAttribArray'](f['uvAttributeLocation']);f['updateMatrixAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_matrixIdx');if(f['updateMatrixAttributeLocation']>=0x0){g['disableVertexAttribArray'](f['updateMatrixAttributeLocation']);let a9=g['getUniformLocation'](f['currentProgram'],'ubUseMatrixDatas');g['uniform1i'](a9,![]);}f['subBipedIdxAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_bipedIdx');f['subBipedIdxAttributeLocation']>=0x0&&g['enableVertexAttribArray'](f['subBipedIdxAttributeLocation']);f['subBipedWeightAttributeLocation']=g['getAttribLocation'](f['currentProgram'],'a_bipedWeight');f['subBipedWeightAttributeLocation']>=0x0&&g['enableVertexAttribArray'](f['subBipedWeightAttributeLocation']);c['Shader']['SetClipping'](undefined);let a7=g['getUniformLocation'](f['currentProgram'],'ubUsePrevDpeth');if(a7!==null)g['uniform1i'](a7,0x0);let a8=g['getUniformLocation'](f['currentProgram'],'ubUseGraySacle');if(a8!==null)g['uniform1i'](a8,c['Renderer']['GetGraySacleMode']());},this['DisableAttribute']=function(a5){g['disableVertexAttribArray'](a5);},this['EndShader']=function(){f['currentProgram']=undefined,f['currentShaderType']=undefined,f['currentMaterial']=-0x1;if(f['positionAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['positionAttributeLocation']);if(f['normalAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['normalAttributeLocation']);if(f['colorAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['colorAttributeLocation']);if(f['uvAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['uvAttributeLocation']);if(f['updateMatrixAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['updateMatrixAttributeLocation']);if(f['subBipedIdxAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['subBipedIdxAttributeLocation']);if(f['subBipedIdxAttributeLocation']>=0x0)g['disableVertexAttribArray'](f['subBipedIdxAttributeLocation']);f['subBipedWeightAttributeLocation']>=0x0&&g['disableVertexAttribArray'](f['subBipedWeightAttributeLocation']),f['positionAttributeLocation']=-0x1,f['normalAttributeLocation']=-0x1,f['colorAttributeLocation']=-0x1,f['uvAttributeLocation']=-0x1,f['subBipedIdxAttributeLocation']=-0x1,f['subBipedWeightAttributeLocation']=-0x1,g['bindBuffer'](g['ARRAY_BUFFER'],null),g['bindBuffer'](g['ELEMENT_ARRAY_BUFFER'],null),i=[],f['updateMatrixAttributeLocation']=-0x1,D=undefined,E=-0x1;},this['SetMatrix']=function(a5,a6){if(f['currentProgram']===undefined)return;let a7=g['getUniformLocation'](f['currentProgram'],'u_MVPmatrix');g['uniformMatrix4fv'](a7,![],a5['elements']);if(a6!==undefined){let a8=g['getUniformLocation'](f['currentProgram'],'u_MVmatrix');a8!==null&&g['uniformMatrix4fv'](a8,![],a6['elements']);let a9=g['getUniformLocation'](f['currentProgram'],'u_NormalPmatrix');if(a9!==null){let aa=new d['Matrix4']()['copy'](a6);aa['setPosition'](new d['Vector3']()),g['uniformMatrix4fv'](a9,![],aa['elements']);}}},this['SetCustomMatrix']=function(a5,a6){if(f['currentProgram']===undefined)return;if(a6===undefined)return;let a7=g['getUniformLocation'](f['currentProgram'],a5);a7!==null&&g['uniformMatrix4fv'](a7,![],a6['elements']);},this['SetGLColor']=function(a5,a6,a7,a8){if(f['currentProgram']===undefined)return;let a9=g['getUniformLocation'](f['currentProgram'],'u_color');g['uniform4f'](a9,a5,a6,a7,a8);},this['SetClipping']=function(a5){if(f['currentProgram']===undefined)return;if(a5===undefined){for(let ac=0x1;ac<=0x6;++ac){let ad=g['getUniformLocation'](f['currentProgram'],'vIS'+ac+'Plane');if(ad===null)break;g['uniform4f'](ad,0x0,0x0,0x0,0x1);}return;}let a6=c['Clipping']['Get']();if(a6===undefined)return;let a7=0x6;switch(a6['type']){case d['Enum']['CLIPPING_MODES']['X']:a7=0x1;break;case d['Enum']['CLIPPING_MODES']['Y']:a7=0x1;break;case d['Enum']['CLIPPING_MODES']['Z']:a7=0x1;break;}let a8=new d['Matrix4']()['copy'](a5);a8['setPosition'](new d['Vector3'](0x0,0x0,0x0));let a9=0x0,aa,ab;for(let ae=0x1;ae<=0x6;++ae){let af=g['getUniformLocation'](f['currentProgram'],'vIS'+ae+'Plane');if(af===null)break;let ag,ah;a9<a6['planes']['length']?(ag=new d['Vector3']()['copy'](a6['planes'][a9]['normal']),ag['applyMatrix4'](a8),ah=new d['Vector3']()['copy'](a6['planes'][a9]['center']),ah['applyMatrix4'](a5),a9++):(ag=aa,ah=ab);let ai=new d['Plane']()['setFromNormalAndCoplanarPoint'](ag,ah);g['uniform4f'](af,ai['normal']['x'],ai['normal']['y'],ai['normal']['z'],ai['constant']),aa=ag,ab=ah;}},this['SetGLMaterial']=function(a5){if(f['currentProgram']===undefined)return;if(f['currentMaterial']>=0x0&&f['currentMaterial']===a5)return;a5!==f['currentMaterial']&&(i=[]);f['currentMaterial']=a5;let a6=c['Material']['GetMaterial'](a5);f['SetGLBRDFData']();if(a6===undefined){let aq=g['getUniformLocation'](f['currentProgram'],'fRoughness');if(aq!==null)g['uniform1f'](aq,0.5);let ar=g['getUniformLocation'](f['currentProgram'],'fMetallic');if(ar!==null)g['uniform1f'](ar,0x0);let as=g['getUniformLocation'](f['currentProgram'],'uTiling');if(as!==null)g['uniform2f'](as,0x0,0x0);let at=g['getUniformLocation'](f['currentProgram'],'uOffset');if(at!==null)g['uniform2f'](at,0x0,0x0);let au=g['getUniformLocation'](f['currentProgram'],'useTexture');g['uniform1i'](au,0x0),f['SetCurrentTexture']('u_Texture',g['TEXTURE_2D'],L);let av=g['getUniformLocation'](f['currentProgram'],'useTextureNormal');g['uniform1i'](av,0x0),f['SetCurrentTexture']('u_texNormal',g['TEXTURE_2D'],L);let aw=g['getUniformLocation'](f['currentProgram'],'useTextureBump');g['uniform1i'](aw,0x0),f['SetCurrentTexture']('u_texBump',g['TEXTURE_2D'],L);let ax=g['getUniformLocation'](f['currentProgram'],'useTextureRoughness');g['uniform1i'](ax,0x0),f['SetCurrentTexture']('u_texRoughness',g['TEXTURE_2D'],L);let ay=g['getUniformLocation'](f['currentProgram'],'useTextureMetalness');g['uniform1i'](ay,0x0),f['SetCurrentTexture']('u_texMetalness',g['TEXTURE_2D'],L);let az=g['getUniformLocation'](f['currentProgram'],'useTextureSpecluar');g['uniform1i'](az,0x0),f['SetCurrentTexture']('u_texSpecluar',g['TEXTURE_2D'],L);if(c['Renderer']['GetEnvironmentMode']()){let aA=g['getUniformLocation'](f['currentProgram'],'u_texIrradianceMap');aA!==null&&c['Shader']['SetCurrentTexture']('u_texIrradianceMap',g['TEXTURE_CUBE_MAP'],q);let aB=g['getUniformLocation'](f['currentProgram'],'u_texPrefilterMap');aB!==null&&c['Shader']['SetCurrentTexture']('u_texPrefilterMap',g['TEXTURE_CUBE_MAP'],r);let aC=g['getUniformLocation'](f['currentProgram'],'utexCubeMapLod0'),aD=g['getUniformLocation'](f['currentProgram'],'utexCubeMapLod1'),aE=g['getUniformLocation'](f['currentProgram'],'fRoughnessLod'),aF=0.5,aG=aF*0x5,aH=aG;if(aC!==null&&aD!==null){aH=aF;if(aG<0x1)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x1]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x0]),aH=aG;else{if(aG<0x2)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x2]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x1]),aH=aG-0x1;else{if(aG<0x3)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x3]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x2]),aH=aG-0x2;else aG<0x4?(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x3]),aH=aG-0x3):(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x4]),aH=aG-0x4);}}}aE!==null&&g['uniform1f'](aE,aH);}f['uvAttributeLocation']>=0x0&&g['disableVertexAttribArray'](f['uvAttributeLocation']);return;}let a7=![],a8=![],a9=![],aa=![],ab=![],ac=![],ad=![],ae=a6['color']['glColor']();f['SetGLColor'](ae);let af=g['getUniformLocation'](f['currentProgram'],'fRoughness');if(af!==null)g['uniform1f'](af,a6['roughness']);let ag=g['getUniformLocation'](f['currentProgram'],'fMetallic');if(ag!==null)g['uniform1f'](ag,a6['metallic']);let ah=g['getUniformLocation'](f['currentProgram'],'uTiling'),ai=g['getUniformLocation'](f['currentProgram'],'uOffset'),aj=g['getUniformLocation'](f['currentProgram'],'useTexture'),ak=g['getUniformLocation'](f['currentProgram'],'useTextureNormal'),al=g['getUniformLocation'](f['currentProgram'],'useTextureBump'),am=g['getUniformLocation'](f['currentProgram'],'useTextureRoughness'),an=g['getUniformLocation'](f['currentProgram'],'useTextureMetalness'),ao=g['getUniformLocation'](f['currentProgram'],'useTextureSpecluar'),ap=g['getUniformLocation'](f['currentProgram'],'useTextureAO');c['Material']['UpdateMaterialTexture'](a6);for(let aI=0x0;aI<a6['textureData']['length'];aI++){let aJ=a6['textureData'][aI];if(aJ['width']<=0x0&&aJ['hegith']<=0x0)continue;if(aJ['src']===undefined)continue;if(aJ['texture']===null)continue;switch(aJ['itemType']){case d['Enum']['TEXTURE_TYPES']['DIFFUSE']:{g['uniform1i'](aj,0x1),f['SetCurrentTexture']('u_Texture',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);a7=!![];}break;case d['Enum']['TEXTURE_TYPES']['NORMAL']:{g['uniform1i'](ak,0x1),f['SetCurrentTexture']('u_texNormal',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);a8=!![];}break;case d['Enum']['TEXTURE_TYPES']['BUMP']:{g['uniform1i'](al,0x1),f['SetCurrentTexture']('u_texBump',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);a9=!![];}break;case d['Enum']['TEXTURE_TYPES']['ROUGHNESS']:{g['uniform1i'](am,0x1),f['SetCurrentTexture']('u_texRoughness',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);aa=!![];}break;case d['Enum']['TEXTURE_TYPES']['METALNESS']:{g['uniform1i'](an,0x1),f['SetCurrentTexture']('u_texMetalness',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);ab=!![];}break;case d['Enum']['TEXTURE_TYPES']['SPECLUAR']:{g['uniform1i'](ao,0x1),f['SetCurrentTexture']('u_texSpecluar',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);ac=!![];}break;case d['Enum']['TEXTURE_TYPES']['AMBIENT']:{g['uniform1i'](ap,0x1),f['SetCurrentTexture']('u_texAO',g['TEXTURE_2D'],aJ['texture']);if(ah!==null)g['uniform2f'](ah,aJ['tiling']['x'],aJ['tiling']['y']);if(ai!==null)g['uniform2f'](ai,aJ['offset']['x'],aJ['offset']['y']);ad=!![];}break;}}!a7&&(g['uniform1i'](aj,0x0),f['SetCurrentTexture']('u_Texture',g['TEXTURE_2D'],L));!a8&&(g['uniform1i'](ak,0x0),f['SetCurrentTexture']('u_texNormal',g['TEXTURE_2D'],L));!a9&&(g['uniform1i'](al,0x0),f['SetCurrentTexture']('u_texBump',g['TEXTURE_2D'],L));!aa&&(g['uniform1i'](am,0x0),f['SetCurrentTexture']('u_texRoughness',g['TEXTURE_2D'],L));!ab&&(g['uniform1i'](an,0x0),f['SetCurrentTexture']('u_texMetalness',g['TEXTURE_2D'],L));!ac&&(g['uniform1i'](ao,0x0),f['SetCurrentTexture']('u_texSpecluar',g['TEXTURE_2D'],L));!ad&&(g['uniform1i'](ap,0x0),f['SetCurrentTexture']('u_texAO',g['TEXTURE_2D'],L));f['uvAttributeLocation']>=0x0&&g['enableVertexAttribArray'](f['uvAttributeLocation']);!a7&&!a8&&!a9&&!aa&&!ab&&!ac&&!ad&&(f['uvAttributeLocation']>=0x0&&g['disableVertexAttribArray'](f['uvAttributeLocation']));if(c['Renderer']['GetEnvironmentMode']()){let aK=g['getUniformLocation'](f['currentProgram'],'u_texIrradianceMap');aK!==null&&c['Shader']['SetCurrentTexture']('u_texIrradianceMap',g['TEXTURE_CUBE_MAP'],q);let aL=g['getUniformLocation'](f['currentProgram'],'u_texPrefilterMap');aL!==null&&c['Shader']['SetCurrentTexture']('u_texPrefilterMap',g['TEXTURE_CUBE_MAP'],r);let aM=g['getUniformLocation'](f['currentProgram'],'utexCubeMapLod0'),aN=g['getUniformLocation'](f['currentProgram'],'utexCubeMapLod1'),aO=g['getUniformLocation'](f['currentProgram'],'fRoughnessLod'),aP=a6['roughness']*0x5,aQ=aP;if(aM!==null&&aN!==null){aQ=a6['roughness'];if(aP<0x1)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x1]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x0]),aQ=aP;else{if(aP<0x2)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x2]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x1]),aQ=aP-0x1;else{if(aP<0x3)c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x3]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x2]),aQ=aP-0x2;else aP<0x4?(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x3]),aQ=aP-0x3):(c['Shader']['SetCurrentTexture']('utexCubeMapLod0',g['TEXTURE_CUBE_MAP'],p[0x4]),c['Shader']['SetCurrentTexture']('utexCubeMapLod1',g['TEXTURE_CUBE_MAP'],p[0x4]),aQ=aP-0x4);}}}aO!==null&&g['uniform1f'](aO,aQ);}},this['SetCurrentTexture']=function(a5,a6,a7){if(f['currentProgram']===undefined)return;let a8=![],a9=i['length'];for(let ab=0x0;ab<i['length'];ab++){if(i[ab]===a5){a9=ab,a8=!![];break;}}if(a8)return;let aa=g['getUniformLocation'](f['currentProgram'],a5);if(aa===null)return;g['activeTexture'](g['TEXTURE0']+a9),g['bindTexture'](a6,a7),g['uniform1i'](aa,a9),!a8&&i['push'](a5),g['activeTexture'](g['TEXTURE0']);},this['SetCurrentTextureByFB']=function(a5,a6){let a7=f['GetItemFramebuffer'](a6);if(a7===undefined)return;f['SetCurrentTexture'](a5,g['TEXTURE_2D'],a7['targetTexture'][0x0]);},this['SetGLSkyBox']=function(){f['SetCurrentTexture']('utexCubeMap',g['TEXTURE_CUBE_MAP'],s);},this['SetGLCameraData']=function(){if(f['currentProgram']===undefined)return;let a5=g['getUniformLocation'](c['Shader']['currentProgram'],'ubPerspectiveView');if(a5!==null)g['uniform1f'](a5,c['Camera']['perspectiveView']===!![]?0x1:0x0);let a6=g['getUniformLocation'](c['Shader']['currentProgram'],'uNear');if(a6!==null)g['uniform1f'](a6,c['Camera']['near']);let a7=g['getUniformLocation'](c['Shader']['currentProgram'],'uFar');if(a7!==null)g['uniform1f'](a7,c['Camera']['far']);let a8=g['getUniformLocation'](c['Shader']['currentProgram'],'u_ProjectionMatrix');if(a8!==null)g['uniformMatrix4fv'](a8,![],c['Camera']['projectionMatrix']['elements']);},this['SetResolutionData']=function(){if(f['currentProgram']===undefined)return;let a5=g['getUniformLocation'](c['Shader']['currentProgram'],'u_Resolution');if(a5!==null){let a6=c['Renderer']['GetSizeWidth'](),a7=c['Renderer']['GetSizeHeight']();g['uniform2f'](a5,a6,a7);}},this['SetGLNoiseData']=function(){if(f['currentProgram']===undefined)return;if(!c['useWebGL2'])return;if(G===undefined){G=g['createTexture'](),g['bindTexture'](g['TEXTURE_2D'],G);let a7=new Float32Array(H*H*0x4);for(let a9=0x0;a9<H;++a9){for(let aa=0x0;aa<H;++aa){let ab=a9*H*0x4+aa*0x4;a7[ab]=Math['random']()*0x2-0x1,a7[ab+0x1]=Math['random']()*0x2-0x1,a7[ab+0x2]=0x0,a7[ab+0x3]=0x1;}}g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA16F'],H,H,0x0,g['RGBA'],g['FLOAT'],a7),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MAG_FILTER'],g['NEAREST']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MIN_FILTER'],g['NEAREST']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_S'],g['REPEAT']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_T'],g['REPEAT']);let a8=0x100;I=new Float32Array(a8*0x3);for(let ac=0x0;ac<a8;++ac){let ad=Math['random']()*0x2-0x1,ae=Math['random']()*0x2-0x1,af=Math['random'](),ag=Math['random'](),ah=new d['Vector3'](ad,ae,af);ah['normalize'](),ah=ah['multiplyScalar'](ag);let ai=ac/a8;ai=0.1+ai*ai*(0x1-0.1),ah=ah['multiplyScalar'](ai),I[ac*0x3+0x0]=ah['x'],I[ac*0x3+0x1]=ah['y'],I[ac*0x3+0x2]=ah['z'];}}f['SetCurrentTexture']('u_NoiseTexture',g['TEXTURE_2D'],G);let a5=g['getUniformLocation'](c['Shader']['currentProgram'],'uNoiseTexScale');a5&&g['uniform2f'](a5,g['canvas']['width']*0x1/H,g['canvas']['height']*0x1/H);let a6=g['getUniformLocation'](c['Shader']['currentProgram'],'uSamples');a6&&g['uniform3fv'](a6,I);},this['SetGLBRDFData']=function(){if(f['currentProgram']===undefined)return;if(!c['useWebGL2'])return;let a5=g['getUniformLocation'](c['Shader']['currentProgram'],'u_texbrdfLUT');if(a5===null)return;f['SetCurrentTexture']('u_texbrdfLUT',g['TEXTURE_2D'],K);},this['GetGLBRDFData']=function(){return K;},this['CreateBRDF']=function(){if(!c['useWebGL2'])return;if(K===undefined){let a5=c['Shader']['currentShaderType'],a6=0x200,a7=0x200;K=g['createTexture'](),g['bindTexture'](g['TEXTURE_2D'],K),g['texImage2D'](g['TEXTURE_2D'],0x0,g['RG16F'],a6,a7,0x0,g['RG'],g['FLOAT'],null),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_S'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_T'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MIN_FILTER'],g['LINEAR']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MAG_FILTER'],g['LINEAR']);const a8=g['createRenderbuffer']();g['bindRenderbuffer'](g['RENDERBUFFER'],a8),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],a6,a7);const a9=g['createFramebuffer']();g['bindFramebuffer'](g['FRAMEBUFFER'],a9),g['bindTexture'](g['TEXTURE_2D'],K),g['framebufferTexture2D'](g['FRAMEBUFFER'],g['COLOR_ATTACHMENT0'],g['TEXTURE_2D'],K,0x0),g['framebufferRenderbuffer'](g['FRAMEBUFFER'],g['DEPTH_ATTACHMENT'],g['RENDERBUFFER'],a8);let aa=g['checkFramebufferStatus'](g['FRAMEBUFFER']);g['bindFramebuffer'](g['FRAMEBUFFER'],a9),g['viewport'](0x0,0x0,a6,a7),g['clearColor'](0x0,0x0,0x0,0x0),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['BRDF']);const ab=new d['Matrix4']();c['Shader']['SetMatrix'](ab,undefined),c['RenderWGL']['Util_RenderQuad'](![]),c['Shader']['EndShader']();if(![]){let ac=new Uint8Array(a6*a7*0x4);g['readPixels'](0x0,0x0,a6,a7,g['RGBA'],g['UNSIGNED_BYTE'],ac),c['Util']['SaveImageData'](ac,a6,a7);}g['bindFramebuffer'](g['FRAMEBUFFER'],null);if(f['currentFramebufferType']!==undefined){let ad=j['get'](f['currentFramebufferType']);ad!==undefined&&g['bindFramebuffer'](g['FRAMEBUFFER'],ad['framebufferID']);}g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']);if(a5!==undefined)f['BeginShader'](a5);return;}},this['SetPointSize']=function(a5){if(f['currentProgram']===undefined)return;let a6=g['getUniformLocation'](f['currentProgram'],'u_PointSize');if(a6!==null)g['uniform1f'](a6,a5);},this['SetLineThickness']=function(a5){if(f['currentProgram']===undefined)return;let a6=g['getUniformLocation'](f['currentProgram'],'u_Tickness');if(a6!==null)g['uniform1f'](a6,a5);},this['GetItemFramebuffer']=function(a5){let a6=j['get'](a5);return a6;};function Y(a5,a6){let a7=j['get'](a5);if(a7===undefined)return![];if(a6)g['bindTexture'](g['TEXTURE_2D'],a7['targetTexture'][0x0]);else g['bindTexture'](g['TEXTURE_2D'],a7['targetDepthTexture']);return!![];};this['SetFramebufferIndex']=function(a5){j=k[a5];},this['BeginFramebuffer']=function(a5){let a6=j['get'](a5);if(a6===undefined)return;f['currentFramebufferType']=a5,g['bindFramebuffer'](g['FRAMEBUFFER'],a6['framebufferID']),g['viewport'](0x0,0x0,a6['width'],a6['height']);},this['EndFramebuffer']=function(){f['currentFramebufferType']=undefined,g['bindFramebuffer'](g['FRAMEBUFFER'],null),g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']);},this['BindTargetTexture']=function(){if(f['currentFramebufferType']===undefined)return![];return c['Shader']['BindTargetTextureByType'](f['currentFramebufferType']);},this['BindTargetTextureByType']=function(a5){return Y(a5,!![]);},this['BindTargetDepthByType']=function(a5){return Y(a5,![]);},this['GetFrameBufferTexture']=function(a5){let a6=c['Data']['TextureDataItem'](),a7=j['get'](a5);if(a7===undefined)return undefined;return a6['texture']=a7['targetTexture'][0x0],a6['width']=a7['width'],a6['height']=a7['height'],a6;},this['GetColorIDTexture']=function(a5){let a6=c['Data']['TextureDataItem']();if(c['useWebGL2']){let a7=undefined;if(a5===undefined||a5===0x0)a7=j['get'](d['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);else{if(a5===0x1)a7=j['get'](d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']);else{if(a5===0x2)a7=j['get'](d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT']);else{if(a5===-0x1)a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);else a5===0xa&&(a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']));}}}if(a7===undefined)return undefined;a6['texture']=a7['targetTexture'][0x0],a6['width']=a7['width'],a6['height']=a7['height'];}else{let a8=undefined;if(a5===undefined||a5===0x0)a8=j['get'](d['Enum']['FB_RENDER_TYPES']['COLOROBJECT']);else{if(a5===0x1)a8=j['get'](d['Enum']['FB_RENDER_TYPES']['COLORCUSTOMOBJECT']);else a5===0x2&&(a8=j['get'](d['Enum']['FB_RENDER_TYPES']['AVATAROBJECT']));}if(a8===undefined)return undefined;a6['texture']=a8['targetTexture'][0x0],a6['width']=a8['width'],a6['height']=a8['height'];}return a6;},this['GetPositionTexture']=function(a5){let a6=c['Data']['TextureDataItem']();if(c['useWebGL2']){let a7=undefined;if(a5===undefined||a5===0x0){a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(a7===undefined)return undefined;}else{if(a5===0xa){a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']);if(a7===undefined)return undefined;}}a6['texture']=a7['targetTexture'][0x1],a6['width']=a7['width'],a6['height']=a7['height'];}else{let a8=j['get'](d['Enum']['FB_RENDER_TYPES']['POSITION']);if(a8===undefined)return undefined;a6['texture']=a8['targetTexture'][0x0],a6['width']=a8['width'],a6['height']=a8['height'];}return a6;},this['GetNormalTexture']=function(){let a5=c['Data']['TextureDataItem']();if(c['useWebGL2']){let a6=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(a6===undefined)return undefined;a5['texture']=a6['targetTexture'][0x2],a5['width']=a6['width'],a5['height']=a6['height'];}else{let a7=j['get'](d['Enum']['FB_RENDER_TYPES']['NORMAL']);if(a7===undefined)return undefined;a5['texture']=a7['targetTexture'][0x0],a5['width']=a7['width'],a5['height']=a7['height'];}return a5;},this['GetDepthTexture']=function(a5){let a6=c['Data']['TextureDataItem']();if(c['useWebGL2']){let a7=undefined;if(a5===undefined||a5===0x0){a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSING']);if(a7===undefined)return undefined;}else{if(a5===0xa){a7=j['get'](d['Enum']['FB_RENDER_TYPES']['PREPROCESSINGSHADOW']);if(a7===undefined)return undefined;}}a6['texture']=a7['targetTexture'][0x3],a6['width']=a7['width'],a6['height']=a7['height'];}else{let a8=j['get'](d['Enum']['FB_RENDER_TYPES']['DEPTH']);if(a8===undefined)return undefined;a6['texture']=a8['targetTexture'][0x0],a6['width']=a8['width'],a6['height']=a8['height'];}return a6;};function Z(){s!==null&&g['deleteTexture'](s);s=null;let a5=0x0,a6=[new Image(),new Image(),new Image(),new Image(),new Image(),new Image()];for(let a9=0x0;a9<0x6;a9++){a6[a9]['src']=c['Util']['GetCubeMapTexture'](a9),a6[a9]['onload']=function(){a5++;};}let a7=function(){let aa=g['createTexture']();g['bindTexture'](g['TEXTURE_CUBE_MAP'],aa),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MIN_FILTER'],g['LINEAR']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MAG_FILTER'],g['LINEAR']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_S'],g['REPEAT']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_T'],g['REPEAT']);for(let ab=0x0;ab<0x6;++ab){g['texImage2D'](v[ab],0x0,g['RGBA'],g['RGBA'],g['UNSIGNED_BYTE'],a6[ab]);}s=aa,c['MeshBlock']['Reset'](),c['Renderer']['Render']();},a8=function(){if(a5<0x6){setTimeout(a8,0xa);return;}a7();};setTimeout(a8,0xa);}function a0(){if(!c['useWebGL2'])return;s!==null&&g['deleteTexture'](s);s=null;let a5=0x0,a6=[new Image()];for(let a9=0x0;a9<0x1;a9++){if(t<0x0&&u['localeCompare']('')!==0x0)a6[a9]['src']=u;else a6[a9]['src']=f['DefaultTexture']['SkyBoxHDR'];a6[a9]['onload']=function(){a5++;};}let a7=function(aa){let ab=g['createTexture']();g['bindTexture'](g['TEXTURE_2D'],ab),g['texImage2D'](g['TEXTURE_2D'],0x0,g['RGBA'],a6[aa]['width'],a6[aa]['height'],0x0,g['RGBA'],g['UNSIGNED_BYTE'],a6[aa]),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_S'],g['REPEAT']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_WRAP_T'],g['REPEAT']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MIN_FILTER'],g['LINEAR']),g['texParameteri'](g['TEXTURE_2D'],g['TEXTURE_MAG_FILTER'],g['LINEAR']);let ac=g['createTexture']();g['bindTexture'](g['TEXTURE_CUBE_MAP'],ac);let ad=0x200,ae=0x200;for(let af=0x0;af<0x6;++af){g['texImage2D'](v[af],0x0,g['RGBA'],ad,ae,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);}g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_S'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_T'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_R'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MIN_FILTER'],g['LINEAR_MIPMAP_LINEAR']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MAG_FILTER'],g['LINEAR']);for(let ag=0x0;ag<0x6;ag++){const ah=g['createRenderbuffer']();g['bindRenderbuffer'](g['RENDERBUFFER'],ah),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],ad,ae);const ai=g['createFramebuffer']();g['bindFramebuffer'](g['FRAMEBUFFER'],ai),g['bindTexture'](g['TEXTURE_CUBE_MAP'],ac),g['framebufferTexture2D'](g['FRAMEBUFFER'],g['COLOR_ATTACHMENT0'],v[ag],ac,0x0),g['framebufferRenderbuffer'](g['FRAMEBUFFER'],g['DEPTH_ATTACHMENT'],g['RENDERBUFFER'],ah);let aj=g['checkFramebufferStatus'](g['FRAMEBUFFER']);g['viewport'](0x0,0x0,ad,ae),g['clearColor'](0x0,0x0,0x0,0x0),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),g['enable'](g['DEPTH_TEST']);const ak=c['Util']['DegToRad'](0x5a);let al=new d['Matrix4'](),am=new d['Matrix4']()['perspective'](ak,0x1,0.01,0xa);al['elements']=am;{let an=new d['Matrix4']();switch(ag){case 0x0:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:an['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}let ao=new d['Matrix4']()['multiplyMatrices'](al,an);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['EQUIRECTANGULARSKYBOX']),c['Shader']['SetMatrix'](ao,undefined),c['Shader']['SetCurrentTexture']('u_Texture8',g['TEXTURE_2D'],ab),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}g['deleteRenderbuffer'](ah),g['bindFramebuffer'](g['FRAMEBUFFER'],null);}g['deleteTexture'](ab),g['bindTexture'](g['TEXTURE_CUBE_MAP'],ac),g['generateMipmap'](g['TEXTURE_CUBE_MAP']),s=ac,c['MeshBlock']['Reset'](),c['Renderer']['Render']();},a8=function(){if(a5<0x1){setTimeout(a8,0xa);return;}a7(0x0);};setTimeout(a8,0xa);}function a1(a5,a6,a7,a8){let a9=new d['Vector3'](-0x1,-0x1,-0x1),aa=new d['Vector3'](0x1,0x1,0x1),ab=[a9['x'],a9['y'],a9['z'],a9['x'],a9['y'],aa['z'],a9['x'],aa['y'],a9['z'],a9['x'],aa['y'],aa['z'],aa['x'],a9['y'],a9['z'],aa['x'],a9['y'],aa['z'],aa['x'],aa['y'],a9['z'],aa['x'],aa['y'],aa['z']],ac=[0x2,0x0,0x3,0x0,0x3,0x1,0x4,0x6,0x5,0x6,0x5,0x7,0x0,0x4,0x1,0x4,0x1,0x5,0x6,0x2,0x7,0x2,0x7,0x3,0x4,0x0,0x6,0x0,0x6,0x2,0x1,0x5,0x3,0x5,0x3,0x7],ad=a7,ae=a8;p[a5]=g['createTexture']();let af=p[a5];g['bindTexture'](g['TEXTURE_CUBE_MAP'],af);for(let ag=0x0;ag<0x6;ag++){g['texImage2D'](v[ag],0x0,g['RGBA'],ad,ae,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);}for(let ah=0x0;ah<0x6;ah++){const ai=g['createRenderbuffer']();g['bindRenderbuffer'](g['RENDERBUFFER'],ai),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],ad,ae);const aj=g['createFramebuffer']();g['bindFramebuffer'](g['FRAMEBUFFER'],aj),g['bindTexture'](g['TEXTURE_CUBE_MAP'],af),g['framebufferTexture2D'](g['FRAMEBUFFER'],g['COLOR_ATTACHMENT0'],v[ah],af,0x0),g['framebufferRenderbuffer'](g['FRAMEBUFFER'],g['DEPTH_ATTACHMENT'],g['RENDERBUFFER'],ai);let ak=g['checkFramebufferStatus'](g['FRAMEBUFFER']);g['viewport'](0x0,0x0,ad,ae),g['clearColor'](0x0,0x0,0x0,0x0),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),g['enable'](g['DEPTH_TEST']);const al=c['Util']['DegToRad'](0x5a);let am=new d['Matrix4'](),an=new d['Matrix4']()['perspective'](al,0x1,0.01,0xa);am['elements']=an;{let ao=new d['Matrix4']();switch(ah){case 0x0:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:ao['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}let ap=new d['Matrix4']()['multiplyMatrices'](am,ao);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT']),c['Shader']['SetMatrix'](ap,undefined);let aq=g['getUniformLocation'](f['currentProgram'],'fRoughness');g['uniform1f'](aq,a6),c['Shader']['SetCurrentTexture']('utexCubeMap',g['TEXTURE_CUBE_MAP'],s),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}g['deleteRenderbuffer'](ai),g['bindFramebuffer'](g['FRAMEBUFFER'],null);}g['bindTexture'](g['TEXTURE_CUBE_MAP'],af),g['generateMipmap'](g['TEXTURE_CUBE_MAP']),g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']),g['bindTexture'](g['TEXTURE_CUBE_MAP'],null);};function a2(a5,a6,a7,a8){let a9=a7,aa=a8,ab=r;for(let ac=0x0;ac<0x6;ac++){const ad=g['createRenderbuffer']();g['bindRenderbuffer'](g['RENDERBUFFER'],ad),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],a9,aa);const ae=g['createFramebuffer']();g['bindFramebuffer'](g['FRAMEBUFFER'],ae),g['bindTexture'](g['TEXTURE_CUBE_MAP'],ab),g['framebufferTexture2D'](g['FRAMEBUFFER'],g['COLOR_ATTACHMENT0'],v[ac],ab,a5),g['framebufferRenderbuffer'](g['FRAMEBUFFER'],g['DEPTH_ATTACHMENT'],g['RENDERBUFFER'],ad);let af=g['checkFramebufferStatus'](g['FRAMEBUFFER']);g['viewport'](0x0,0x0,a9,aa),g['clearColor'](0x1,0x0,0x0,0x1),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),g['enable'](g['DEPTH_TEST']);const ag=c['Util']['DegToRad'](0x5a);let ah=new d['Matrix4'](),ai=new d['Matrix4']()['perspective'](ag,0x1,0.01,0xa);ah['elements']=ai;{let aj=new d['Matrix4']();switch(ac){case 0x0:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:aj['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}let ak=new d['Matrix4']()['multiplyMatrices'](ah,aj);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['PREFILTEREDENVIRONMENT']),c['Shader']['SetMatrix'](ak,undefined);let al=g['getUniformLocation'](f['currentProgram'],'fRoughness');g['uniform1f'](al,a6),c['Shader']['SetCurrentTexture']('utexCubeMap',g['TEXTURE_CUBE_MAP'],s),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}g['deleteRenderbuffer'](ad),g['bindFramebuffer'](g['FRAMEBUFFER'],null);}g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']),g['bindTexture'](g['TEXTURE_CUBE_MAP'],null);};function a3(a5,a6){if(!c['useWebGL2'])return;q!==null&&(g['deleteTexture'](q),q=null);let a7=new d['Vector3'](-0x1,-0x1,-0x1),a8=new d['Vector3'](0x1,0x1,0x1),a9=[a7['x'],a7['y'],a7['z'],a7['x'],a7['y'],a8['z'],a7['x'],a8['y'],a7['z'],a7['x'],a8['y'],a8['z'],a8['x'],a7['y'],a7['z'],a8['x'],a7['y'],a8['z'],a8['x'],a8['y'],a7['z'],a8['x'],a8['y'],a8['z']],aa=[0x3,0x2,0x0,0x0,0x1,0x3,0x7,0x4,0x6,0x4,0x7,0x5,0x0,0x4,0x5,0x5,0x1,0x0,0x2,0x7,0x6,0x7,0x2,0x3,0x0,0x6,0x4,0x6,0x0,0x2,0x1,0x5,0x7,0x7,0x3,0x1],ab=a5,ac=a6;q=g['createTexture']();let ad=q;g['bindTexture'](g['TEXTURE_CUBE_MAP'],ad),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_S'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_T'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_R'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MIN_FILTER'],g['LINEAR_MIPMAP_LINEAR']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MAG_FILTER'],g['LINEAR']),g['bindTexture'](g['TEXTURE_CUBE_MAP'],ad);for(let ae=0x0;ae<0x6;ae++){g['texImage2D'](v[ae],0x0,g['RGBA'],ab,ac,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);}for(let af=0x0;af<0x6;af++){const ag=g['createRenderbuffer']();g['bindRenderbuffer'](g['RENDERBUFFER'],ag),g['renderbufferStorage'](g['RENDERBUFFER'],g['DEPTH_COMPONENT16'],ab,ac);const ah=g['createFramebuffer']();g['bindFramebuffer'](g['FRAMEBUFFER'],ah),g['bindTexture'](g['TEXTURE_CUBE_MAP'],ad),g['framebufferTexture2D'](g['FRAMEBUFFER'],g['COLOR_ATTACHMENT0'],v[af],ad,0x0),g['framebufferRenderbuffer'](g['FRAMEBUFFER'],g['DEPTH_ATTACHMENT'],g['RENDERBUFFER'],ag),g['viewport'](0x0,0x0,ab,ac),g['clearColor'](0x0,0x0,0x0,0x0),g['clear'](g['COLOR_BUFFER_BIT']|g['DEPTH_BUFFER_BIT']),g['enable'](g['DEPTH_TEST']);const ai=c['Util']['DegToRad'](0x5a);let aj=new d['Matrix4'](),ak=new d['Matrix4']()['perspective'](ai,0x1,0.01,0xa);aj['elements']=ak;{let al=new d['Matrix4']();switch(af){case 0x0:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x1:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](-0x1,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0));break;case 0x2:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x1,0x0),new d['Vector3'](0x0,0x0,0x1));break;case 0x3:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,-0x1,0x0),new d['Vector3'](0x0,0x0,-0x1));break;case 0x4:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,0x1),new d['Vector3'](0x0,-0x1,0x0));break;case 0x5:al['lookAt'](new d['Vector3'](0x0,0x0,0x0),new d['Vector3'](0x0,0x0,-0x1),new d['Vector3'](0x0,-0x1,0x0));break;}let am=new d['Matrix4']()['multiplyMatrices'](aj,al);c['Shader']['BeginShader'](d['Enum']['SHADER_TYPES']['IRRADIANCEENVIRONMENT']),c['Shader']['SetMatrix'](am,undefined),c['Shader']['SetCurrentTexture']('utexCubeMap',g['TEXTURE_CUBE_MAP'],s),c['RenderWGL']['Util_RenderCube'](),c['Shader']['EndShader']();}g['deleteRenderbuffer'](ag),g['bindFramebuffer'](g['FRAMEBUFFER'],null);}g['bindTexture'](g['TEXTURE_CUBE_MAP'],ad),g['generateMipmap'](g['TEXTURE_CUBE_MAP']),g['viewport'](0x0,0x0,g['canvas']['width'],g['canvas']['height']),g['bindTexture'](g['TEXTURE_CUBE_MAP'],null);};function a4(){if(t===0x0)Z();else a0();let a5=function(){let a7=0x5,a8=0x80,a9=0x80;r!==null&&(g['deleteTexture'](r),r=null);if(r===null){r=g['createTexture'](),g['bindTexture'](g['TEXTURE_CUBE_MAP'],r);for(let aa=0x0;aa<0x6;aa++){g['texImage2D'](v[aa],0x0,g['RGBA'],a8,a9,0x0,g['RGBA'],g['UNSIGNED_BYTE'],null);}g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_S'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_T'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_WRAP_R'],g['CLAMP_TO_EDGE']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MIN_FILTER'],g['LINEAR_MIPMAP_LINEAR']),g['texParameteri'](g['TEXTURE_CUBE_MAP'],g['TEXTURE_MAG_FILTER'],g['LINEAR']),g['generateMipmap'](g['TEXTURE_CUBE_MAP']);}for(let ab=0x0;ab<a7;ab++){let ac=a8,ad=a9,ae=ab/(a7-0x1);if(!c['useWebGL2'])continue;ac=ac*Math['pow'](0.5,ab),ad=ad*Math['pow'](0.5,ab),a2(ab,ae,ac,ad);}a3(0x20,0x20);},a6=function(){if(s===null){setTimeout(a6,0xa);return;}a5();};setTimeout(a6,0xa);};this['CopyFBColorBuffer']=function(a5,a6){if(!c['useWebGL2'])return;let a7=j['get'](a5);if(a7===undefined)return;let a8=j['get'](a6);if(a8===undefined)return;g['bindFramebuffer'](g['DRAW_FRAMEBUFFER'],a7['framebufferID']),g['bindFramebuffer'](g['READ_FRAMEBUFFER'],a8['framebufferID']),g['blitFramebuffer'](0x0,0x0,a8['width'],a8['height'],0x0,0x0,a7['width'],a7['height'],g['COLOR_BUFFER_BIT'],g['NEAREST']),g['bindFramebuffer'](g['READ_FRAMEBUFFER'],null),g['bindFramebuffer'](g['DRAW_FRAMEBUFFER'],null);},this['CopyFBDepthBuffer']=function(a5,a6){if(!c['useWebGL2'])return;let a7=j['get'](a5);if(a7===undefined)return;let a8=j['get'](a6);if(a8===undefined)return;g['bindFramebuffer'](g['DRAW_FRAMEBUFFER'],a7['framebufferID']),g['bindFramebuffer'](g['READ_FRAMEBUFFER'],a8['framebufferID']),g['blitFramebuffer'](0x0,0x0,a8['width'],a8['height'],0x0,0x0,a7['width'],a7['height'],g['DEPTH_BUFFER_BIT'],g['NEAREST']),g['bindFramebuffer'](g['READ_FRAMEBUFFER'],null),g['bindFramebuffer'](g['DRAW_FRAMEBUFFER'],null);},this['HasObjectMatrix']=function(a5){return A['has'](a5);},this['SetObjectMatrixIndex']=function(a5,a6){A['has'](a5)&&A['set'](a5,a6);},this['GetObjectMatrixIndex']=function(a5){if(A['has'](a5))return A['get'](a5);return 0x0;},this['GetUseUpdateMatrixManager']=function(){return x;},this['SetUseUpdateMatrixManager']=function(a5){if(x===a5)return;x=a5,f['UpdateShader']();},this['AddUpdateMatrixData']=function(a5,a6){let a7=-0x1,a8=-0x1;return a8=f['addUpdateMatrixDataByIndex'](a5),f['changeUpdateMatrixData'](a5,a8,a6),a8;},this['AddUpdateMatrixDataByIndex']=function(a5){let a6=new d['Matrix4'](),a7=[],a8=![];if(a5!==undefined)y['has'](a5)&&(a7=y['get'](a5),a8=!![]);else z!==undefined&&(y['has'](z)&&(a7=y['get'](z),a8=!![]));if(a8)a7['push'](a6);else{if(a5===undefined){if(y['size']===0x0){let aa=c['Data']['UUIDv4']();z=aa,y['set'](aa,a7);let ab=new d['Matrix4']();a7['push'](ab),a7['push'](a6);}else a7=y['get'](z);}else{let ac=a5;y['set'](ac,a7);let ad=new d['Matrix4']();a7['push'](ad),a7['push'](a6);}}let a9=a7['length']-0x1;return a9;},this['GetUpdateMatrixDataByIndex']=function(a5,a6){if(y['has'](a5)){let a7=y['get'](a5);return a7[a6];}else{if(z!==undefined){if(y['has'](z)){let a8=y['get'](z);return a8[a6];}}}return 0x0;},this['GetUpdateMatrixData']=function(a5){if(y['has'](a5)){let a6=y['get'](a5);return a6;}else{if(z!==undefined){if(y['has'](z)){let a7=y['get'](z);return a7;}}}return[];},this['ChangeUpdateMatrixData']=function(a5,a6,a7){if(y['has'](a5)===![]){let a9=f['addUpdateMatrixDataByIndex'](a5);return f['removeUpdateMatrixData'](a5,a9),f['changeUpdateMatrixData'](a5,a6,a7);}let a8=y['get'](a5);if(a6>=a8['length'])return f['addUpdateMatrixData'](a5,a7);try{a8[a6]['copy'](a7);}catch(aa){console['log']('changeUpdateMatrixData\x20error');}return a6;},this['ClearUpdateMatrixData']=function(){y['clear']();},this['RemoveUpdateMatrixData']=function(a5,a6){if(y['has'](a5)){let a7=y['get'](a5);a7['splice'](a6,0x1);}},this['GetUpdateMatrixGroup']=function(a5){let a6=Math['floor'](a5/C);return a6;},this['SetUpdateModelMatrixData']=function(a5,a6){if(f['currentProgram']===undefined)return;if(f['updateMatrixAttributeLocation']<0x0)return;if(!x)return;g['disableVertexAttribArray'](f['updateMatrixAttributeLocation']);let a7=g['getUniformLocation'](f['currentProgram'],'ubUseMatrixDatas');g['uniform1i'](a7,![]);if(a6===-0x1)return;let a8=f['GetUpdateMatrixGroup'](a6),a9=g['getUniformLocation'](f['currentProgram'],'vMatrixDatas');g['uniform1i'](a7,!![]),g['enableVertexAttribArray'](f['updateMatrixAttributeLocation']);if(a9!==null){if(E!==a8||(F===undefined||F!==a5)){let aa=C*0x4;if(D===undefined)D=new Float32Array(aa);E=a8;let ab=a8*C,ac=(a8+0x1)*C,ad=0x0,ae=f['GetUpdateMatrixData'](a5),af=ae['length'];for(let ag=ab;ag<ac;ag++){if(ag<af)for(let ah=0x0;ah<0x10;ah++){D[ad]=ae[ag]['elements'][ah],ad++;}else break;}for(let ai=ad;ai<aa;ai++){D[ai]=0x0;}F=a5;}g['uniform4fv'](a9,D);}},this['SetUpdateCurrentMatrixData']=function(a5){if(f['currentProgram']===undefined)return;let a6=g['getUniformLocation'](f['currentProgram'],'ubUseMatrixDatas');if(a6===null)return;g['uniform1i'](a6,![]);if(a5===undefined)return;let a7=g['getUniformLocation'](f['currentProgram'],'vMatrixDatas');g['uniform1i'](a6,!![]);if(a7!==null){let a8=C*0x4,a9=0x0,aa=new Float32Array(a8),ab=a5['length'];for(let ac=0x0;ac<ab;ac++){if(ac<ab)for(let ad=0x0;ad<0x10;ad++){aa[a9]=a5[ac]['elements'][ad],a9++;}else break;}for(let ae=a9;ae<a8;ae++){aa[ae]=0x0;}g['uniform4fv'](a7,aa);}},this['SetGLLight']=function(a5){if(f['currentProgram']===undefined)return;let a6=new d['Vector3']()['copy'](O),a7=c['Data']['GetBBox'](),a8=a7['radius'],a9=new d['Vector3']()['copy'](a6)['multiplyScalar'](a8*-0x12c),aa=new d['Vector3']()['copy'](c['Camera']['cameraPosition']);if(c['Camera']['perspectiveView']===![])aa=new d['Vector3'](0x0,0x0,a8*0xa);if(a5===undefined)a5=![];if(a5&&f['ViewLightAsRotate']===![]){let aj=new d['Matrix4']()['copy'](c['Camera']['matMV']),ak=new d['Matrix4']()['getInverse'](aj),al=new d['Vector3']()['copy'](a9);al['applyMatrix4'](new d['Matrix4']()['copy'](aj)),a9=al;}let ab=g['getUniformLocation'](f['currentProgram'],'vDirectionalLightPos'),ac=g['getUniformLocation'](f['currentProgram'],'vDirectionalLightColor'),ad=g['getUniformLocation'](f['currentProgram'],'vLightPos'),ae=g['getUniformLocation'](f['currentProgram'],'vEyePos'),af=g['getUniformLocation'](f['currentProgram'],'vLightColor'),ag=g['getUniformLocation'](f['currentProgram'],'vAmbientColor'),ah=g['getUniformLocation'](f['currentProgram'],'vSpecColor'),ai=g['getUniformLocation'](f['currentProgram'],'fShininess');if(f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PBR'])||f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])){let am=new d['Color']()['copy'](M),an=new d['Color'](0xff,0xff,0xff,0xff),ao=0.5,ap=am['glColor'](),aq=an['glColor']();g['uniform3f'](ag,ap['r'],ap['g'],ap['b']),g['uniform3f'](ah,aq['r'],aq['g'],aq['b']),g['uniform1f'](ai,ao);{let av=P['glColor']();g['uniform3f'](ac,av['r'],av['g'],av['b']),g['uniform3f'](ab,a9['x'],a9['y'],a9['z']);}let ar=new Float32Array(0x4*0x3),as=0x0;for(let aw=0x0;aw<S['length'];aw++){let ax=S[aw]['Color']['glColor']();ar[as]=ax['r']*S[aw]['Power'],as++,ar[as]=ax['g']*S[aw]['Power'],as++,ar[as]=ax['b']*S[aw]['Power'],as++;}g['uniform3fv'](af,ar);let at=new Float32Array(0x4*0x3);as=0x0;for(let ay=0x0;ay<S['length'];ay++){at[as]=S[ay]['Position']['x'],as++,at[as]=S[ay]['Position']['y'],as++,at[as]=S[ay]['Position']['z'],as++;}g['uniform3fv'](ad,at);let au=g['getUniformLocation'](f['currentProgram'],'uLightNum');g['uniform1i'](au,S['length']);}else{if(f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONG'])||f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONGUTIL'])){let az=new d['Color']()['copy'](N),aA=new d['Color'](0xff,0xff,0xea,0xff),aB=0.5,aC=P['glColor'](),aD=az['glColor'](),aE=aA['glColor']();g['uniform3f'](ag,aD['r'],aD['g'],aD['b']),g['uniform3f'](ah,aE['r'],aE['g'],aE['b']),g['uniform1f'](ai,aB),g['uniform3f'](ac,aC['r'],aC['g'],aC['b']),g['uniform3f'](ab,a9['x'],a9['y'],a9['z']);}}g['uniform3f'](ae,aa['x'],aa['y'],aa['z']);},this['SetGLDefaultLight']=function(){if(f['currentProgram']===undefined)return;let a5=new d['Vector3']()['copy'](Q),a6=c['Data']['GetBBox'](),a7=a6['radius'],a8=new d['Vector3']()['copy'](a5)['multiplyScalar'](a7*-0x12c),a9=new d['Vector3']()['copy'](c['Camera']['cameraPosition']);if(c['Camera']['perspectiveView']===![])a9=new d['Vector3'](0x0,0x0,a7*0xa);let aa=g['getUniformLocation'](f['currentProgram'],'vDirectionalLightPos'),ab=g['getUniformLocation'](f['currentProgram'],'vDirectionalLightColor'),ac=g['getUniformLocation'](f['currentProgram'],'vLightPos'),ad=g['getUniformLocation'](f['currentProgram'],'vEyePos'),ae=g['getUniformLocation'](f['currentProgram'],'vLightColor'),af=g['getUniformLocation'](f['currentProgram'],'vAmbientColor'),ag=g['getUniformLocation'](f['currentProgram'],'vSpecColor'),ah=g['getUniformLocation'](f['currentProgram'],'fShininess');if(f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PBR'])||f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['ANIMATIONPBR'])){let ai=new d['Color'](0xb4,0xb4,0xb4,0xff),aj=new d['Color'](0xff,0xff,0xff,0xff),ak=0.5,al=ai['glColor'](),am=aj['glColor']();g['uniform3f'](af,al['r'],al['g'],al['b']),g['uniform3f'](ag,am['r'],am['g'],am['b']),g['uniform1f'](ah,ak);{let ar=R['glColor']();g['uniform3f'](ab,ar['r'],ar['g'],ar['b']),g['uniform3f'](aa,a8['x'],a8['y'],a8['z']);}let an=new Float32Array(0x4*0x3),ao=0x0;for(let as=0x0;as<S['length'];as++){let at=S[as]['Color']['glColor']();an[ao]=at['r']*S[as]['Power'],ao++,an[ao]=at['g']*S[as]['Power'],ao++,an[ao]=at['b']*S[as]['Power'],ao++;}g['uniform3fv'](ae,an);let ap=new Float32Array(0x4*0x3);ao=0x0;for(let au=0x0;au<S['length'];au++){ap[ao]=S[au]['Position']['x'],ao++,ap[ao]=S[au]['Position']['y'],ao++,ap[ao]=S[au]['Position']['z'],ao++;}g['uniform3fv'](ac,ap);let aq=g['getUniformLocation'](f['currentProgram'],'uLightNum');g['uniform1i'](aq,S['length']);}else{if(f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONG'])||f['currentProgram']===h['get'](d['Enum']['SHADER_TYPES']['PHONGUTIL'])){let av=new d['Color'](0x50,0x50,0x50,0xff),aw=new d['Color'](0xff,0xff,0xea,0xff),ax=0.5,ay=R['glColor'](),az=av['glColor'](),aA=aw['glColor']();g['uniform3f'](af,az['r'],az['g'],az['b']),g['uniform3f'](ag,aA['r'],aA['g'],aA['b']),g['uniform1f'](ah,ax),g['uniform3f'](ab,ay['r'],ay['g'],ay['b']),g['uniform3f'](aa,a8['x'],a8['y'],a8['z']);}}g['uniform3f'](ad,a9['x'],a9['y'],a9['z']);},this['GetLightDirection']=function(){return O;},this['SetLightDirection']=function(a5){O['copy'](a5)['normalize']();},this['SetLightTime']=function(a5){let a6=a5;a6=Math['max'](0x6,a6),a6=Math['min'](0x12,a6);let a7=new d['Vector3']()['copy'](Q);a7['normalize']();let a8=(a6-0xb)*0xe,a9=new d['Matrix4']()['makeRotationY'](a8*Math['PI']/0xb4);a7['applyMatrix4'](a9),a7['normalize'](),f['SetLightDirection'](a7);},this['SetSSAAMultiplier']=function(a5){m=a5;let a6=function(a7){let a8=j['get'](a7);if(a8===undefined)return;a8['multiplier']=a5,T(g['canvas']['width'],g['canvas']['height'],a8);};a6(d['Enum']['FB_RENDER_TYPES']['MAIN']),a6(d['Enum']['FB_RENDER_TYPES']['UI']),a6(d['Enum']['FB_RENDER_TYPES']['CUSTOMSAMPLING']);},this['Resize']=function(){for(let a5=0x0;a5<k['length'];a5++){j=k[a5],U(g['canvas']);}j=k[0x0];};};export default Shader;