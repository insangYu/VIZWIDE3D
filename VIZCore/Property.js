class Property{constructor(a,b){let c=this;this['Visible']=![],this['PropertyFiles']=[],this['PropertyMap']=new Map(),this['PropertyArrayBufferMap']=new Map(),d();function d(){let i=document['createElement']('div');i['id']=a['GetViewID']()+'div_property_container',i['className']='div_property_container';let j=document['createElement']('div');j['id']=a['GetViewID']()+'div_property_header',j['className']='div_property_header',i['appendChild'](j);let k=document['createElement']('div');k['id']=a['GetViewID']()+'ui_property_title',k['className']='ui_property_title',k['innerHTML']='Property',j['appendChild'](k);let l=document['createElement']('div');l['id']=a['GetViewID']()+'div_property_contents',l['className']='div_property_contents',l['innerHTML']='',i['appendChild'](l),a['Container']['appendChild'](i);}function e(l,m){let n=0xf,o=[new b['Vector3'](-0x6278d,0x6cc3,0x5dc),new b['Vector3'](-0x603a9,0x6ccc,0x5dc),new b['Vector3'](-0x62681,0x4968,0x5dc),new b['Vector3'](-0x60394,0x497d,0x5dc),new b['Vector3'](-0x603a9,0x6ccc,0x5dc),new b['Vector3'](-0x60394,0x497d,0x5dc),new b['Vector3'](-0x603a9,0x6ccc,0x5dc),new b['Vector3'](-0x5c224,0x6cc3,0x5dc),new b['Vector3'](-0x60394,0x497d,0x5dc),new b['Vector3'](-0x5b0ed,0x4968,0x5dc),new b['Vector3'](-0x5c224,0x6cc3,0x5dc),new b['Vector3'](-0x5c1f5,0x7e95,0x5dc),new b['Vector3'](-0x5c1f5,0x7e95,0x5dc),new b['Vector3'](-0x54115,0x7ec4,0x5dc),new b['Vector3'](-0x5c1f5,0x7e95,0x5dc),new b['Vector3'](-0x5c1f5,0xc57f,0x5dc),new b['Vector3'](-0x5c1f5,0xc57f,0x5dc),new b['Vector3'](-0x60717,0xc57f,0x5dc),new b['Vector3'](-0x5c1f5,0xc57f,0x5dc),new b['Vector3'](-0x56533,0xc57f,0x5dc),new b['Vector3'](-0x54115,0x7ec4,0x5dc),new b['Vector3'](-0x54115,-0x16a3,0x5dc),new b['Vector3'](-0x54115,-0x16a3,0x5dc),new b['Vector3'](-0x4de25,-0x16a3,0x5dc),new b['Vector3'](-0x4de25,-0x16a3,0x5dc),new b['Vector3'](-0x4de25,-0x5aa0,0x5dc),new b['Vector3'](-0x4de25,-0x5aa0,0x5dc),new b['Vector3'](-0x3f3c6,-0x5aa0,0x5dc),new b['Vector3'](-0x3f3c6,-0x5aa0,0x5dc),new b['Vector3'](-0x3f3c6,-0x37f3,0x5dc)],p=[[-0x1,-0x1,-0x1],[-0x1,-0x1,-0x1],[0x0,0x3,-0x1],[0x0,0x2,-0x1],[0x1,0x2,-0x1],[0x3,-0x1,-0x1],[0x5,0x7,-0x1],[0x5,0x6,-0x1],[0x7,-0x1,-0x1],[0x7,-0x1,-0x1],[0x6,-0x1,-0x1],[0xa,-0x1,-0x1],[0xb,-0x1,-0x1],[0xc,-0x1,-0x1],[0xd,-0x1,-0x1]],q=[[0x2,0x3,-0x1],[0x2,0x4,-0x1],[0x1,0x4,-0x1],[0x5,-0x1,-0x1],[-0x1,-0x1,-0x1],[0x6,0x7,-0x1],[0xa,-0x1,-0x1],[0x8,0x9,-0x1],[-0x1,-0x1,-0x1],[-0x1,-0x1,-0x1],[0xb,-0x1,-0x1],[0xc,-0x1,-0x1],[0xd,-0x1,-0x1],[0xe,-0x1,-0x1],[-0x1,-0x1,-0x1]],r=[-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1,-0x1],s=-0x1,u=-0x1,v=new b['Vector3'](0x0,0x0,0x0),w=new b['Vector3'](0x0,0x0,0x0);for(let z=0x0;z<0x2;z++){let A=new b['Vector3']();if(z==0x0)A=new b['Vector3']()['copy'](l);else A=new b['Vector3']()['copy'](m);let B=-0x1,C=new b['Vector3'](0x0,0x0,0x0),D=0x0;for(let E=0x0;E<n;E++){let F=new b['Vector3']()['copy'](o[E*0x2+0x0]),G=new b['Vector3']()['copy'](o[E*0x2+0x1])['sub'](o[E*0x2+0x0]);G['normalize']();let H=0x0,I=new b['Vector3']()['copy'](o[E*0x2+0x1])['sub'](o[E*0x2+0x0])['dot'](G),J=new b['Vector3']()['copy'](A)['sub'](o[E*0x2+0x0])['dot'](G);if(J>=H&&J<=I){let K=new b['Vector3']()['copy'](A)['sub'](new b['Vector3']()['copy'](G)['multiplyScalar'](J)),L=new b['Vector3']()['copy'](K)['sub'](o[E*0x2+0x0])['length']();(B<0x0||B>=0x0&&L<D)&&(D=L,B=E,C=new b['Vector3']()['copy'](o[E*0x2+0x0])['add'](new b['Vector3']()['copy'](G)['multiplyScalar'](J)));}}for(let M=0x0;M<n*0x2;M++){let N=new b['Vector3']()['copy'](A)['sub'](o[M])['length']();(B<0x0||B>=0x0&&N<D)&&(D=N,B=Math['floor'](M/0x2),C=new b['Vector3']()['copy'](o[M]));}z==0x0?(s=B,v=C):(u=B,w=C);}let x=[],y=0x0;if(s==u)y=0x4,x[0x0]=new b['Vector3']()['copy'](l),x[0x1]=new b['Vector3']()['copy'](v),x[0x2]=new b['Vector3']()['copy'](w),x[0x3]=new b['Vector3']()['copy'](m);else{let O=s;r[O]=0x0;let P=0x0,Q=![];while(!Q){for(let R=0x0;R<n;R++){if(r[R]>=0x0)continue;for(let S=0x0;S<0x3;S++){if(p[R][S]<0x0)break;if(r[p[R][S]]==P){r[R]=P+0x1;if(R==u){let T=R;y=P+0x5,x[y-0x1]=new b['Vector3']()['copy'](m),x[y-0x2]=new b['Vector3']()['copy'](w),x[0x0]=new b['Vector3']()['copy'](l),x[0x1]=new b['Vector3']()['copy'](v);for(let U=P;U>=0x0;U--){let V=![];for(let W=0x0;W<0x3;W++){if(p[T][W]<0x0)break;if(r[p[T][W]]==U){V=!![],x[y-0x3-(P-U)]=new b['Vector3']()['copy'](o[T*0x2+0x0]),T=p[T][W];break;}}if(!V)for(let X=0x0;X<0x3;X++){if(q[T][X]<0x0)break;if(r[q[T][X]]==U){V=!![],x[y-0x3-(P-U)]=new b['Vector3']()['copy'](o[T*0x2+0x1]),T=q[T][X];break;}}}Q=!![];}}}if(Q)break;for(let Y=0x0;Y<0x3;Y++){if(q[R][Y]<0x0)break;if(r[q[R][Y]]==P){r[R]=P+0x1;if(R==u){let Z=R;y=P+0x5,x[y-0x1]=new b['Vector3']()['copy'](m),x[y-0x2]=new b['Vector3']()['copy'](w),x[0x0]=new b['Vector3']()['copy'](l),x[0x1]=new b['Vector3']()['copy'](v);for(let a0=P;a0>=0x0;a0--){let a1=![];for(let a2=0x0;a2<0x3;a2++){if(p[Z][a2]<0x0)break;if(r[p[Z][a2]]==a0){a1=!![],x[y-0x3-(P-a0)]=new b['Vector3']()['copy'](o[Z*0x2+0x0]),Z=p[Z][a2];break;}}if(!a1)for(let a3=0x0;a3<0x3;a3++){if(q[Z][a3]<0x0)break;if(r[q[Z][a3]]==a0){a1=!![],x[y-0x3-(P-a0)]=new b['Vector3']()['copy'](o[Z*0x2+0x1]),Z=q[Z][a3];break;}}}Q=!![];}}}}P++;}}return x;};this['Show']=function(i){$('#'+a['GetViewID']()+'div_property_container')['length']>0x0&&(c['Visible']=i,i?$('#'+a['GetViewID']()+'div_property_container')['show']():$('#'+a['GetViewID']()+'div_property_container')['hide']());},this['Request']=function(i){if(a['useVIZOn']){let j={'parse':function(m,n){let o='';$['ajax']({'type':'GET','url':m,'async':!![],'success':function(p){o=p;if(o){let q=o['split']('↕'),r=[];for(let s=0x0;s<q['length'];s++){let t=q[s]['split']('§');r['push']({'key':t[0x0],'value':t[0x1]});}n(r);}else{let u=[];n(u);}},'error':function(p,q,r){console['log'](p['status']);}});}},k=a['VIZOnParam']+i,l=j['parse'](k,c['set']);}else{let m=c['GetPropertyByID'](i);if(m!==undefined)c['Set'](m);else c['Clear']();}},this['Set']=function(j){let k=$('#'+a['GetViewID']()+'div_property_container');if(k['length']===0x0)return;let l=document['getElementById'](a['GetViewID']()+'div_property_contents');l['innerHTML']='';let m=document['createElement']('table');m['width']='100%',m['border']='0';for(let n=0x0;n<j['length'];n++){let o=document['createElement']('tr'),p=document['createElement']('td');p['className']='ui_property_key',p['innerHTML']='<label\x20id=\x22upk'+n+'\x22>'+j[n]['key']+'</label>';let q=document['createElement']('td');q['className']='ui_property_value';if(j[n]['value']['includes']('http://')||j[n]['value']['includes']('HTTP://'))q['innerHTML']='<a\x20href=\x22'+j[n]['value']+'\x22\x20target=\x22_blank\x22>'+j[n]['value']+'</a>';else q['innerHTML']='<label\x20id=\x22upv'+n+'\x22>'+j[n]['value']+'</label>';o['appendChild'](p),o['appendChild'](q),m['appendChild'](o);}l['appendChild'](m);},this['Clear']=function(){let i=[];c['Set'](i);},this['Init']=function(){},this['GetKeys']=function(){let j=new Map();if(a['Configuration']['Property']['UseArrayBuffer'])for(let l of c['PropertyMap']['values']()){let m=c['PropertyArrayBufferMap']['get'](l['key']),n=g(l,m);for(let o=0x0;o<n['length'];o++){!j['has'](n[o]['key'])&&j['set'](n[o]['key'],n[o]['key']);}}else for(let p of c['PropertyMap']['values']()){for(let q=0x0;q<p['length'];q++){!j['has'](p[q]['key'])&&j['set'](p[q]['key'],p[q]['key']);}}let k=[];for(let r of j['keys']()){k['push'](r);}return k;},this['GetValues']=function(j){let k=new Map();if(a['Configuration']['Property']['UseArrayBuffer'])for(let m of c['PropertyMap']['values']()){let n=c['PropertyArrayBufferMap']['get'](m['key']),o=g(m,n);for(let p=0x0;p<o['length'];p++){o[p]['key']['localeCompare'](j)===0x0&&(!k['has'](o[p]['value'])&&k['set'](o[p]['value'],o[p]['value']));}}else for(let q of c['PropertyMap']['values']()){for(let r=0x0;r<q['length'];r++){q[r]['key']['localeCompare'](j)===0x0&&(!k['has'](q[r]['value'])&&k['set'](q[r]['value'],q[r]['value']));}}let l=[];for(let s of k['keys']()){l['push'](s);}return l;},this['Add']=function(j,k,l){if(a['Configuration']['Property']['UseArrayBuffer']){for(let m=0x0;m<j['length'];m++){let n=j[m];c['PropertyMap']['set'](n['nodeId'],n);}c['PropertyArrayBufferMap']['set'](k,l);}else{for(let o=0x0;o<j['length'];o++){let p=j[o];c['PropertyMap']['set'](p['nodeId'],p['items']);}c['PropertyArrayBufferMap']['set'](k,l);}},this['SetPropertyByItem']=function(i,j){c['PropertyMap']['set'](i,j);},this['AddProperty']=function(i,j,k){let l=a['Data']['PropertyValueItem'](j,k);c['AddPropertyByItem'](i,[l]);},this['AddPropertyByItem']=function(j,k){if(c['PropertyMap']['has'](j)){let l=c['PropertyMap']['get'](j);for(let m=0x0;m<k['length'];m++){l['push'](k[m]);}}else c['SetPropertyByItem'](j,k);},this['DeletePropertyID']=function(i){c['PropertyMap']['delete'](i);},this['DeletePropertyKeyByID']=function(j,k){if(c['PropertyMap']['has'](j)){let l=c['PropertyMap']['get'](j);for(let m=0x0;m<l['length'];m++){if(l[m]['key']['localeCompare'](k)!==0x0)continue;l['splice'](m,0x1);break;}}};let f=function(i){return decodeURIComponent(escape(i));};function g(i,j){let k=[],l=i['offset'];for(let m=0x0;m<i['nNodeProps'];m++){let n={'key':null,'value':null,'valueType':null},o=j['getUint32'](l,!![]);l+=0x4;let p=new Uint8Array(j['buffer'],j['byteOffset']+l,o);n['key']=String['fromCharCode']['apply'](null,p);try{n['key']=f(n['key']);}catch(r){}l+=o,o=j['getUint16'](l,!![]),l+=0x2,o=j['getUint32'](l,!![]),l+=0x4;let q=new Uint8Array(j['buffer'],j['byteOffset']+l,o);n['value']=String['fromCharCode']['apply'](null,q);try{n['value']=f(n['value']);}catch(s){}l+=o,n['valType']=j['getUint16'](l,!![]),l+=0x2,k[m]=n;}return k;}this['GetPropertyByID']=function(i){if(a['Configuration']['Property']['UseArrayBuffer']){let j=c['PropertyMap']['get'](i);if(j!==undefined){let k=c['PropertyArrayBufferMap']['get'](j['key']),l=g(j,k);return l;}else{if(a['Configuration']['Property']['NavigateToParentNode']){let m=c['GetRecursiveProperty'](i);return m;}}}else{let n=c['PropertyMap']['get'](i);return(n===undefined||n['length']===0x0)&&(a['Configuration']['Property']['NavigateToParentNode']&&(n=c['GetRecursiveProperty'](i))),n;}},this['GetRecursiveProperty']=function(i){let j=a['Tree']['GetNodeInfo'](i);if(j!==undefined){let k=a['Tree']['GetParentNodeInfo'](j);if(k!==undefined){let l=c['GetPropertyByID'](k['node_id']);return l!==undefined&&l['length']>0x0?l:c['GetRecursiveProperty'](k['node_id']);}else return undefined;}else return undefined;},this['GetPropertyValue']=function(j,k){if(a['Configuration']['Property']['UseArrayBuffer']){let l='',m=c['PropertyMap']['get'](j);if(m!==undefined){let n=c['PropertyArrayBufferMap']['get'](m['key']),o=g(m,n);for(let p=0x0;p<o['length'];p++){if(o[p]['key']['localeCompare'](k)===0x0){l=o[p]['value'];break;}}}return l;}else{let q='',r=c['PropertyMap']['get'](j);if(r!==undefined){for(let s=0x0;s<r['length'];s++){let t=r[s];if(t['key']['localeCompare'](k)===0x0){q=t['value'];break;}}return q;}else return'';}},this['GetNodeIDsByKeyValue']=function(i,j){let k=new Map(),l=[],m=function(n,o,p){if(a['Configuration']['Property']['UseArrayBuffer']){let q=c['PropertyArrayBufferMap']['get'](n['key']),r=g(n,q);for(let s=0x0;s<r['length'];s++){if(r[s]['key']['localeCompare'](i)===0x0&&(j===undefined||r[s]['value']['localeCompare'](j)===0x0)){!k['has'](o)&&(k['set'](o,o),l['push'](o));break;}}}else for(let t=0x0;t<n['length'];t++){let u=n[t];if(u['key']['localeCompare'](i)===0x0&&(j===undefined||u['value']['localeCompare'](j)===0x0)){!k['has'](o)&&(k['set'](o,o),l['push'](o));break;}}};return c['PropertyMap']['forEach'](m),l;},this['GetBodyIDsByKeyValue']=function(i,j){let k=new Map(),l=[],m=function(n,o,p){if(a['Configuration']['Property']['UseArrayBuffer']){let q=c['PropertyArrayBufferMap']['get'](n['key']),r=g(n,q);for(let s=0x0;s<r['length'];s++){if(r[s]['key']['localeCompare'](i)===0x0&&(j===undefined||r[s]['value']['localeCompare'](j)===0x0)){let t=a['Tree']['GetBodyId'](o);for(let u=0x0;u<t['length'];u++){!k['has'](t[u])&&(k['set'](t[u],t[u]),l['push'](t[u]));}break;}}}else for(let v=0x0;v<n['length'];v++){let w=n[v];if(w['key']['localeCompare'](i)===0x0&&(j===undefined||w['value']['localeCompare'](j)===0x0)){let x=a['Tree']['GetBodyId'](o);for(let y=0x0;y<x['length'];y++){!k['has'](x[y])&&(k['set'](x[y],x[y]),l['push'](x[y]));}break;}}};return c['PropertyMap']['forEach'](m),l;},this['GetInnerObjectsByProperty']=function(k,l,m,n){let o=[],p=c['GetNodeIDsByKeyValue'](k,l),q=c['GetNodeIDsByKeyValue'](m,n);if(p['length']!==0x0&&q['length']!==0x0)for(let r=0x0;r<p['length'];r++){let s=p[r],t=h(s);if(t['result']===undefined)continue;let u=t['bbox'];for(let v=0x0;v<q['length'];v++){let w=q[v],x=h(w);if(x['result']===undefined)continue;let y=x['bbox'];(y['min']['x']<=u['min']['x']&&(y['max']['x']>=u['min']['x']&&y['max']['x']<=u['max']['x'])||y['min']['x']>=u['min']['x']&&y['min']['x']<=u['max']['x']&&y['max']['x']>=u['max']['x']||y['min']['x']>=u['min']['x']&&y['max']['x']<=u['max']['x']||y['min']['x']<=u['min']['x']&&y['max']['x']>=u['max']['x'])&&(y['min']['y']<=u['min']['y']&&(y['max']['y']>=u['min']['y']&&y['max']['y']<=u['max']['y'])||y['min']['y']>=u['min']['y']&&y['min']['y']<=u['max']['y']&&y['max']['y']>=u['max']['y']||y['min']['y']>=u['min']['y']&&y['max']['y']<=u['max']['y']||y['min']['y']<=u['min']['y']&&y['max']['y']>=u['max']['y'])&&o['push'](w);}}return o;};function h(j){let k={'result':undefined,'bbox':undefined},l=a['Data']['BBox'](),m=a['Data']['GetBody'](j);if(m===undefined)return k;let n=!![];for(let o=0x0;o<m['length'];o++){let p=m[o];n?(l['min']['copy'](p['BBox']['min']),l['max']['copy'](p['BBox']['max']),n=![]):(l['min']['min'](p['BBox']['min']),l['max']['max'](p['BBox']['max']));}return l['center']=new b['Vector3']((l['min']['x']+l['max']['x'])/0x2,(l['min']['y']+l['max']['y'])/0x2,(l['min']['z']+l['max']['z'])/0x2),l['radius']=new b['Vector3']()['copy'](l['max'])['sub'](l['min'])['length'](),k['result']=!![],k['bbox']=l,k;}this['GetInnerObjects']=function(k,l){let m=[],n=c['GetNodeIDsByKeyValue'](k,l);if(n['length']!==0x0)for(let o=0x0;o<n['length'];o++){let p=n[o],q=a['Tree']['GetBBox'](p);for(let r=0x0;r<a['Data']['Objects']['length'];r++){let s=a['Data']['Objects'][r];for(let u=0x0;u<s['tag']['length'];u++){let v=s['tag'][u],w=a['Tree']['GetBBox'](v['bodyId']);(w['min']['x']<q['min']['x']&&(w['max']['x']>q['min']['x']&&w['max']['x']<q['max']['x'])||w['min']['x']>q['min']['x']&&w['min']['x']<q['max']['x']&&w['max']['x']>q['max']['x']||w['min']['x']>q['min']['x']&&w['max']['x']<q['max']['x']||w['min']['x']<q['min']['x']&&w['max']['x']>q['max']['x'])&&(w['min']['y']<q['min']['y']&&(w['max']['y']>q['min']['y']&&w['max']['y']<q['max']['y'])||w['min']['y']>q['min']['y']&&w['min']['y']<q['max']['y']&&w['max']['y']>q['max']['y']||w['min']['y']>q['min']['y']&&w['max']['y']<q['max']['y']||w['min']['y']<q['min']['y']&&w['max']['y']>q['max']['y'])&&m['push'](v['bodyId']);}}}return m;},this['SelectByProperty']=function(i,j){let k=c['GetNodeIDsByKeyValue'](i,j);return a['Tree']['SelectMulti'](k,!![],![]),k;},this['GetBBoxByID']=function(i){return h(i)['bbox'];},this['GetBBoxInfoByID']=function(i){return h(i);},this['DataClear']=function(){c['PropertyMap']['Clear']();};}}export default Property;