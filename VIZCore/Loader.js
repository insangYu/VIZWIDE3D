let Loader=function(a,b){const c={},d={'CTUnknown':0x0,'CTGeneralBinaryBlock':0x1,'CTStructure':0x2,'CTMeshBlock':0x3,'CTClashTestData':0x4,'CTImageData':0x5,'CTImageIdxTable':0x6,'CTMeshBlockTable':0x7,'CTEntityBinaryBlock':0x8,'CTBodyMeshData':0x9,'CTPropDic':0xa,'CTUserDefGroups':0xb,'CTFileMetaData':0xc,'CTAuthority':0xd,'CTNodePropTable':0xe,'CTNodePropTableIndices':0xf,'CTInitialInfo':0x10,'CTUserCustom':0x11,'CTEdgeTable':0x12,'CTThumbnail':0x13,'CTMisc':0x14,'CTStructureHeader':0x15,'CTMeshBlockSub':0x16,'CTStructureNameData':0x18,'CTSplitStructureMeshBlockFile':0x22,'CTSplitAreaMeshBlockList':0x23,'CTTreeInfo':0x26,'CTStructureFileInfoBlock':0x27,'CTMeshFileInfoBlock':0x28,'CTPropertyFileInfoBlock':0x29,'CTMaterialBlock':0x2c,'CTMaterialBlockTable':0x2d,'CTMaterialFileInfoBlock':0x2e},e={'None':0x0,'Split':0xa,'Structure':0x14,'Structure_Tree':0x15,'Property':0x1e,'MeshBlock_New':0x28,'MeshBlock_Update':0x29,'MeshBlock_LOD':0x2a,'Material':0x32,'Header':0x64};let f=this,g=function(){let G={'typeStr':null,'version':null,'sizeTocItem':null,'nToc':null,'tocPos':null};return G;},h=function(){let G={'version':null,'datatype':null,'structure_cnt':null,'mesh_cnt':null,'property_cnt':null,'unit':null,'GUID':null,'material_cnt':null,'tag':{'url':undefined},'compressed':![]};return G;};this['parsetype']=0x0;function i(G){return decodeURIComponent(escape(G));}function j(G,H,I){const J=G['getUint32'](H,I),K=G['getUint32'](H+0x4,I),L=I?J+0x2**0x20*K:0x2**0x20*J+K;if(!Number['isSafeInteger'](L))console['warn'](L,'exceeds\x20MAX_SAFE_INTEGER.\x20Precision\x20may\x20be\x20lost');return L;}function k(G){let H='',I={'dom':/(http(s)?:\/\/|www.)([a-z0-9\w]+\.*)+[a-z0-9]{2,4}\//gi,'par':/(http(s)?:\/\/|www.)([a-z0-9\w]+\.*)+[a-z0-9]{2,4}([\/a-z0-9-%#?&=\w])+(\.[a-z0-9]{2,4}(\?[\/a-z0-9-%#?&=\w]+)*)*/gi};G['replace'](I['dom'],function(M){H=M;});let J=G['replace'](I['dom'],''),K=encodeURIComponent(J),L=H+K;return L;}function l(G,H,I,J,K){$['ajax']({'complete':function(){if(I!==undefined)I(0x0,0x1);},'url':G['Url'],'type':'GET','beforeSend':function(){if(I!==undefined)I(0x2,0x0,0x0,0x0);},'xhr':function(){let L=this,M=$['ajaxSettings']['xhr']();return M['responseType']='arraybuffer',M['onprogress']=function(N){if(I!==undefined){let O=N['loaded']/N['total'];I(0x2,O,N['loaded'],N['total']);}},M['addEventListener']('load',function(){let N=$()['jquery'],O=N['split']('.'),P=O[0x0]*0x1,Q=O[0x1]*0x1;if(P<=0x2&&Q<0x2)L['success'](M['response']);}),M;},'responseType':'arraybuffer','processData':![],'async':!![],'success':function(L){let M=new Date();if(G['Header']!==undefined&&G['Header']['compressed']){let N=function(O,P){let Q=new Uint8Array(O),R=a['Zstd']['decompress'](Q);O=R['buffer'],P(O,G);};K!==undefined?(setTimeout(N(L,J),0x1),K(undefined,G)):N(L,J);}else{let O=new Date(),P=O['getTime']()-M['getTime']();K!==undefined&&K(undefined,G),J(L,G);}L=null;},'error':function(L,M,N){K!==undefined&&(setTimeout(J(undefined,G),0x1),K(undefined,G));}});}function m(G,H,I,J){let K=H,L=I;var M=G['Url'],N=new XMLHttpRequest();N['open']('GET',M),N['responseType']='json',N['send'](),N['onload']=function(){let O=N['response'];K!==undefined&&K(O);};}function n(G,H,I){let J=[];for(let K=0x0;K<G;K++){let L=H['tocPos']+0xc+K*H['sizeTocItem'],M=I['getInt32'](L,!![]);L+=0x8;let N=j(I,L,!![]);L+=0x8;let O=I['getUint32'](L,!![]);L+=0x4;let P=I['getUint32'](L,!![]);L+=0x4;let Q=0x0;f['parsetype']===0x1&&(Q=I['getUint32'](L,!![]),L+=0x4);let R={'itemType':M,'position':N,'datasize':O,'uncompsize':P,'parsetype':Q};J['push'](R);}return J;}function o(G,H){let I=-0x1;for(let J=H['length']-0x1;J>=0x0;J--){if(H[J]['itemType']===G){I=J;break;}}return I;}function p(G){if(G['DataType']===e['None']||G['DataType']===e['MeshBlock_New'])return!![];else return![];}function q(G,H){try{if(G===undefined)return undefined;let I=G['position'],J;return H===undefined?J:(J=new DataView(H,I,G['datasize']),J);}catch(K){return undefined;}}function r(G,H){let I=0x0,J;J=G['getInt32'](I,!![]),I+=0x4;let K=0x0;for(let L=0x0;L<J;L++){let M=new b['Color']();M['r']=G['getUint8'](I,!![]),M['g']=G['getUint8'](I+0x1,!![]),M['b']=G['getUint8'](I+0x2,!![]),M['a']=G['getUint8'](I+0x3,!![]),I+=0x4;let N=G['getUint32'](I,!![]);I+=0x4;let O=G['getUint32'](I,!![]);I+=0x4;let P=G['getUint32'](I,!![]);I+=0x4;if(f['parsetype']===0x1){let Z=G['getUint32'](I,!![]);I+=0x4;}let Q=N/0xf,R=new Float32Array(G['buffer'],I+G['byteOffset'],N);I+=N*0x4;let S=new Float32Array(G['buffer'],I+G['byteOffset'],O);I+=O*0x4;let T=new Uint32Array(G['buffer'],I+G['byteOffset'],P);I+=P*0x4;let U=G['getUint32'](I,!![]);I+=0x4;let V=[],W=[],X=0x0,Y;for(let a0=0x0;a0<U;a0++){let a1=G['getUint32'](I,!![]);I+=0x4;let a2=G['getUint32'](I,!![]);I+=0x4,a1=a1+a['Data']['GetStartID'](H['Key']),a2=a2+a['Data']['GetStartID'](H['Key']);let a3=G['getUint32'](I,!![]);I+=0x4;let a4=G['getUint32'](I,!![]);I+=0x4;let a5=G['getUint16'](I,!![]);I+=0x2;let a6=G['getUint16'](I,!![]);I+=0x2;let a7=new Float32Array(G['buffer'],I+G['byteOffset'],0x6);I+=0x18;let a8={'partId':a1,'bodyId':a2,'color':M,'m_vnIdx':a3*0x3,'m_triIdx':a4*0x3,'m_nVtx':a5*0x3,'m_nTris':a6*0x3,'BBox':a['Data']['BBox'](a7),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':null};a['Data']['ObjectMap']['has'](H['Url'])?Y=a['Data']['ObjectMap']['get'](H['Url'])[K]:Y=a['Data']['Object3D']();{a['Data']['IDColor']['new'](),a8['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let a9=a8['m_nVtx']/0x3*0x4;for(let aa=0x0;aa<a9;aa=aa+0x4){W[X+aa+0x0]=a['Data']['IDColor']['r'],W[X+aa+0x1]=a['Data']['IDColor']['g'],W[X+aa+0x2]=a['Data']['IDColor']['b'],W[X+aa+0x3]=a['Data']['IDColor']['a'];}X+=a9,V['push'](a8);}}Y['index']=K,Y['attribs']['a_index']['array']=T,Y['numElements']=Y['attribs']['a_index']['array']['length'],Y['attribs']['a_position']['array']=R,Y['attribs']['a_normal']['array']=S;if(!a['Data']['ObjectMap']['has'](H['Url'])){for(let ab=0x0;ab<V['length'];ab++){V[ab]['object']=Y,a['Data']['AddBody'](V[ab]);}Y['attribs']['a_color']['array']=new Uint8Array(W,0x0,X),a['Data']['Objects']['push'](Y),Y['tag']=V,Y['flag']['lod']=H['DataType'],Y['link']=H['Url'];}if(H['DataType']===e['MeshBlock_LOD']){let ac=a['Data']['LODMap']['get'](H['Url']);ac===undefined?(ac=[],ac['push'](Y),a['Data']['LODMap']['set'](H['Url'],ac)):(ac['push'](Y),a['Data']['LODMap']['set'](H['Url'],ac));if(a['DataSplit']!==0x0){let ad=a['Data']['ObjectMap']['get'](H['Url']);ad===undefined?(ad=[],ad['push'](Y),a['Data']['ObjectMap']['set'](H['Url'],ad)):(ad['push'](Y),a['Data']['ObjectMap']['set'](H['Url'],ad));}}else{if(a['DataSplit']!==0x0){let ae=a['Data']['ObjectMap']['get'](H['Url']);ae===undefined?(ae=[],ae['push'](Y),a['Data']['ObjectMap']['set'](H['Url'],ae)):(ae['push'](Y),a['Data']['ObjectMap']['set'](H['Url'],ae));}}K++;}}function s(G,H){let I=0x0,J;J=G['getInt32'](I,!![]),I+=0x4;let K=0x0,L=!![];a['Data']['ObjectMap']['has'](H['Url'])&&(L=![]);let M=![];if(H['headerVersion']!==undefined&&H['headerVersion']>=0x10011){}for(let N=0x0;N<J;N++){let O=![];if(H['headerVersion']!==undefined&&H['headerVersion']>=0x10011){let a5=G['getInt32'](I,!![]);if(a5===0x1)O=!![];I+=0x4;}let P=-0x1,Q=new b['Color']();if(O){Q['set'](0xff,0xff,0xff,0xff);let a6=G['getUint8'](I,!![]),a7=G['getUint8'](I+0x1,!![]),a8=G['getUint8'](I+0x2,!![]),a9=G['getUint8'](I+0x3,!![]);P=a9+(a8<<0x8)+(a7<<0x10)+a6*0x1000000;}else Q['r']=G['getUint8'](I,!![]),Q['g']=G['getUint8'](I+0x1,!![]),Q['b']=G['getUint8'](I+0x2,!![]),Q['a']=G['getUint8'](I+0x3,!![]);I+=0x4;let R=G['getUint32'](I,!![]);I+=0x4;let S=G['getUint32'](I,!![]);I+=0x4;let T=G['getUint32'](I,!![]);I+=0x4;let U=0x0;M&&(U=G['getUint32'](I,!![]),I+=0x4);if(f['parsetype']===0x1){let aa=G['getUint32'](I,!![]);I+=0x4;}let V=R/0xf,W=new Float32Array(G['buffer'],I+G['byteOffset'],R);I+=R*0x4;let X=new Float32Array(G['buffer'],I+G['byteOffset'],S);I+=S*0x4;let Y=new Uint32Array(G['buffer'],I+G['byteOffset'],T);I+=T*0x4;let Z;U>0x0&&(Z=new Float32Array(G['buffer'],I+G['byteOffset'],U),I+=U*0x4);let a0=G['getUint32'](I,!![]);I+=0x4;let a1=[],a2=[],a3=0x0,a4;if(!L){a4=a['Data']['ObjectMap']['get'](H['Url'])[K];if(H['CacheData']===undefined||!H['CacheData'])a4['flag']['updateProcess']=!![];}else a4=a['Data']['Object3D']();a4['id_file']=H['Key'];if(L){if(P>=0x0){let ab=a['Material']['GetMaterialBySrcID'](H['Key'],P);if(ab!==undefined)for(let ac=0x0;ac<ab['textureData']['length'];ac++){if(ab['textureData'][ac]['downloading']===![])continue;ab=undefined;break;}ab!==undefined?P=ab['id']:(a['Material']['AddLoadingMaterial'](H['Key'],P,H['Url'],K),P=-0x1);}for(let ad=0x0;ad<a0;ad++){let ae=G['getUint32'](I,!![]);I+=0x4;let af=G['getUint32'](I,!![]);I+=0x4,ae=ae+a['Data']['GetStartID'](H['Key']),af=af+a['Data']['GetStartID'](H['Key']);let ag=G['getUint32'](I,!![]);I+=0x4;let ah=G['getUint32'](I,!![]);I+=0x4;let ai=0x0;M&&(ai=G['getUint32'](I,!![]),I+=0x4);let aj=G['getUint16'](I,!![]);I+=0x2;let ak=G['getUint16'](I,!![]);I+=0x2;let al=0x0;M&&(al=G['getUint32'](I,!![]),I+=0x4);let am=new Float32Array(G['buffer'],I+G['byteOffset'],0x6);I+=0x18;let an;a['UV_DEBUG']?an={'partId':ae,'bodyId':af,'color':Q,'m_vnIdx':ag*0x3,'m_triIdx':ah*0x3,'m_uvIdx':ai*0x2,'m_nVtx':aj*0x3,'m_nTris':ak*0x3,'m_nUV':al*0x2,'BBox':a['Data']['BBox'](am),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':null}:an={'partId':ae,'bodyId':af,'color':Q,'m_vnIdx':ag*0x3,'m_triIdx':ah*0x3,'m_nVtx':aj*0x3,'m_nTris':ak*0x3,'BBox':a['Data']['BBox'](am),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':null};an['action']['material']=P;if(a['useTree']){let ao=a['Tree']['GetNode'](an['bodyId']);ao!==undefined&&(an['action']['visible']=ao['visible'],an['action']['selection']=ao['selection'],ao['color']!==undefined&&(an['action']['customColor']=!![],an['action']['color']=new b['Color']()['copy'](ao['color'])),ao['transform']!==undefined&&an['action']['transform']['copy'](ao['transform']));}{a['Data']['IDColor']['new'](),an['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let ap=an['m_nVtx']/0x3*0x4;for(let aq=0x0;aq<ap;aq=aq+0x4){a2[a3+aq+0x0]=a['Data']['IDColor']['r'],a2[a3+aq+0x1]=a['Data']['IDColor']['g'],a2[a3+aq+0x2]=a['Data']['IDColor']['b'],a2[a3+aq+0x3]=a['Data']['IDColor']['a'];}a3+=ap,a1['push'](an);}}{for(let ar=0x0;ar<a1['length'];ar++){a1[ar]['object']=a4,a['Data']['AddBody'](a1[ar]);}a4['attribs']['a_color']['array']=new Uint8Array(a2,0x0,a3),a['Data']['Objects']['push'](a4),a4['tag']=a1,a4['flag']['lod']=H['DataType'],a4['link']=H['Url'];}}else{for(let as=0x0;as<a0;as++){I+=0x4,I+=0x4,I+=0x4,I+=0x4;M&&(I+=0x4);I+=0x2,I+=0x2;M&&(I+=0x4);I+=0x18;let at=a4['tag'][as];{let au,av,aw,ax;au=at['colorIdx']&0x100-0x1,av=(at['colorIdx']&0x100*0x100-0x1)>>0x8,aw=(at['colorIdx']&0x100*0x100*0x100-0x1)>>0x10,ax=(at['colorIdx']&0x100*0x100*0x100*0x100-0x1)>>0x18;let ay=at['m_nVtx']/0x3*0x4;for(let az=0x0;az<ay;az=az+0x4){a2[a3+az+0x0]=au,a2[a3+az+0x1]=av,a2[a3+az+0x2]=aw,a2[a3+az+0x3]=ax;}a3+=ay;}}a4['attribs']['a_color']['array']=new Uint8Array(a2,0x0,a3);}a4['index']=K,a4['link']=H['Url'],a4['attribs']['a_index']['array']=Y,a4['numElements']=a4['attribs']['a_index']['array']['length'],a4['attribs']['a_position']['array']=W,a4['attribs']['a_normal']['array']=X;U>0x0&&a['UV_DEBUG']&&(a4['attribs']['a_uv']['array']=Z);if(L){let aA=a['Data']['ObjectMap']['get'](H['Url']);aA===undefined?(aA=[],aA['push'](a4),a['Data']['ObjectMap']['set'](H['Url'],aA)):(aA['push'](a4),a['Data']['ObjectMap']['set'](H['Url'],aA));}K++;}}function t(G,H){let I=0x0,J;J=G['getInt32'](I,!![]),I+=0x4;let K=0x0;for(let L=0x0;L<J;L++){let M=![];if(H['headerVersion']!==undefined&&H['headerVersion']>=0x10011){let a1=G['getInt32'](I,!![]);if(a1===0x1)M=!![];I+=0x4;}if(M){color['set'](0xff,0xff,0xff,0xff);let a2=G['getUint8'](I,!![]),a3=G['getUint8'](I+0x1,!![]),a4=G['getUint8'](I+0x2,!![]),a5=G['getUint8'](I+0x3,!![]);materialID=a5+(a4<<0x8)+(a3<<0x10)+a2*0x1000000;}else color['r']=G['getUint8'](I,!![]),color['g']=G['getUint8'](I+0x1,!![]),color['b']=G['getUint8'](I+0x2,!![]),color['a']=G['getUint8'](I+0x3,!![]);I+=0x4;let N=G['getUint32'](I,!![]);I+=0x4;let O=G['getUint32'](I,!![]);I+=0x4;let P=G['getUint32'](I,!![]);I+=0x4;let Q=0x0;readUV&&(Q=G['getUint32'](I,!![]),I+=0x4);if(f['parsetype']===0x1){let a6=G['getUint32'](I,!![]);I+=0x4;}let R=N/0xf,S=new Float32Array(G['buffer'],I+G['byteOffset'],N);I+=N*0x4;let T=new Float32Array(G['buffer'],I+G['byteOffset'],O);I+=O*0x4;let U=new Uint32Array(G['buffer'],I+G['byteOffset'],P);I+=P*0x4;let V;Q>0x0&&(V=new Float32Array(G['buffer'],I+G['byteOffset'],Q),I+=Q*0x4);let W=G['getUint32'](I,!![]);I+=0x4;let X=[],Y=[],Z=0x0,a0;for(let a7=0x0;a7<W;a7++){let a8=G['getUint32'](I,!![]);I+=0x4;let a9=G['getUint32'](I,!![]);I+=0x4,a8=a8+a['Data']['GetStartID'](H['Key']),a9=a9+a['Data']['GetStartID'](H['Key']);let aa=G['getUint32'](I,!![]);I+=0x4;let ab=G['getUint32'](I,!![]);I+=0x4;let ac=0x0;readUV&&(ac=G['getUint32'](I,!![]),I+=0x4);let ad=G['getUint16'](I,!![]);I+=0x2;let ae=G['getUint16'](I,!![]);I+=0x2;let af=0x0;readUV&&(af=G['getUint32'](I,!![]),I+=0x4);let ag=new Float32Array(G['buffer'],I+G['byteOffset'],0x6);I+=0x18;let ah;a['UV_DEBUG']?ah={'partId':a8,'bodyId':a9,'color':color,'m_vnIdx':aa*0x3,'m_triIdx':ab*0x3,'m_uvIdx':ac*0x2,'m_nVtx':ad*0x3,'m_nTris':ae*0x3,'m_nUV':af*0x2,'BBox':a['Data']['BBox'](ag),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':null}:ah={'partId':a8,'bodyId':a9,'color':color,'m_vnIdx':aa*0x3,'m_triIdx':ab*0x3,'m_nVtx':ad*0x3,'m_nTris':ae*0x3,'BBox':a['Data']['BBox'](ag),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':null};if(a['useTree']){let ai=a['Tree']['GetNode'](ah['bodyId']);ai!==undefined&&(ah['action']['visible']=ai['visible'],ah['action']['selection']=ai['selection']);}a0=a['Data']['Object3D']();{a['Data']['IDColor']['new'](),ah['colorIdx']=a['Data']['IDColor']['r']+(a['Data']['IDColor']['g']<<0x8)+(a['Data']['IDColor']['b']<<0x10)+a['Data']['IDColor']['a']*0x1000000;let aj=ah['m_nVtx']/0x3*0x4;for(let ak=0x0;ak<aj;ak=ak+0x4){Y[Z+ak+0x0]=a['Data']['IDColor']['r'],Y[Z+ak+0x1]=a['Data']['IDColor']['g'],Y[Z+ak+0x2]=a['Data']['IDColor']['b'],Y[Z+ak+0x3]=a['Data']['IDColor']['a'];}Z+=aj,X['push'](ah);}}a0['index']=K,a0['attribs']['a_index']['array']=U,a0['numElements']=a0['attribs']['a_index']['array']['length'],a0['attribs']['a_position']['array']=S,a0['attribs']['a_normal']['array']=T;Q>0x0&&a['UV_DEBUG']&&(a0['attribs']['a_uv']['array']=V);{for(let al=0x0;al<X['length'];al++){X[al]['object']=a0,a['Data']['AddBody'](X[al]);}a0['attribs']['a_color']['array']=new Uint8Array(Y,0x0,Z),a['Data']['Objects']['push'](a0),a0['tag']=X,a0['flag']['lod']=H['DataType'],a0['link']=H['Url'];}if(H['DataType']===e['MeshBlock_LOD']){let am=a['Data']['LODMap']['get'](H['Url']);am===undefined?(am=[],am['push'](a0),a['Data']['LODMap']['set'](H['Url'],am)):(am['push'](a0),a['Data']['LODMap']['set'](H['Url'],am));}else{if(a['DataSplit']!==0x0){let an=a['Data']['ObjectMap']['get'](H['Url']);an===undefined?(an=[],an['push'](a0),a['Data']['ObjectMap']['set'](H['Url'],an)):(an['push'](a0),a['Data']['ObjectMap']['set'](H['Url'],an));}}K++;}}function u(G,H,I,J,K){if(G['Status']===0x3){J(a['Data']['ObjectMap']['get'](G['Url']),G);return;}let L=o(d['CTMeshBlock'],H),M=H[L],N=q(M,I);M!==undefined?setTimeout(function(){let O=0x0,P=N['getInt32'](O,!![]);O+=0x4;let Q=0x0,R=function(){for(let S=Q;S<P;S++){if(G['Crash']||G['Status']===0x3)break;let T=Q/P;if(T===Infinity)T=0x0;let U=0x0;U=N['getInt32'](O,!![]),O+=0x4;let V=H[U],W=q(V,I);if(G['DataType']===e['MeshBlock_LOD'])s(W,G);else t(W,G);Q++;if(Q!==P){setTimeout(function(){R();},0x1);break;}else setTimeout(function(){J(a['Data']['ObjectMap']['get'](G['Url']),G);},0x1);}if(G['Crash']||G['Status']===0x3)J(a['Data']['ObjectMap']['get'](G['Url']),G);};setTimeout(function(){if(!a['useFramebuffer'])K(0x2,0x0);R();},0x1);},0x1):J(a['Data']['ObjectMap']['get'](G['Url']),G);}function v(G,H,I){let J=0x0,K=H['getUint32'](J,!![]);J+=0x4;let L=function(O){return unescape(encodeURIComponent(O));},M=function(O){return decodeURIComponent(escape(O));};if(I['nLoadedNodes']===K)return![];let N=[];for(let O=0x0;O<K;O++){let P={'nodeId':-0x1,'nNodeProps':0x0,'items':[],'key':G['ID'],'offset':-0x1};N[O]=P,P['nodeId']=H['getUint32'](J,!![]),P['nodeId']+=a['Data']['GetStartID'](G['Key']),J+=0x4;P['nodeId']===0xb1366&&console['log'](P['nodeId'],J);P['nNodeProps']=H['getInt16'](J,!![]),J+=0x2,P['offset']=J;if(a['Configuration']['Property']['UseArrayBuffer'])for(let Q=0x0;Q<P['nNodeProps'];Q++){let R=H['getUint32'](J,!![]);J+=0x4,J+=R,J+=0x2,R=H['getUint32'](J,!![]),J+=0x4,J+=R,J+=0x2;}else for(let S=0x0;S<P['nNodeProps'];S++){let T={'key':null,'value':null,'valueType':null},U=H['getUint32'](J,!![]);J+=0x4;let V=new Uint8Array(H['buffer'],H['byteOffset']+J,U);T['key']=String['fromCharCode']['apply'](null,V);try{T['key']=M(T['key']);}catch(X){}J+=U,J+=0x2,U=H['getUint32'](J,!![]),J+=0x4;let W=new Uint8Array(H['buffer'],H['byteOffset']+J,U);T['value']=String['fromCharCode']['apply'](null,W);try{T['value']=M(T['value']);}catch(Y){}J+=U,T['valType']=H['getUint16'](J,!![]),J+=0x2,P['items'][S]=T;}}a['Property']['Add'](N,G['ID'],H);}function w(G,H,I,J){let K=0x0,L=G['getUint32'](K,!![]);K+=0x4;let M=[];for(let N=0x0;N<L;N++){let O=G['getUint32'](K,!![]);K+=0x4;let P={'tableTocIdx':O,'nLoadedNodes':0x0};M['push'](P);}for(let Q=0x0;Q<M['length'];Q++){let R=M[Q],S=I[R['tableTocIdx']];if(S===undefined){}else{let T=q(S,G['buffer']);v(H,T,R);}}J(H);}function x(G,H,I,J,K){let L=o(d['CTNodePropTableIndices'],H),M=H[L],N=q(M,I);M!==undefined&&setTimeout(function(){console['log']('readProperty\x20-\x20start\x20::\x20',G['Url']),w(N,G,H,J),console['log']('readProperty\x20-\x20end');},0x1);}function y(G,H,I,J){let K=0x0,L=G['getUint32'](K,!![]);K+=0x4;let M=[];for(let N=0x0;N<L;N++){let O=G['getInt32'](K,!![]);K+=0x4;let P=G['getInt32'](K,!![]);K+=0x4;let Q=a['Material']['GetMaterialBySrcID'](H['Key'],O);if(Q!==undefined){K+=0x4,K+=0x4,K+=0x10,K+=0x10,K+=0x10,K+=0x10,K+=0x4,K+=0x4,K+=0x4;{let Y=G['getInt32'](K,!![]);K+=0x4,K+=Y;}let X=G['getInt32'](K,!![]);K+=0x4;for(let Z=0x0;Z<X;Z++){K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4,K+=0x4;{let a0=G['getInt32'](K,!![]);K+=0x4,K+=a0;}}continue;}let R=a['Data']['MaterialGLItem']();R['id']=O,R['roughness']=G['getFloat32'](K,!![]),K+=0x4,R['metallic']=G['getFloat32'](K,!![]),K+=0x4;let S=[];for(let a1=0x0;a1<0x4;a1++){S[a1]=G['getFloat32'](K,!![]),K+=0x4;}let T=[];for(let a2=0x0;a2<0x4;a2++){T[a2]=G['getFloat32'](K,!![]),K+=0x4;}let U=[];for(let a3=0x0;a3<0x4;a3++){U[a3]=G['getFloat32'](K,!![]),K+=0x4;}let V=[];for(let a4=0x0;a4<0x4;a4++){V[a4]=G['getFloat32'](K,!![]),K+=0x4;}R['ambient']=new b['Color']()['setGLColor'](S[0x0],S[0x1],S[0x2],S[0x3]),R['color']=new b['Color']()['setGLColor'](T[0x0],T[0x1],T[0x2],T[0x3]),R['specular']=new b['Color']()['setGLColor'](U[0x0],U[0x1],U[0x2],U[0x3]),R['emissive']=new b['Color']()['setGLColor'](V[0x0],V[0x1],V[0x2],V[0x3]),R['shiness']=G['getFloat32'](K,!![]),K+=0x4,R['reflectivity']=G['getFloat32'](K,!![]),K+=0x4,R['transparencyFactor']=G['getFloat32'](K,!![]),K+=0x4;{let a5=G['getInt32'](K,!![]);K+=0x4;if(a5>0x0){let a6=new Uint8Array(G['buffer'],G['byteOffset']+K,a5),a7=String['fromCharCode']['apply'](null,a6);try{a7=i(a7);}catch(a8){}R['name']=a7;}K+=a5;}let W=G['getInt32'](K,!![]);K+=0x4;for(let a9=0x0;a9<W;a9++){let aa=a['Data']['TextureDataItem'](),ab=G['getInt32'](K,!![]);K+=0x4,aa['itemType']=ab,aa['width']=G['getFloat32'](K,!![]),K+=0x4,aa['height']=G['getFloat32'](K,!![]),K+=0x4;let ac=G['getInt32'](K,!![]);K+=0x4;let ad=G['getInt32'](K,!![]);K+=0x4,aa['stride']=ac,aa['bitFormat']=ad,aa['uvChanel']=G['getInt32'](K,!![]),K+=0x4,aa['tiling']['x']=G['getFloat32'](K,!![]),K+=0x4,aa['tiling']['y']=G['getFloat32'](K,!![]),K+=0x4,aa['offset']['x']=G['getFloat32'](K,!![]),K+=0x4,aa['offset']['y']=G['getFloat32'](K,!![]),K+=0x4;let ae=G['getInt32'](K,!![]);K+=0x4;{if(ae>0x0){let af=new Uint8Array(G['buffer'],G['byteOffset']+K,ae),ag=String['fromCharCode']['apply'](null,af);try{ag=i(ag);}catch(ah){}aa['name']=ag;}K+=ae;}if(ae>0x0){let ai=a['Data']['GetPath'](H['Url']);aa['downloading']=!![],aa['URL']=ai+'resource/'+aa['name'];}R['textureData']['push'](aa);}if(![]){let aj=a['Data']['TextureDataItem']();aj['itemType']=b['Enum']['TEXTURE_TYPES']['ROUGHNESS'],aj['uvChanel']=0x0,aj['tiling']['x']=0x1,aj['tiling']['y']=0x1,aj['offset']['x']=0x0,aj['offset']['y']=0x0;let ak=a['Data']['GetPath'](H['Url']);aj['URL']=ak+'resource/'+'formula1_DefaultMaterial_Glossiness.png';let al=new Image();al['src']=aj['URL'],al['onload']=function(){aj['src']=al,aj['width']=al['width'],aj['height']=al['height'],setTimeout(function(){a['Renderer']['Render']();},0xa);},R['textureData']['push'](aj);}M['push'](R);}J(H,M);}function z(G,H,I,J,K){let L=o(d['CTMaterialBlock'],H),M=H[L],N=q(M,I),O=o(d['CTMaterialBlockTable'],H),P=H[O],Q=q(P,I);M!==undefined&&setTimeout(function(){let R=0x0,S=N['getUint32'](R,!![]);R+=0x4;for(let T=0x0;T<S;T++){y(Q,G,H,J);}},0x1);}function A(G,H,I,J){let K=o(d['CTTreeInfo'],H),L=H[K],M=q(L,I),N=o(d['CTStructure'],H),O=H[N],P=q(O,I),Q=o(d['CTStructureNameData'],H),R=H[Q],S=q(R,I);if(J!==undefined)J(G,M,P,S);}function B(G,H,I,J){let K=o(d['CTSplitStructureMeshBlockFile'],H),L=H[K],M=q(L,I),N=0x0,O=new Int32Array(M['buffer'],N+M['byteOffset'],0x6),P=h();P['version']=O[0x0],P['datatype']=O[0x1],P['structure_cnt']=O[0x2],P['mesh_cnt']=O[0x3],P['property_cnt']=O[0x4],P['unit']=O[0x5];if(!a['UseDefaultUnit'])P['unit']=0x5;P['tag']['url']=G['Url'],P['tag']['file_id']=G['Key'],N+=0x4*0x6;if(P['version']>=0x10012){let a7=M['getInt32'](N,!![]);P['compressed']=a7===0x1?!![]:![],N+=0x4;}if(P['version']>=0x10011){let a8=M['getInt32'](N,!![]);P['material_cnt']=a8,N+=0x4;}if(P['version']>=0x10003){let a9=M['getInt32'](N,!![]);N+=0x4;if(a9>0x0){let aa=new Uint8Array(M['buffer'],M['byteOffset']+N,a9),ab=String['fromCharCode']['apply'](null,aa);try{ab=i(ab);}catch(ac){}P['GUID']=ab;}N+=a9;}a['Data']['Accumulation']=P['unit'],N=0x0;let Q=[],R=o(d['CTStructureFileInfoBlock'],H),S=H[R],T=q(S,I);for(let ad=0x0;ad<P['structure_cnt'];ad++){let ae=T['getInt32'](N,!![]);N+=0x4;let af=new Uint8Array(T['buffer'],T['byteOffset']+N,ae),ag=String['fromCharCode']['apply'](null,af);try{ag=i(ag);}catch(ai){}let ah=a['Data']['GetPath'](G['Url']);Q['push'](ah+ag);}N=0x0;let U=[],V=o(d['CTMeshFileInfoBlock'],H),W=H[V],X=q(W,I),Y=0x0;for(let aj=0x0;aj<P['mesh_cnt'];aj++){let ak=X['getInt32'](N,!![]);N+=0x4;let al=new Uint8Array(X['buffer'],X['byteOffset']+N,ak);N+=ak;let am=String['fromCharCode']['apply'](null,al);try{am=i(am);}catch(aH){}let an=X['getInt32'](N,!![]);N+=0x4;a['DemoType']===0x3&&am['localeCompare']('CITYVIEW_V1_wm_01_0005.vizw')===0x0&&(an=0x0);let ao=X['getInt32'](N,!![]);N+=0x4;let ap=X['getInt32'](N,!![]);N+=0x4;let aq=X['getInt32'](N,!![]);N+=0x4,Y+=aq;let ar=X['getFloat32'](N,!![]);N+=0x4;let as=X['getFloat32'](N,!![]);N+=0x4;let at=X['getFloat32'](N,!![]);N+=0x4;let au=X['getFloat32'](N,!![]);N+=0x4;let av=X['getFloat32'](N,!![]);N+=0x4;let aw=X['getFloat32'](N,!![]);N+=0x4;let ax=X['getFloat32'](N,!![]);N+=0x4;let ay=X['getFloat32'](N,!![]);N+=0x4;let az=X['getInt32'](N,!![]);N+=0x4,al=new Uint8Array(X['buffer'],X['byteOffset']+N,az),N+=az;let aA=String['fromCharCode']['apply'](null,al);try{aA=i(aA);}catch(aI){}let aB=[],aC=[];aC[0x0]=at,aC[0x1]=au,aC[0x2]=av,aC[0x3]=aw,aC[0x4]=ax,aC[0x5]=ay;let aD=a['Data']['GetPath'](G['Url']),aE=aD+am,aF=[];aF['push'](aE);let aG={'headerVersion':P['version'],'header':P,'id_file':G['Key'],'bbox':a['Data']['BBox'](aC),'list':aF,'lod':an,'lod_sequence':aj,'file':aE,'tri_num':aq,'area':ar,'area_num':as,'index_start':ao,'index_end':ap};aB['push'](aG),U['push'](aB);if(a['Data']['ObjectsBBox']===undefined)a['Data']['ObjectsBBox']=new b['BBox']()['copy'](aG['bbox']);else{if(a['DemoType']===0x1){if(aG['bbox']['max']['x']===0x0||aG['bbox']['max']['y']===0x0||aG['bbox']['max']['z']===0x0||(aG['bbox']['min']['x']===0x0||aG['bbox']['min']['y']===0x0||aG['bbox']['min']['z']===0x0))continue;}a['Data']['ObjectsBBox']['append'](aG['bbox']);}}N=0x0;let Z=[],a0=o(d['CTPropertyFileInfoBlock'],H),a1=H[a0],a2=q(a1,I);for(let aJ=0x0;aJ<P['property_cnt'];aJ++){let aK=a2['getInt32'](N,!![]);N+=0x4;let aL=new Uint8Array(a2['buffer'],a2['byteOffset']+N,aK),aM=String['fromCharCode']['apply'](null,aL);try{aM=i(aM);}catch(aO){}N+=aK;let aN=a['Data']['GetPath'](G['Url']);Z['push'](aN+aM);}N=0x0;let a3=[],a4=o(d['CTMaterialFileInfoBlock'],H),a5=H[a4],a6=q(a5,I);if(P['material_cnt']!==null)for(let aP=0x0;aP<P['material_cnt'];aP++){let aQ=a6['getInt32'](N,!![]);N+=0x4;let aR=new Uint8Array(a6['buffer'],a6['byteOffset']+N,aQ),aS=String['fromCharCode']['apply'](null,aR);try{aS=i(aS);}catch(aU){}N+=aQ;let aT=a['Data']['GetPath'](G['Url']);a3['push'](aT+aS);}G['Header']=P,J(G,Q,U,Z,a3);}function C(G,H,I,J){let K=undefined;try{K=new DataView(G);}catch(S){H['Status']=0x3,I(undefined,H);return;}let L=0x0,M=g(),N=new Uint8Array(G,L,0x10);M['typeStr']=String['fromCharCode']['apply'](null,N),L+=0x10,M['version']=K['getInt32'](L,!![]),L+=0x4,M['sizeTocItem']=K['getInt32'](L,!![]),L+=0x4,M['nToc']=K['getInt32'](L,!![]),L+=0x4,M['tocPos']=j(K,L,!![]),L+=0x8;let O=0x0,P=0x0,Q=M['tocPos'];O=K['getInt32'](Q,!![]),Q+=0x4,P=j(K,Q,!![]),Q+=0x8;if(f['parsetype']===0x1){H['Status']=0x3,I(H);return;}let R=[];R=n(O,M,K),H['DataType']===e['Header']&&B(H,R,G,I),H['DataType']===e['Structure_Tree']&&A(H,R,G,I),H['DataType']===e['MeshBlock_LOD']&&u(H,R,G,I,J),H['DataType']===e['Property']&&x(H,R,G,I,J),H['DataType']===e['Material']&&z(H,R,G,I,J);}this['Load']=function(G,H,I,J){f['Download'](G,H,I,J);},this['Download']=function(G,H,I,J){let K=H,L=I,M=J;async function N(O,P){C(O,P,K,L);}l(G,K,L,N,M);};function D(G,H,I,J){let K=undefined;try{K=new DataView(G);}catch(a5){console['log']('parseCustomObjectData\x20::\x20Fail',H);return;}let L=0x0,M=K['getInt32'](L,!![]);L+=0x4;let N=a['Data']['CustomObjectData'](),O=K['getInt32'](L,!![]);L+=0x4;for(let a6=0x0;a6<O;a6++){let a7=a['Data']['NodeItem'](),a8=K['getUint32'](L,!![]);L+=0x4;let a9=K['getUint32'](L,!![]);L+=0x4;let aa=new Uint8Array(G,L,0x100);L+=0x100;let ab=aa['indexOf'](0x0);aa=aa['slice'](0x0,ab);let ac=String['fromCharCode']['apply'](null,aa);try{ac=i(ac);}catch(ad){}L+=0x4*0x3,L+=0x4*0x3,L+=0x4*0x3,a7['index']=a8,a7['pIndex']=a9,a7['name']=ac,N['structure']['push'](a7);}let P=a['Data']['Object3D']();P['index']=0x0;let Q=0x0,R=0x0,S=0x0,T=0x0,U=new b['Vector3'](),V=new b['Vector3'](),W=K['getUint32'](L,!![]);L+=0x4;for(let ae=0x0;ae<W;ae++){let af=new Float32Array(G,L,0x3);L+=0x4*0x3;let ag=new Float32Array(G,L,0x3);L+=0x4*0x3;let ah=new Float32Array(G,L,0x3);L+=0x4*0x3;for(let al=0x0;al<0x3;al++){P['attribs']['a_position']['array']['push'](af[al]),P['attribs']['a_normal']['array']['push'](ag[al]),P['attribs']['a_color']['array']['push'](ah[al]);}P['attribs']['a_color']['array']['push'](0x1);let ai=new Float32Array(G,L,0x2);L+=0x4*0x2,ai[0x1]=-ai[0x1];if(a['UV_DEBUG'])for(let am=0x0;am<0x2;am++){P['attribs']['a_uv']['array']['push'](ai[am]);}let aj=[],ak=[];for(let an=0x0;an<0x4;an++){let ao=K['getInt32'](L,!![]);L+=0x4;let ap=K['getFloat32'](L,!![]);L+=0x4,aj['push'](ao),ak['push'](ap);}a['UV_DEBUG']&&(P['attribs']['sub']['biped']['a_biped']['array']['push'](aj),P['attribs']['sub']['biped']['a_weight']['array']['push'](ak)),ae===0x0?(U['set'](af[0x0],af[0x1],af[0x2]),V['set'](af[0x0],af[0x1],af[0x2])):(U['x']=Math['min'](U['x'],af[0x0]),U['y']=Math['min'](U['y'],af[0x1]),U['z']=Math['min'](U['z'],af[0x2]),V['x']=Math['max'](V['x'],af[0x0]),V['y']=Math['max'](V['y'],af[0x1]),V['z']=Math['max'](V['z'],af[0x2])),Q++,S++;}let X=K['getUint32'](L,!![]);L+=0x4;{let aq=new Uint32Array(G,L,X*0x3);L+=0x4*X*0x3,P['attribs']['a_index']['array']=aq,T=X;}let Y=0x0;Y=K['getUint32'](L,!![]),L+=0x4;let Z=[];for(let ar=0x0;ar<Y;ar++){let as=a['Data']['MaterialGLItem'](),at=K['getUint32'](L,!![]);L+=0x4;let au=new Uint8Array(G,L,0x40);L+=0x40;let av=au['indexOf'](0x0);au=au['slice'](0x0,av);let aw=String['fromCharCode']['apply'](null,au);try{aw=i(aw);}catch(aI){}as['name']=aw;let ax=new Uint8Array(G,L,0x201);L+=0x201;let ay=ax['indexOf'](0x0);ax=ax['slice'](0x0,ay);let az=String['fromCharCode']['apply'](null,ax);try{az=i(az);}catch(aJ){}let aA=a['Data']['TextureDataItem']();aA['itemType']=b['Enum']['TEXTURE_TYPES']['DIFFUSE'];let aB=K['getFloat32'](L,!![]),aC=K['getFloat32'](L+0x4,!![]);L+=0x4*0x2,aA['tiling']['x']=aB,aA['tiling']['y']=aC;let aD=K['getFloat32'](L,!![]),aE=K['getFloat32'](L+0x4,!![]);L+=0x4*0x2,aA['offset']['x']=aD,aA['offset']['y']=aE,L+=0x4*0x3;let aF=K['getFloat32'](L,!![]);L+=0x4,as['color']['a']=aF*0xff;if(az['localeCompare']('')!==0x0){let aK='',aL=H['Url']['split']('/'),aM=aL['length'];for(let aO=0x0;aO<aM-0x1;aO++){aK+=aL[aO]+'/';}aK+=az;let aN=new Image();aN['src']=encodeURIComponent(aK),aN['onload']=function(){aA['src']=aN,aA['width']=aN['width'],aA['height']=aN['height'],setTimeout(function(){a['Renderer']['Render']();},0xa);},as['textureData']['push'](aA);}let aG=a['Material']['AddMaterial'](as),aH=![];for(let aP=Z['length']-0x1;aP>=0x0;aP--){if(Z[aP]===aG){aH=!![];break;}}!aH&&Z['push'](aG);}let a0=a['Data']['CustomObjectAnimation'](),a1=0x0,a2=0x0;a1=K['getFloat32'](L,!![]),L+=0x4,a2=K['getFloat32'](L,!![]),L+=0x4;let a3=K['getUint32'](L,!![]);L+=0x4;for(let aQ=0x0;aQ<a3;aQ++){let aR=a['Data']['CustomObjectAnimationLayer']();aR['length']=a1,aR['step']=a2;let aS=0x0;aS=K['getUint32'](L,!![]),L+=0x4;let aT=0x0;for(let aU=0x0;aU<aS;aU++){let aV=K['getUint32'](L,!![]);L+=0x4;while(aT<=aV){let aX={'nodeID':aU,'transform':[]};aR['data']['push'](aX),aT++;}let aW=K['getUint32'](L,!![]);L+=0x4;for(let aY=0x0;aY<aW;aY++){let aZ=[];for(let b1=0x0;b1<0x10;b1++){aZ[b1]=K['getFloat32'](L,!![]),L+=0x4;}let b0=new b['Matrix4']();b0['elements']=aZ,aV>=0x0&&aV<0x400&&aR['data'][aV]['transform']['push'](b0);}}a0['layer']['push'](aR);}N['object']['push'](P),N['animation']['push'](a0);let a4={'partId':0xf4240,'bodyId':0xf4241,'color':new b['Color'](0xff,0xff,0xff,0xff),'material':undefined,'m_vnIdx':Q*0x3,'m_triIdx':R*0x3,'m_nVtx':S*0x3,'m_nTris':T*0x3,'BBox':a['Data']['BBox'](),'action':a['Data']['ActionItem'](),'colorIdx':null,'object':P};if(Z['length']>0x0)a4['material']=Z[0x0];if(Z['length']>0x0)a4['action']['material']=Z[0x0];a4['BBox']['min']['copy'](U),a4['BBox']['max']['copy'](V),a4['BBox']['update'](),P['tag']=[a4];if(I!==undefined)I(N,H);}function E(G,H,I){let J=new DataView(G),K=0x0,L=J['getInt32'](K,!![]);K+=0x4;let M=a['Data']['CustomObjectAnimation'](),N=0x0,O=0x0;N=J['getFloat32'](K,!![]),K+=0x4,O=J['getFloat32'](K,!![]),K+=0x4;let P=J['getUint32'](K,!![]);K+=0x4;for(let Q=0x0;Q<P;Q++){let R=a['Data']['CustomObjectAnimationLayer']();R['length']=N,R['step']=O;let S=0x0;S=J['getUint32'](K,!![]),K+=0x4;let T=0x0;for(let U=0x0;U<S;U++){let V=J['getUint32'](K,!![]);K+=0x4;while(T<=V){let X={'nodeID':U,'transform':[]};R['data']['push'](X),T++;}let W=J['getUint32'](K,!![]);K+=0x4;for(let Y=0x0;Y<W;Y++){let Z=new Float32Array(G,K,0x10);K+=0x4*0x10;let a0=new b['Matrix4']();a0['elements']=Z,V>=0x0&&V<0x400&&R['data'][V]['transform']['push'](a0);}}M['layer']['push'](R);}if(I!==undefined)I(M,H);}this['LoadCustomObject']=function(G,H,I){let J=H,K=I;async function L(M,N){D(M,N,J,K);}l(G,J,K,L);},this['LoadCustomObjectAnimation']=function(G,H,I){let J=H,K=I;async function L(M,N){E(M,N,J,K);}l(G,J,K,L);};function F(G,H,I,J){}this['LoadGrid']=function(G,H,I){let J=H,K=I;async function L(M,N){F(M,N,J,K);}m(G,J,K,L);};};export default Loader;