class Material{constructor(a,b){let c=this;this['MaterialFiles']=[];let d=new Map(),e=new Map(),f=new Map();this['currentMaterial']=undefined;let g=0x0;function h(){}h(),this['Clear']=function(){e['clear'](),f['clear'](),d['clear'](),c['MaterialFiles']=[],c['currentMaterial']=undefined,g=0x0;},this['AddMaterial']=function(i,j){if(i['id']===0x0){let l=c['FindMaterialFromItem'](i);if(l!==0x0)return l;let m=g+0x1;while(e['has'](m)){m++;}i['id']=m;}let k=i['id'];if(e['has'](i['id'])){let n=g+0x1;while(e['has'](n)){n++;}i['id']=n;}if(j!==undefined){let o=undefined;f['has'](j)?o=f['get'](j):(o=new Map(),f['set'](j,o)),o['set'](k,i['id']);}return e['set'](i['id'],i),g=Math['max'](i['id'],g),i['id'];},this['AddLoadingMaterial']=function(i,j,k,l){let m=undefined,n=undefined;d['has'](i)?m=d['get'](i):(m=new Map(),d['set'](i,m));m['has'](k)?n=m['get'](k):(n=[],m['set'](k,n));let o=function(p,q){let r={'srcID':p,'objectIdx':q};return r;};n['push'](o(j,l));},this['UpdateLoadingMaterial']=function(i){if(d['has'](i)===![])return;let j=d['get'](i),k=function(l,m,n){{let o=a['Data']['ObjectMap']['get'](m);if(o===undefined)return;for(let p=0x0;p<l['length'];p++){if(l[p]['objectIdx']>=o['length'])continue;let q=o[l[p]['objectIdx']],r=c['GetMaterialBySrcID'](i,l[p]['srcID']);if(r===undefined)continue;for(let s=0x0;s<q['tag']['length'];s++){let t=q['tag'][s];t['action']['material']=r['id'];}q['flag']['updateProcess']=!![];}}};j['forEach'](k),d['delete'](i),a['MeshBlock']['Reset'](),a['Renderer']['Render']();},this['UpdateMaterialTexture']=function(j){for(let k=0x0;k<j['textureData']['length'];k++){let l=j['textureData'][k];if(l['texture']!==null)continue;if(l['width']<=0x0&&l['hegith']<=0x0)continue;if(l['src']===undefined)continue;switch(l['itemType']){case b['Enum']['TEXTURE_TYPES']['DIFFUSE']:{const m=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],m),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=m,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['NORMAL']:{const n=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],n),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=n,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['BUMP']:{const o=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],o),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=o,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['ROUGHNESS']:{const p=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],p),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=p,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['METALNESS']:{const q=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],q),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=q,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['SPECLUAR']:{const r=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],r),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=r,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;case b['Enum']['TEXTURE_TYPES']['AMBIENT']:{const s=a['gl']['createTexture']();a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],s),a['gl']['texImage2D'](a['gl']['TEXTURE_2D'],0x0,a['gl']['RGBA'],a['gl']['RGBA'],a['gl']['UNSIGNED_BYTE'],l['src']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MIN_FILTER'],a['gl']['LINEAR_MIPMAP_NEAREST']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_MAG_FILTER'],a['gl']['LINEAR']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_S'],a['gl']['REPEAT']),a['gl']['texParameteri'](a['gl']['TEXTURE_2D'],a['gl']['TEXTURE_WRAP_T'],a['gl']['REPEAT']),a['gl']['generateMipmap'](a['gl']['TEXTURE_2D']),l['texture']=s,a['gl']['bindTexture'](a['gl']['TEXTURE_2D'],null);}break;}}},this['RemoveMaterial']=function(i){e['has'](i)&&e['delete'](i);},this['GetMaterial']=function(i){return e['get'](i);},this['GetMaterialBySrcID']=function(i,j){if(f['has'](i)){let k=f['get'](i);if(k!==undefined){let l=k['get'](j);if(l!==undefined)return c['GetMaterial'](l);}}return undefined;},this['FindMaterial']=function(i,j,k,l){let m=a['Data']['MaterialGLItem']();return m['color']=i,m['roughness']=j,m['metallic']=k,m['textureData']=l,c['FindMaterialFromItem'](m);},this['FindMaterialFromItem']=function(i){let j=0x0,k=function(l,m,n){if(j>0x0)return;if(l['roughness']!==i['roughness'])return;if(l['metallic']!==i['metallic'])return;if(l['shiness']!==i['shiness'])return;if(l['reflectivity']!==i['reflectivity'])return;if(l['transparencyFactor']!==i['transparencyFactor'])return;if(l['color']['equals'](i['color'])===![])return;if(l['ambient']!==i['ambient'])return;if(l['ambient']!==undefined&&i['ambient']!==undefined){if(l['ambient']['equals'](i['ambient'])===![])return;}if(l['specular']!==i['specular'])return;if(l['specular']!==undefined&&i['specular']!==undefined){if(l['specular']['equals'](i['specular'])===![])return;}if(l['emissive']!==i['emissive'])return;if(l['emissive']!==undefined&&i['emissive']!==undefined){if(l['emissive']['equals'](i['emissive'])===![])return;}if(l['textureData']['length']!==i['textureData']['length'])return;for(let o=0x0;o<l['textureData']['length'];o++){let p=l['textureData'][o],q=i['textureData'][o];if(p['width']!==q['width'])return;if(p['height']!==q['height'])return;if(p['itemType']!==q['itemType'])return;if(p['itemType']!==q['itemType'])return;if(p['tiling']['equals'](q['tiling'])===![])return;if(p['offset']['equals'](q['offset'])===![])return;if(p['uvChanel']!==q['uvChanel'])return;if(p['name']!==q['name'])return;if(p['URL']!==q['URL'])return;}j=l['id'];};return e['forEach'](k),j;};}}export default Material;