import a from'./IFindManager.js';import b from'./IColorManager.js';import c from'./IGeometryPropertyManager.js';import d from'./ITransformManager.js';import e from'./IUDAManager.js';class Object3D{constructor(f,g){let h=this;this['Main']=f;let i=function(){let l={'id':undefined,'index':undefined,'kind':undefined,'kindStr':undefined,'parentId':undefined,'name':undefined,'level':undefined,'selection':undefined,'visible':undefined,'boundBox':undefined,'fileId':undefined,'originId':undefined};return l;};h['Find']=new a(f,g,this),h['Color']=new b(f,g),h['GeometryProperty']=new c(f,g,this),h['Transform']=new d(f,g),h['UDA']=new e(f,g),this['FromID']=function(l){let m=h['Main']['Tree']['GetNodeInfo'](l);if(m===undefined)return undefined;let n=undefined;if(m!==undefined)n=h['Main']['Tree']['GetParentNodeInfo'](m);let o=undefined;if(m['node_type']===g['Enum']['ENTITY_TYPES']['EntAssembly'])o='Assembly';else{if(m['node_type']===g['Enum']['ENTITY_TYPES']['EntPart'])o='Part';else{if(m['node_type']===g['Enum']['ENTITY_TYPES']['EntBody'])o='Body';}}let p=i();return p['id']=m['node_id'],p['index']=m['index'],p['kind']=m['node_type'],p['kindStr']=o,p['parentId']=n!==undefined?n['node_id']:undefined,p['name']=m['name'],p['level']=m['level'],p['selection']=m['selection'],p['visible']=m['visible'],p['boundBox']=m['bbox'],p['fileId']=m['file_id'],p['originId']=m['origin_id'],p;};function j(l){let m=undefined;if(l!==undefined)m=h['Main']['Tree']['GetParentNodeInfo'](l);let n=undefined;if(l['node_type']===g['Enum']['ENTITY_TYPES']['EntAssembly'])n='Assembly';else{if(l['node_type']===g['Enum']['ENTITY_TYPES']['EntPart'])n='Part';else{if(l['node_type']===g['Enum']['ENTITY_TYPES']['EntBody'])n='Body';}}let o=i();return o['id']=l['node_id'],o['index']=l['index'],o['kind']=l['node_type'],o['kindStr']=n,o['parentId']=m!==undefined?m['node_id']:undefined,o['name']=l['name'],o['level']=l['level'],o['selection']=l['selection'],o['visible']=l['visible'],o['boundBox']=l['bbox'],o['fileId']=l['file_id'],o['originId']=l['origin_id'],o;}this['FromOrigin']=function(l,m){let n=h['Main']['Tree']['GetNodeIDByOrigin'](l,m);return this['FromID'](n);},this['FromFile']=function(l){let m=h['Main']['Tree']['GetNodeByFile'](l),n=[];for(let o=0x0;o<m['length'];o++){let p=m[o];n['push'](j(p));}return n;},this['GetNodeStructure']=function(l,m){let n=[],o=h['FromID'](l);if(o===undefined)return n;let p=undefined;if(o['parentId']!==undefined)p=h['FromID'](o['parentId']);n['push'](o);while(p!==undefined){n['push'](p);if(p['parentId']!==undefined)p=h['FromID'](p['parentId']);else break;}return m===![]?n:n['reverse']();},this['SelectAll']=function(l){if(l===!![])h['Main']['Data']['SelectAll'](!![]);else h['Main']['Data']['DeselectAll'](![]);},this['GetSelectedObject3D']=function(){return h['Main']['Data']['GetSelection']();},this['SelectByNode']=function(l,m,n){h['Main']['Renderer']['Lock']();let o=[];for(let p=0x0;p<l['length'];p++){o['push'](l[p]['id']);}h['Main']['Tree']['SelectMulti'](o,m,n),h['Main']['Renderer']['Unlock']();},this['SelectByNodeID']=function(l,m,n){h['Main']['Renderer']['Lock'](),h['Main']['Tree']['SelectMulti'](l,m,n),h['Main']['Renderer']['Unlock']();},this['SelectByOrigin']=function(l,m,n,o){h['Main']['Renderer']['Lock']();let p=h['Main']['Tree']['GetNodeIDsByOrigin'](l,m);h['Main']['Tree']['EventHandler']['Enable']=![],h['Main']['Tree']['SelectMulti'](p,n,o),h['Main']['Tree']['EventHandler']['Enable']=!![],h['Main']['Renderer']['Unlock']();},this['SelectByFile']=function(l,m,n){h['Main']['Tree']['EventHandler']['Enable']=![];if(Array['isArray'](l)){let o=[];for(let p=0x0;p<l['length'];p++){let q=this['FromFile'](l[p]);o['push'](q);}h['SelectByNode'](o,m,n);}else{let r=this['FromFile'](l);h['SelectByNode'](r,m,n);}h['Main']['Tree']['EventHandler']['Enable']=!![];},this['SetSelectionColor']=function(l){h['Main']['Data']['SetSelectedObjectsColor'](l);},this['ShowByNode']=function(l,m){h['Main']['Renderer']['Lock']();let n=[];for(let o=0x0;o<l['length'];o++){n['push'](l[o]['id']);}h['Main']['Tree']['ShowMulti'](n,m),h['Main']['Renderer']['Unlock']();},this['ShowByNodeID']=function(l,m){h['Main']['Renderer']['Lock'](),h['Main']['Tree']['ShowMulti'](l,m),h['Main']['Renderer']['Unlock']();},this['ShowByOrigin']=function(l,m,n){let o=h['Main']['Tree']['GetNodeIDsByOrigin'](l,m);h['ShowByNodeID'](o,n);},this['ShowByFile']=function(l,m){if(Array['isArray'](l)){let n=[];for(let o=0x0;o<l['length'];o++){let p=this['FromFile'](l[o]);n['push'](p);}h['ShowByNode'](n,m);}else{let q=this['FromFile'](l);h['ShowByNode'](q,m);}},this['ShowAll']=function(l){h['Main']['Data']['ShowAll'](l);},this['ShowSelectedObject']=function(l){h['Main']['Data']['ShowSelection'](l);},this['GetBodiesByNode']=function(l){let m=[];for(let n=0x0;n<l['length'];n++){m['push'](l[n]['id']);}return h['GetBodiesByNodeID'](m);},this['GetBodiesByNodeID']=function(l){let m=h['Main']['Tree']['GetBodies'](l);return m;},this['GetBoundBoxByNode']=function(l){let m=h['GetBodiesByNode'](l);return h['Main']['Data']['GetBBox'](m);},this['GetBoundBoxByNodeID']=function(l){let m=h['GetBodiesByNodeID'](l);return h['Main']['Data']['GetBBox'](m);};function k(l){if(l===g['Enum']['OBJECT3D_FILTER']['LEAF_ASSEMBLY']){let m=[];m=h['Main']['Tree']['GetNodeByType'](g['Enum']['ENTITY_TYPES']['EntPart']);let n=new Map(),o=[];for(let p=0x0;p<m['length'];p++){let q=m[p];if(q['parent_id']===undefined)continue;if(n['has'](q['parent_id'])==![]){let r=h['Main']['Tree']['GetNodeByID'](q['parent_id']);n['set'](q['parent_id'],r);}}return o=Array['from'](n['values']()),o;}else{if(l===g['Enum']['OBJECT3D_FILTER']['PARENT_LEAF_ASSEMBLY']){let s=[];s=k(g['Enum']['OBJECT3D_FILTER']['LEAF_ASSEMBLY']);let t=new Map(),u=[];for(let v=0x0;v<s['length'];v++){let w=s[v];if(w['parent_id']===undefined)continue;if(t['has'](w['parent_id'])==![]){let x=h['Main']['Tree']['GetNodeByID'](w['parent_id']);t['set'](w['parent_id'],x);}}return u=Array['from'](t['values']()),u;}else{}}};this['FromFilter']=function(l){let m=[],n=k(l);for(let o=0x0;o<n['length'];o++){let p=h['FromID'](n[o]['node_id']);m['push'](p);}return m;},this['OnObject3DSelected']=function(l){h['Main']['EventHandler']['addEventListener'](g['Enum']['EVENT_TYPES']['Model']['Select'],l);},this['OnBoxSelected']=function(l){h['Main']['EventHandler']['addEventListener'](g['Enum']['EVENT_TYPES']['Model']['BoxSelect'],l);};}}export default Object3D;